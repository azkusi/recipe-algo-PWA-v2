/*! For license information please see main.5966a2ea.js.LICENSE.txt */
!function(){var e={694:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var a=typeof n;if("string"===a||"number"===a)e.push(n);else if(Array.isArray(n)){if(n.length){var o=i.apply(null,n);o&&e.push(o)}}else if("object"===a)if(n.toString===Object.prototype.toString)for(var u in n)r.call(n,u)&&n[u]&&e.push(u);else e.push(n.toString())}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},463:function(e,t,n){"use strict";var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function m(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(d,e)&&(f.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,m);y[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,m);y[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,m);y[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),_=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function j(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?j(e):""}function K(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case _:return"Portal";case E:return"Profiler";case I:return"StrictMode";case A:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case D:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function z(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=z(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function Z(e,t){J(e,t);var n=z(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,z(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+z(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:z(n)}}function ae(e,t){var n=z(t.value),r=z(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,he=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ge=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function me(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,xe=null,Ie=null;function Ee(e){if(e=ki(e)){if("function"!==typeof _e)throw Error(a(280));var t=e.stateNode;t&&(t=bi(t),_e(e.stateNode,e.type,t))}}function Se(e){xe?Ie?Ie.push(e):Ie=[e]:xe=e}function Te(){if(xe){var e=xe,t=Ie;if(Ie=xe=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ce(e,t){return e(t)}function Ae(){}var Ne=!1;function De(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Ce(e,t,n)}finally{Ne=!1,(null!==xe||null!==Ie)&&(Ae(),Te())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=bi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Re=!1;if(l)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(le){Re=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,je=!1,Ue=null,Ve={onError:function(e){Me=!0,Fe=e}};function Ke(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function ze(e){if(Be(e)!==e)throw Error(a(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return ze(i),e;if(o===r)return ze(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Xe=i.unstable_requestPaint,Je=i.unstable_now,Ze=i.unstable_getCurrentPriorityLevel,$e=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ht(u):0!==(a&=o)&&(r=ht(a))}else 0!==(o=n&~i)?r=ht(o):0!==a&&(r=ht(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function yt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function mt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var bt,_t,xt,It,Et,St=!1,Tt=[],Ct=null,At=null,Nt=null,Dt=new Map,Pt=new Map,Rt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Dt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=mi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Et(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Ut(e,t,n){jt(e)&&n.delete(t)}function Vt(){St=!1,null!==Ct&&jt(Ct)&&(Ct=null),null!==At&&jt(At)&&(At=null),null!==Nt&&jt(Nt)&&(Nt=null),Dt.forEach(Ut),Pt.forEach(Ut)}function Kt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return Kt(t,e)}if(0<Tt.length){Kt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Kt(Ct,e),null!==At&&Kt(At,e),null!==Nt&&Kt(Nt,e),Dt.forEach(t),Pt.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Rt.shift()}var qt=w.ReactCurrentBatchConfig,zt=!0;function Wt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=1,Gt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Ht(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=4,Gt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Gt(e,t,n,r){if(zt){var i=Yt(e,t,n,r);if(null===i)zr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return At=Mt(At,e,t,n,r,i),!0;case"mouseover":return Nt=Mt(Nt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Dt.set(a,Mt(Dt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Pt.set(a,Mt(Pt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&bt(a),null===(a=Yt(e,t,n,r))&&zr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else zr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=mi(e=be(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Zt=null,$t=null;function en(){if($t)return $t;var e,t,n=Zt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return $t=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),hn=F({},cn,{view:0,detail:0}),fn=an(hn),dn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),yn=an(F({},hn,{relatedTarget:0})),gn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),mn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(mn),wn=an(F({},cn,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function En(){return In}var Sn=F({},hn,{key:function(e){if(e.key){var t=bn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(Sn),Cn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=an(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Nn=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=an(Dn),Rn=[9,13,27,32],On=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!On||Ln&&8<Ln&&11>=Ln),jn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Wn(e,t,n,r){Se(r),0<(t=Hr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Gn=null;function Qn(e){jr(e,0)}function Yn(e){if(G(wi(e)))return e}function Xn(e,t){if("change"===e)return t}var Jn=!1;if(l){var Zn;if(l){var $n="oninput"in document;if(!$n){var er=document.createElement("div");er.setAttribute("oninput","return;"),$n="function"===typeof er.oninput}Zn=$n}else Zn=!1;Jn=Zn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Gn=Hn=null)}function nr(e){if("value"===e.propertyName&&Yn(Gn)){var t=[];Wn(t,Gn,e,be(e)),De(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Gn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,yr=null,gr=null,mr=null,kr=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==yr||yr!==Q(r)||("selectionStart"in(r=yr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},mr&&sr(mr,r)||(mr=r,0<(r=Hr(gr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function br(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:br("Animation","AnimationEnd"),animationiteration:br("Animation","AnimationIteration"),animationstart:br("Animation","AnimationStart"),transitionend:br("Transition","TransitionEnd")},xr={},Ir={};function Er(e){if(xr[e])return xr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ir)return xr[e]=n[t];return e}l&&(Ir=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Sr=Er("animationend"),Tr=Er("animationiteration"),Cr=Er("animationstart"),Ar=Er("transitionend"),Nr=new Map,Dr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Nr.set(e,t),s(t,[e])}for(var Rr=0;Rr<Dr.length;Rr++){var Or=Dr[Rr];Pr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Pr(Sr,"onAnimationEnd"),Pr(Tr,"onAnimationIteration"),Pr(Cr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Ar,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(Ke.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,je||(je=!0,Ue=l)}}(r,t,void 0,e),e.currentTarget=null}function jr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(je)throw e=Ue,je=!1,Ue=null,e}function Ur(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Kr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[Kr]){e[Kr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Kr]||(t[Kr]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Xt(t)){case 1:var i=Wt;break;case 4:i=Ht;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function zr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=mi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}De((function(){var r=a,i=be(n),o=[];e:{var u=Nr.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Tn;break;case"focusin":c="focus",s=yn;break;case"focusout":c="blur",s=yn;break;case"beforeblur":case"afterblur":s=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=An;break;case Sr:case Tr:case Cr:s=gn;break;case Ar:s=Nn;break;case"scroll":s=fn;break;case"wheel":s=Pn;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),h=!l&&"scroll"===e,f=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==f&&(null!=(v=Pe(p,f))&&l.push(Wr(p,v,d)))),h)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!mi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?mi(c):null)&&(c!==(h=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==s?u:wi(s),d=null==c?u:wi(c),(u=new l(v,p+"leave",s,n,i)).target=h,u.relatedTarget=d,v=null,mi(i)===r&&((l=new l(f,p+"enter",c,n,i)).target=d,l.relatedTarget=h,v=l),h=v,s&&c)e:{for(f=c,p=0,d=l=s;d;d=Gr(d))p++;for(d=0,v=f;v;v=Gr(v))d++;for(;0<p-d;)l=Gr(l),p--;for(;0<d-p;)f=Gr(f),d--;for(;p--;){if(l===f||null!==f&&l===f.alternate)break e;l=Gr(l),f=Gr(f)}l=null}else l=null;null!==s&&Qr(o,u,s,l,!1),null!==c&&null!==h&&Qr(o,h,c,l,!0)}if("select"===(s=(u=r?wi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=Xn;else if(zn(u))if(Jn)y=or;else{y=ir;var g=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=ar);switch(y&&(y=y(e,r))?Wn(o,y,n,i):(g&&g(e,u,r),"focusout"===e&&(g=u._wrapperState)&&g.controlled&&"number"===u.type&&ee(u,"number",u.value)),g=r?wi(r):window,e){case"focusin":(zn(g)||"true"===g.contentEditable)&&(yr=g,gr=r,mr=null);break;case"focusout":mr=gr=yr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,wr(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":wr(o,n,i)}var m;if(On)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Bn?Vn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Bn&&(m=en()):(Zt="value"in(Jt=i)?Jt.value:Jt.textContent,Bn=!0)),0<(g=Hr(r,k)).length&&(k=new wn(k,e,null,n,i),o.push({event:k,listeners:g}),m?k.data=m:null!==(m=Kn(n))&&(k.data=m))),(m=Mn?function(e,t){switch(e){case"compositionend":return Kn(t);case"keypress":return 32!==t.which?null:(Un=!0,jn);case"textInput":return(e=t.data)===jn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!On&&Vn(e,t)?(e=en(),$t=Zt=Jt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=m))}jr(o,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Pe(e,n))&&r.unshift(Wr(e,a,i)),null!=(a=Pe(e,t))&&r.push(Wr(e,a,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Pe(n,a))&&o.unshift(Wr(n,s,u)):i||null!=(s=Pe(n,a))&&o.push(Wr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Xr,"")}function Zr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(a(425))}function $r(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),fi="__reactFiber$"+hi,di="__reactProps$"+hi,pi="__reactContainer$"+hi,vi="__reactEvents$"+hi,yi="__reactListeners$"+hi,gi="__reactHandles$"+hi;function mi(e){var t=e[fi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[fi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[fi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[fi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function bi(e){return e[di]||null}var _i=[],xi=-1;function Ii(e){return{current:e}}function Ei(e){0>xi||(e.current=_i[xi],_i[xi]=null,xi--)}function Si(e,t){xi++,_i[xi]=e.current,e.current=t}var Ti={},Ci=Ii(Ti),Ai=Ii(!1),Ni=Ti;function Di(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ri(){Ei(Ai),Ei(Ci)}function Oi(e,t,n){if(Ci.current!==Ti)throw Error(a(168));Si(Ci,t),Si(Ai,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ni=Ci.current,Si(Ci,e),Si(Ai,Ai.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ai),Ei(Ci),Si(Ci,e)):Ei(Ai),Si(Ai,n)}var ji=null,Ui=!1,Vi=!1;function Ki(e){null===ji?ji=[e]:ji.push(e)}function Bi(){if(!Vi&&null!==ji){Vi=!0;var e=0,t=kt;try{var n=ji;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}ji=null,Ui=!1}catch(i){throw null!==ji&&(ji=ji.slice(e+1)),Ge($e,Bi),i}finally{kt=t,Vi=!1}}return null}var qi=[],zi=0,Wi=null,Hi=0,Gi=[],Qi=0,Yi=null,Xi=1,Ji="";function Zi(e,t){qi[zi++]=Hi,qi[zi++]=Wi,Wi=e,Hi=t}function $i(e,t,n){Gi[Qi++]=Xi,Gi[Qi++]=Ji,Gi[Qi++]=Yi,Yi=e;var r=Xi;e=Ji;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Xi=1<<32-ot(t)+i|n<<i|r,Ji=a+e}else Xi=1<<a|n<<i|r,Ji=e}function ea(e){null!==e.return&&(Zi(e,1),$i(e,1,0))}function ta(e){for(;e===Wi;)Wi=qi[--zi],qi[zi]=null,Hi=qi[--zi],qi[zi]=null;for(;e===Yi;)Yi=Gi[--Qi],Gi[Qi]=null,Ji=Gi[--Qi],Gi[Qi]=null,Xi=Gi[--Qi],Gi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Dc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Xi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Dc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function ha(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw fa(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function fa(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=w.ReactCurrentBatchConfig;function ya(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ga=Ii(null),ma=null,ka=null,wa=null;function ba(){wa=ka=ma=null}function _a(e){var t=ga.current;Ei(ga),e._currentValue=t}function xa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ia(e,t){ma=e,wa=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wu=!0),e.firstContext=null)}function Ea(e){var t=e._currentValue;if(wa!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ma)throw Error(a(308));ka=e,ma.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Sa=null;function Ta(e){null===Sa?Sa=[e]:Sa.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Aa(e,r)}function Aa(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Na=!1;function Da(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ra(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cs)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Aa(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Aa(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,mt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Na=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var h=i.baseState;for(o=0,l=c=s=null,u=a;;){var f=u.lane,d=u.eventTime;if((r&f)===f){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(f=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,f);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(f="function"===typeof(p=v.payload)?p.call(d,h,f):p)||void 0===f)break e;h=F({},h,f);break e;case 2:Na=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(f=i.effects)?i.effects=[u]:f.push(u))}else d={eventTime:d,lane:f,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=h):l=l.next=d,o|=f;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(f=u).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===l&&(s=h),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Ms|=o,e.lanes=o,e.memoizedState=h}}function ja(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Ua=(new r.Component).refs;function Va(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Ka={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Ra(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Ra(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Ra(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Oa(e,i,r))&&(nc(t,e,r,n),La(t,e,r))}};function Ba(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function qa(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Ea(a):(i=Pi(t)?Ni:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Di(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ka,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function za(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ka.enqueueReplaceState(t,t.state,null)}function Wa(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Ua,Da(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ea(a):(a=Pi(t)?Ni:Ci.current,i.context=Di(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Va(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Ka.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ha(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Ua&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ga(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Rc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===x?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===P&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ha(e,t,n),r.return=e,r):((r=Oc(n.type,n.key,n.props,null,e.mode,r)).ref=Ha(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=jc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,a){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=Oc(t.type,t.key,t.props,null,e.mode,n)).ref=Ha(e,null,t),n.return=e,n;case _:return(t=jc(t,e.mode,n)).return=e,t;case P:return f(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;Ga(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null;case P:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);Ga(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case b:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);Ga(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,h=a,v=a=0,y=null;null!==h&&v<u.length;v++){h.index>v?(y=h,h=null):y=h.sibling;var g=d(i,h,u[v],s);if(null===g){null===h&&(h=y);break}e&&h&&null===g.alternate&&t(i,h),a=o(g,a,v),null===l?c=g:l.sibling=g,l=g,h=y}if(v===u.length)return n(i,h),ia&&Zi(i,v),c;if(null===h){for(;v<u.length;v++)null!==(h=f(i,u[v],s))&&(a=o(h,a,v),null===l?c=h:l.sibling=h,l=h);return ia&&Zi(i,v),c}for(h=r(i,h);v<u.length;v++)null!==(y=p(h,i,v,u[v],s))&&(e&&null!==y.alternate&&h.delete(null===y.key?v:y.key),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y);return e&&h.forEach((function(e){return t(i,e)})),ia&&Zi(i,v),c}function y(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var h=l=null,v=u,y=u=0,g=null,m=s.next();null!==v&&!m.done;y++,m=s.next()){v.index>y?(g=v,v=null):g=v.sibling;var k=d(i,v,m.value,c);if(null===k){null===v&&(v=g);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,y),null===h?l=k:h.sibling=k,h=k,v=g}if(m.done)return n(i,v),ia&&Zi(i,y),l;if(null===v){for(;!m.done;y++,m=s.next())null!==(m=f(i,m.value,c))&&(u=o(m,u,y),null===h?l=m:h.sibling=m,h=m);return ia&&Zi(i,y),l}for(v=r(i,v);!m.done;y++,m=s.next())null!==(m=p(v,i,y,m.value,c))&&(e&&null!==m.alternate&&v.delete(null===m.key?y:m.key),u=o(m,u,y),null===h?l=m:h.sibling=m,h=m);return e&&v.forEach((function(e){return t(i,e)})),ia&&Zi(i,y),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case b:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===x){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ha(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===x?((a=Lc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Oc(o.type,o.key,o.props,null,r.mode,s)).ref=Ha(r,a,o),s.return=r,r=s)}return u(r);case _:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=jc(o,r.mode,s)).return=r,r=a}return u(r);case P:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return y(r,a,o,s);Ga(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Fc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var Xa=Ya(!0),Ja=Ya(!1),Za={},$a=Ii(Za),eo=Ii(Za),to=Ii(Za);function no(e){if(e===Za)throw Error(a(174));return e}function ro(e,t){switch(Si(to,t),Si(eo,e),Si($a,Za),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei($a),Si($a,t)}function io(){Ei($a),Ei(eo),Ei(to)}function ao(e){no(to.current);var t=no($a.current),n=se(t,e.type);t!==n&&(Si(eo,e),Si($a,n))}function oo(e){eo.current===e&&(Ei($a),Ei(eo))}var uo=Ii(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var ho=w.ReactCurrentDispatcher,fo=w.ReactCurrentBatchConfig,po=0,vo=null,yo=null,go=null,mo=!1,ko=!1,wo=0,bo=0;function _o(){throw Error(a(321))}function xo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function Io(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,wo=0,25<=o)throw Error(a(301));o+=1,go=yo=null,t.updateQueue=null,ho.current=cu,e=n(r,i)}while(ko)}if(ho.current=ou,t=null!==yo&&null!==yo.next,po=0,go=yo=vo=null,mo=!1,t)throw Error(a(300));return e}function Eo(){var e=0!==wo;return wo=0,e}function So(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===go?vo.memoizedState=go=e:go=go.next=e,go}function To(){if(null===yo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=yo.next;var t=null===go?vo.memoizedState:go.next;if(null!==t)go=t,yo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(yo=e).memoizedState,baseState:yo.baseState,baseQueue:yo.baseQueue,queue:yo.queue,next:null},null===go?vo.memoizedState=go=e:go=go.next=e}return go}function Co(e,t){return"function"===typeof t?t(e):t}function Ao(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=yo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var h=l.lane;if((po&h)===h)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:h,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=f,u=r):c=c.next=f,vo.lanes|=h,Ms|=h}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(wu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Ms|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(wu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Do(){}function Po(e,t){var n=vo,r=To(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,wu=!0),r=r.queue,zo(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==go&&1&go.memoizedState.tag){if(n.flags|=2048,Uo(9,Oo.bind(null,n,r,i,t),void 0,null),null===As)throw Error(a(349));0!==(30&po)||Ro(n,t,i)}return i}function Ro(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Fo(e){var t=Aa(e,1);null!==t&&nc(t,e,1,-1)}function jo(e){var t=So();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,vo,e),[t.memoizedState,e]}function Uo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return To().memoizedState}function Ko(e,t,n,r){var i=So();vo.flags|=e,i.memoizedState=Uo(1|t,n,void 0,void 0===r?null:r)}function Bo(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==yo){var o=yo.memoizedState;if(a=o.destroy,null!==r&&xo(r,o.deps))return void(i.memoizedState=Uo(t,n,a,r))}vo.flags|=e,i.memoizedState=Uo(1|t,n,a,r)}function qo(e,t){return Ko(8390656,8,e,t)}function zo(e,t){return Bo(2048,8,e,t)}function Wo(e,t){return Bo(4,2,e,t)}function Ho(e,t){return Bo(4,4,e,t)}function Go(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4,4,Go.bind(null,t,e),n)}function Yo(){}function Xo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Jo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Zo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,wu=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),vo.lanes|=n,Ms|=n,e.baseState=!0),t)}function $o(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{kt=n,fo.transition=r}}function eu(){return To().memoizedState}function tu(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ca(e,t,n,r))){nc(n,e,r,ec()),au(n,t,r)}}function nu(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Ta(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(nc(n,e,r,i=ec()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function iu(e,t){ko=mo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,mt(e,n)}}var ou={readContext:Ea,useCallback:_o,useContext:_o,useEffect:_o,useImperativeHandle:_o,useInsertionEffect:_o,useLayoutEffect:_o,useMemo:_o,useReducer:_o,useRef:_o,useState:_o,useDebugValue:_o,useDeferredValue:_o,useTransition:_o,useMutableSource:_o,useSyncExternalStore:_o,useId:_o,unstable_isNewReconciler:!1},uu={readContext:Ea,useCallback:function(e,t){return So().memoizedState=[e,void 0===t?null:t],e},useContext:Ea,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ko(4194308,4,Go.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ko(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ko(4,2,e,t)},useMemo:function(e,t){var n=So();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=So();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},So().memoizedState=e},useState:jo,useDebugValue:Yo,useDeferredValue:function(e){return So().memoizedState=e},useTransition:function(){var e=jo(!1),t=e[0];return e=$o.bind(null,e[1]),So().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=So();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===As)throw Error(a(349));0!==(30&po)||Ro(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Uo(9,Oo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=So(),t=As.identifierPrefix;if(ia){var n=Ji;t=":"+t+"R"+(n=(Xi&~(1<<32-ot(Xi)-1)).toString(32)+n),0<(n=wo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=bo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Ea,useCallback:Xo,useContext:Ea,useEffect:zo,useImperativeHandle:Qo,useInsertionEffect:Wo,useLayoutEffect:Ho,useMemo:Jo,useReducer:Ao,useRef:Vo,useState:function(){return Ao(Co)},useDebugValue:Yo,useDeferredValue:function(e){return Zo(To(),yo.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],To().memoizedState]},useMutableSource:Do,useSyncExternalStore:Po,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Ea,useCallback:Xo,useContext:Ea,useEffect:zo,useImperativeHandle:Qo,useInsertionEffect:Wo,useLayoutEffect:Ho,useMemo:Jo,useReducer:No,useRef:Vo,useState:function(){return No(Co)},useDebugValue:Yo,useDeferredValue:function(e){var t=To();return null===yo?t.memoizedState=e:Zo(t,yo.memoizedState,e)},useTransition:function(){return[No(Co)[0],To().memoizedState]},useMutableSource:Do,useSyncExternalStore:Po,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=K(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function hu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function pu(e,t,n){(n=Ra(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){zs||(zs=!0,Ws=r),fu(0,t)},n}function vu(e,t,n){(n=Ra(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){fu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){fu(0,t),"function"!==typeof r&&(null===Hs?Hs=new Set([this]):Hs.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function yu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ec.bind(null,e,t,n),t.then(e,e))}function gu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function mu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ra(-1,1)).tag=2,Oa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=w.ReactCurrentOwner,wu=!1;function bu(e,t,n,r){t.child=null===e?Ja(t,null,n,r):Xa(t,e.child,n,r)}function _u(e,t,n,r,i){n=n.render;var a=t.ref;return Ia(t,i),r=Io(e,t,n,r,a,i),n=Eo(),null===e||wu?(ia&&n&&ea(t),t.flags|=1,bu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,zu(e,t,i))}function xu(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Pc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Oc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Iu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return zu(e,t,i)}return t.flags|=1,(e=Rc(a,r)).ref=t.ref,e.return=t,t.child=e}function Iu(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(wu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,zu(e,t,i);0!==(131072&e.flags)&&(wu=!0)}}return Tu(e,t,n,r,i)}function Eu(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Si(Rs,Ps),Ps|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Si(Rs,Ps),Ps|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Si(Rs,Ps),Ps|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Si(Rs,Ps),Ps|=r;return bu(e,t,i,n),t.child}function Su(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Tu(e,t,n,r,i){var a=Pi(n)?Ni:Ci.current;return a=Di(t,a),Ia(t,i),n=Io(e,t,n,r,a,i),r=Eo(),null===e||wu?(ia&&r&&ea(t),t.flags|=1,bu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,zu(e,t,i))}function Cu(e,t,n,r,i){if(Pi(n)){var a=!0;Mi(t)}else a=!1;if(Ia(t,i),null===t.stateNode)qu(e,t),qa(t,n,r),Wa(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ea(c):c=Di(t,c=Pi(n)?Ni:Ci.current);var l=n.getDerivedStateFromProps,h="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&za(t,o,r,c),Na=!1;var f=t.memoizedState;o.state=f,Fa(t,r,o,i),s=t.memoizedState,u!==r||f!==s||Ai.current||Na?("function"===typeof l&&(Va(t,n,l,r),s=t.memoizedState),(u=Na||Ba(t,n,u,r,f,s,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Pa(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ya(t.type,u),o.props=c,h=t.pendingProps,f=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Ea(s):s=Di(t,s=Pi(n)?Ni:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==h||f!==s)&&za(t,o,r,s),Na=!1,f=t.memoizedState,o.state=f,Fa(t,r,o,i);var p=t.memoizedState;u!==h||f!==p||Ai.current||Na?("function"===typeof d&&(Va(t,n,d,r),p=t.memoizedState),(c=Na||Ba(t,n,c,r,f,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Au(e,t,n,r,a,i)}function Au(e,t,n,r,i,a){Su(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),zu(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Xa(t,e.child,null,a),t.child=Xa(t,null,u,a)):bu(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Nu(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),ro(e,t.containerInfo)}function Du(e,t,n,r,i){return da(),pa(i),t.flags|=256,bu(e,t,n,r),t.child}var Pu,Ru,Ou,Lu={dehydrated:null,treeContext:null,retryLane:0};function Mu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fu(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Si(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Mc(s,i,0,null),e=Lc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Mu(n),t.memoizedState=Lu,e):ju(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,Uu(e,t,u,r=hu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Mc({mode:"visible",children:r.children},i,0,null),(o=Lc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Xa(t,e.child,null,u),t.child.memoizedState=Mu(u),t.memoizedState=Lu,o);if(0===(1&t.mode))return Uu(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,Uu(e,t,u,r=hu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),wu||s){if(null!==(r=As)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Aa(e,i),nc(r,e,i,-1))}return vc(),Uu(e,t,u,r=hu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Gi[Qi++]=Xi,Gi[Qi++]=Ji,Gi[Qi++]=Yi,Xi=e.id,Ji=e.overflow,Yi=t),(t=ju(t,r.children)).flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Rc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Rc(r,u):(u=Lc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Mu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Lu,i}return e=(u=e.child).sibling,i=Rc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function ju(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Uu(e,t,n,r){return null!==r&&pa(r),Xa(t,e.child,null,n),(e=ju(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Vu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xa(e.return,t,n)}function Ku(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Bu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(bu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Vu(e,n,t);else if(19===e.tag)Vu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Si(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ku(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ku(t,!0,n,null,a);break;case"together":Ku(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qu(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function zu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ms|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Rc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Rc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Wu(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Hu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Gu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hu(t),null;case 1:case 17:return Pi(t.type)&&Ri(),Hu(t),null;case 3:return r=t.stateNode,io(),Ei(Ai),Ei(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ha(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(oc(aa),aa=null))),Hu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ru(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Hu(t),null}if(e=no($a.current),ha(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[fi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":X(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var s in me(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Zr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Zr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Ur("scroll",r)}switch(n){case"input":H(r),$(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=$r)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[fi]=t,e[di]=r,Pu(e,t),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":X(e,r),i=Y(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in me(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ye(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&he(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&fe(e,l):"number"===typeof l&&fe(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Ur("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":H(e),$(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+z(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Hu(t),null;case 6:if(e&&null!=t.stateNode)Ou(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no($a.current),ha(t)){if(r=t.stateNode,n=t.memoizedProps,r[fi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Zr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fi]=t,t.stateNode=r}return Hu(t),null;case 13:if(Ei(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))fa(),da(),t.flags|=98560,o=!1;else if(o=ha(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[fi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Hu(t),o=!1}else null!==aa&&(oc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Os&&(Os=3):vc())),null!==t.updateQueue&&(t.flags|=4),Hu(t),null);case 4:return io(),null===e&&Br(t.stateNode.containerInfo),Hu(t),null;case 10:return _a(t.type._context),Hu(t),null;case 19:if(Ei(uo),null===(o=t.memoizedState))return Hu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Wu(o,!1);else{if(0!==Os||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Wu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Si(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>Bs&&(t.flags|=128,r=!0,Wu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Wu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Hu(t),null}else 2*Je()-o.renderingStartTime>Bs&&1073741824!==n&&(t.flags|=128,r=!0,Wu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=uo.current,Si(uo,r?1&n|2:1&n),t):(Hu(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ps)&&(Hu(t),6&t.subtreeFlags&&(t.flags|=8192)):Hu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Qu(e,t){switch(ta(t),t.tag){case 1:return Pi(t.type)&&Ri(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ei(Ai),Ei(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ei(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(uo),null;case 4:return io(),null;case 10:return _a(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Pu=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ru=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no($a.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=$r)}for(l in me(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Ur("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Ou=function(e,t,n,r){n!==r&&(t.flags|=4)};var Yu=!1,Xu=!1,Ju="function"===typeof WeakSet?WeakSet:Set,Zu=null;function $u(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ic(e,t,r)}else n.current=null}function es(e,t,n){try{n()}catch(r){Ic(e,t,r)}}var ts=!1;function ns(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&es(t,n,a)}i=i.next}while(i!==r)}}function rs(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function is(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function as(e){var t=e.alternate;null!==t&&(e.alternate=null,as(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fi],delete t[di],delete t[vi],delete t[yi],delete t[gi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function os(e){return 5===e.tag||3===e.tag||4===e.tag}function us(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||os(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ss(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$r));else if(4!==r&&null!==(e=e.child))for(ss(e,t,n),e=e.sibling;null!==e;)ss(e,t,n),e=e.sibling}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}var ls=null,hs=!1;function fs(e,t,n){for(n=n.child;null!==n;)ds(e,t,n),n=n.sibling}function ds(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Xu||$u(n,t);case 6:var r=ls,i=hs;ls=null,fs(e,t,n),hs=i,null!==(ls=r)&&(hs?(e=ls,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ls.removeChild(n.stateNode));break;case 18:null!==ls&&(hs?(e=ls,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),Bt(e)):si(ls,n.stateNode));break;case 4:r=ls,i=hs,ls=n.stateNode.containerInfo,hs=!0,fs(e,t,n),ls=r,hs=i;break;case 0:case 11:case 14:case 15:if(!Xu&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&es(n,t,o),i=i.next}while(i!==r)}fs(e,t,n);break;case 1:if(!Xu&&($u(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ic(n,t,u)}fs(e,t,n);break;case 21:fs(e,t,n);break;case 22:1&n.mode?(Xu=(r=Xu)||null!==n.memoizedState,fs(e,t,n),Xu=r):fs(e,t,n);break;default:fs(e,t,n)}}function ps(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ju),t.forEach((function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function vs(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:ls=s.stateNode,hs=!1;break e;case 3:case 4:ls=s.stateNode.containerInfo,hs=!0;break e}s=s.return}if(null===ls)throw Error(a(160));ds(o,u,i),ls=null,hs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Ic(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ys(t,e),t=t.sibling}function ys(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vs(t,e),gs(e),4&r){try{ns(3,e,e.return),rs(3,e)}catch(y){Ic(e,e.return,y)}try{ns(5,e,e.return)}catch(y){Ic(e,e.return,y)}}break;case 1:vs(t,e),gs(e),512&r&&null!==n&&$u(n,n.return);break;case 5:if(vs(t,e),gs(e),512&r&&null!==n&&$u(n,n.return),32&e.flags){var i=e.stateNode;try{fe(i,"")}catch(y){Ic(e,e.return,y)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&J(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var h=c[u],f=c[u+1];"style"===h?ye(i,f):"dangerouslySetInnerHTML"===h?he(i,f):"children"===h?fe(i,f):k(i,h,f,l)}switch(s){case"input":Z(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(y){Ic(e,e.return,y)}}break;case 6:if(vs(t,e),gs(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(y){Ic(e,e.return,y)}}break;case 3:if(vs(t,e),gs(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(y){Ic(e,e.return,y)}break;case 4:default:vs(t,e),gs(e);break;case 13:vs(t,e),gs(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Ks=Je())),4&r&&ps(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Xu=(l=Xu)||h,vs(t,e),Xu=l):vs(t,e),gs(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!h&&0!==(1&e.mode))for(Zu=e,h=e.child;null!==h;){for(f=Zu=h;null!==Zu;){switch(p=(d=Zu).child,d.tag){case 0:case 11:case 14:case 15:ns(4,d,d.return);break;case 1:$u(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(y){Ic(r,n,y)}}break;case 5:$u(d,d.return);break;case 22:if(null!==d.memoizedState){bs(f);continue}}null!==p?(p.return=d,Zu=p):bs(f)}h=h.sibling}e:for(h=null,f=e;;){if(5===f.tag){if(null===h){h=f;try{i=f.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=f.stateNode,u=void 0!==(c=f.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(y){Ic(e,e.return,y)}}}else if(6===f.tag){if(null===h)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(y){Ic(e,e.return,y)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:vs(t,e),gs(e),4&r&&ps(e);case 21:}}function gs(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(os(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(fe(i,""),r.flags&=-33),cs(e,us(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ss(e,us(e),o);break;default:throw Error(a(161))}}catch(u){Ic(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ms(e,t,n){Zu=e,ks(e,t,n)}function ks(e,t,n){for(var r=0!==(1&e.mode);null!==Zu;){var i=Zu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Yu;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Xu;u=Yu;var c=Xu;if(Yu=o,(Xu=s)&&!c)for(Zu=i;null!==Zu;)s=(o=Zu).child,22===o.tag&&null!==o.memoizedState?_s(i):null!==s?(s.return=o,Zu=s):_s(i);for(;null!==a;)Zu=a,ks(a,t,n),a=a.sibling;Zu=i,Yu=u,Xu=c}ws(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zu=a):ws(e)}}function ws(e){for(;null!==Zu;){var t=Zu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xu||rs(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xu)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ya(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&ja(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}ja(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var h=l.memoizedState;if(null!==h){var f=h.dehydrated;null!==f&&Bt(f)}}}break;default:throw Error(a(163))}Xu||512&t.flags&&is(t)}catch(d){Ic(t,t.return,d)}}if(t===e){Zu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zu=n;break}Zu=t.return}}function bs(e){for(;null!==Zu;){var t=Zu;if(t===e){Zu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zu=n;break}Zu=t.return}}function _s(e){for(;null!==Zu;){var t=Zu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rs(4,t)}catch(s){Ic(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Ic(t,i,s)}}var a=t.return;try{is(t)}catch(s){Ic(t,a,s)}break;case 5:var o=t.return;try{is(t)}catch(s){Ic(t,o,s)}}}catch(s){Ic(t,t.return,s)}if(t===e){Zu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Zu=u;break}Zu=t.return}}var xs,Is=Math.ceil,Es=w.ReactCurrentDispatcher,Ss=w.ReactCurrentOwner,Ts=w.ReactCurrentBatchConfig,Cs=0,As=null,Ns=null,Ds=0,Ps=0,Rs=Ii(0),Os=0,Ls=null,Ms=0,Fs=0,js=0,Us=null,Vs=null,Ks=0,Bs=1/0,qs=null,zs=!1,Ws=null,Hs=null,Gs=!1,Qs=null,Ys=0,Xs=0,Js=null,Zs=-1,$s=0;function ec(){return 0!==(6&Cs)?Je():-1!==Zs?Zs:Zs=Je()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Cs)&&0!==Ds?Ds&-Ds:null!==va.transition?(0===$s&&($s=vt()),$s):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function nc(e,t,n,r){if(50<Xs)throw Xs=0,Js=null,Error(a(185));gt(e,n,r),0!==(2&Cs)&&e===As||(e===As&&(0===(2&Cs)&&(Fs|=n),4===Os&&uc(e,Ds)),rc(e,r),1===n&&0===Cs&&0===(1&t.mode)&&(Bs=Je()+500,Ui&&Bi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ft(e,e===As?Ds:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Ui=!0,Ki(e)}(sc.bind(null,e)):Ki(sc.bind(null,e)),oi((function(){0===(6&Cs)&&Bi()})),n=null;else{switch(wt(r)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ac(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Zs=-1,$s=0,0!==(6&Cs))throw Error(a(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=ft(e,e===As?Ds:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=Cs;Cs|=2;var o=pc();for(As===e&&Ds===t||(qs=null,Bs=Je()+500,fc(e,t));;)try{mc();break}catch(s){dc(e,s)}ba(),Es.current=o,Cs=i,null!==Ns?t=0:(As=null,Ds=0,t=Os)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ac(e,i))),1===t)throw n=Ls,fc(e,0),uc(e,r),rc(e,Je()),n;if(6===t)uc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(o=pt(e))&&(r=o,t=ac(e,o))),1===t))throw n=Ls,fc(e,0),uc(e,r),rc(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:bc(e,Vs,qs);break;case 3:if(uc(e,r),(130023424&r)===r&&10<(t=Ks+500-Je())){if(0!==ft(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(bc.bind(null,e,Vs,qs),t);break}bc(e,Vs,qs);break;case 4:if(uc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Is(r/1960))-r)){e.timeoutHandle=ri(bc.bind(null,e,Vs,qs),r);break}bc(e,Vs,qs);break;default:throw Error(a(329))}}}return rc(e,Je()),e.callbackNode===n?ic.bind(null,e):null}function ac(e,t){var n=Us;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=Vs,Vs=n,null!==t&&oc(t)),e}function oc(e){null===Vs?Vs=e:Vs.push.apply(Vs,e)}function uc(e,t){for(t&=~js,t&=~Fs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function sc(e){if(0!==(6&Cs))throw Error(a(327));_c();var t=ft(e,0);if(0===(1&t))return rc(e,Je()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Ls,fc(e,0),uc(e,t),rc(e,Je()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,bc(e,Vs,qs),rc(e,Je()),null}function cc(e,t){var n=Cs;Cs|=1;try{return e(t)}finally{0===(Cs=n)&&(Bs=Je()+500,Ui&&Bi())}}function lc(e){null!==Qs&&0===Qs.tag&&0===(6&Cs)&&_c();var t=Cs;Cs|=1;var n=Ts.transition,r=kt;try{if(Ts.transition=null,kt=1,e)return e()}finally{kt=r,Ts.transition=n,0===(6&(Cs=t))&&Bi()}}function hc(){Ps=Rs.current,Ei(Rs)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ns)for(n=Ns.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ri();break;case 3:io(),Ei(Ai),Ei(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ei(uo);break;case 10:_a(r.type._context);break;case 22:case 23:hc()}n=n.return}if(As=e,Ns=e=Rc(e.current,null),Ds=Ps=t,Os=0,Ls=null,js=Fs=Ms=0,Vs=Us=null,null!==Sa){for(t=0;t<Sa.length;t++)if(null!==(r=(n=Sa[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Sa=null}return e}function dc(e,t){for(;;){var n=Ns;try{if(ba(),ho.current=ou,mo){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}mo=!1}if(po=0,go=yo=vo=null,ko=!1,wo=0,Ss.current=null,null===n||null===n.return){Os=1,Ls=t,Ns=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Ds,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,h=s,f=h.tag;if(0===(1&h.mode)&&(0===f||11===f||15===f)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=gu(u);if(null!==p){p.flags&=-257,mu(p,u,s,0,t),1&p.mode&&yu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var y=new Set;y.add(c),t.updateQueue=y}else v.add(c);break e}if(0===(1&t)){yu(o,l,t),vc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var g=gu(u);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),mu(g,u,s,0,t),pa(lu(c,s));break e}}o=c=lu(c,s),4!==Os&&(Os=2),null===Us?Us=[o]:Us.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,pu(0,c,t));break e;case 1:s=c;var m=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof m.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Hs||!Hs.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vu(o,s,t));break e}}o=o.return}while(null!==o)}wc(n)}catch(w){t=w,Ns===n&&null!==n&&(Ns=n=n.return);continue}break}}function pc(){var e=Es.current;return Es.current=ou,null===e?ou:e}function vc(){0!==Os&&3!==Os&&2!==Os||(Os=4),null===As||0===(268435455&Ms)&&0===(268435455&Fs)||uc(As,Ds)}function yc(e,t){var n=Cs;Cs|=2;var r=pc();for(As===e&&Ds===t||(qs=null,fc(e,t));;)try{gc();break}catch(i){dc(e,i)}if(ba(),Cs=n,Es.current=r,null!==Ns)throw Error(a(261));return As=null,Ds=0,Os}function gc(){for(;null!==Ns;)kc(Ns)}function mc(){for(;null!==Ns&&!Ye();)kc(Ns)}function kc(e){var t=xs(e.alternate,e,Ps);e.memoizedProps=e.pendingProps,null===t?wc(e):Ns=t,Ss.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Gu(n,t,Ps)))return void(Ns=n)}else{if(null!==(n=Qu(n,t)))return n.flags&=32767,void(Ns=n);if(null===e)return Os=6,void(Ns=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ns=t);Ns=t=e}while(null!==t);0===Os&&(Os=5)}function bc(e,t,n){var r=kt,i=Ts.transition;try{Ts.transition=null,kt=1,function(e,t,n,r){do{_c()}while(null!==Qs);if(0!==(6&Cs))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===As&&(Ns=As=null,Ds=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gs||(Gs=!0,Ac(tt,(function(){return _c(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Ts.transition,Ts.transition=null;var u=kt;kt=1;var s=Cs;Cs|=4,Ss.current=null,function(e,t){if(ei=zt,dr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(b){n=null;break e}var u=0,s=-1,c=-1,l=0,h=0,f=e,d=null;t:for(;;){for(var p;f!==n||0!==i&&3!==f.nodeType||(s=u+i),f!==o||0!==r&&3!==f.nodeType||(c=u+r),3===f.nodeType&&(u+=f.nodeValue.length),null!==(p=f.firstChild);)d=f,f=p;for(;;){if(f===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++h===r&&(c=u),null!==(p=f.nextSibling))break;d=(f=d).parentNode}f=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},zt=!1,Zu=t;null!==Zu;)if(e=(t=Zu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zu=e;else for(;null!==Zu;){t=Zu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var y=v.memoizedProps,g=v.memoizedState,m=t.stateNode,k=m.getSnapshotBeforeUpdate(t.elementType===t.type?y:ya(t.type,y),g);m.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(a(163))}}catch(b){Ic(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,Zu=e;break}Zu=t.return}v=ts,ts=!1}(e,n),ys(n,e),pr(ti),zt=!!ei,ti=ei=null,e.current=n,ms(n,e,i),Xe(),Cs=s,kt=u,Ts.transition=o}else e.current=n;if(Gs&&(Gs=!1,Qs=e,Ys=i),0===(o=e.pendingLanes)&&(Hs=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((i=t[n]).value,{componentStack:i.stack,digest:i.digest});if(zs)throw zs=!1,e=Ws,Ws=null,e;0!==(1&Ys)&&0!==e.tag&&_c(),0!==(1&(o=e.pendingLanes))?e===Js?Xs++:(Xs=0,Js=e):Xs=0,Bi()}(e,t,n,r)}finally{Ts.transition=i,kt=r}return null}function _c(){if(null!==Qs){var e=wt(Ys),t=Ts.transition,n=kt;try{if(Ts.transition=null,kt=16>e?16:e,null===Qs)var r=!1;else{if(e=Qs,Qs=null,Ys=0,0!==(6&Cs))throw Error(a(331));var i=Cs;for(Cs|=4,Zu=e.current;null!==Zu;){var o=Zu,u=o.child;if(0!==(16&Zu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Zu=l;null!==Zu;){var h=Zu;switch(h.tag){case 0:case 11:case 15:ns(8,h,o)}var f=h.child;if(null!==f)f.return=h,Zu=f;else for(;null!==Zu;){var d=(h=Zu).sibling,p=h.return;if(as(h),h===l){Zu=null;break}if(null!==d){d.return=p,Zu=d;break}Zu=p}}}var v=o.alternate;if(null!==v){var y=v.child;if(null!==y){v.child=null;do{var g=y.sibling;y.sibling=null,y=g}while(null!==y)}}Zu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Zu=u;else e:for(;null!==Zu;){if(0!==(2048&(o=Zu).flags))switch(o.tag){case 0:case 11:case 15:ns(9,o,o.return)}var m=o.sibling;if(null!==m){m.return=o.return,Zu=m;break e}Zu=o.return}}var k=e.current;for(Zu=k;null!==Zu;){var w=(u=Zu).child;if(0!==(2064&u.subtreeFlags)&&null!==w)w.return=u,Zu=w;else e:for(u=k;null!==Zu;){if(0!==(2048&(s=Zu).flags))try{switch(s.tag){case 0:case 11:case 15:rs(9,s)}}catch(_){Ic(s,s.return,_)}if(s===u){Zu=null;break e}var b=s.sibling;if(null!==b){b.return=s.return,Zu=b;break e}Zu=s.return}}if(Cs=i,Bi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{kt=n,Ts.transition=t}}return!1}function xc(e,t,n){e=Oa(e,t=pu(0,t=lu(n,t),1),1),t=ec(),null!==e&&(gt(e,1,t),rc(e,t))}function Ic(e,t,n){if(3===e.tag)xc(e,e,n);else for(;null!==t;){if(3===t.tag){xc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hs||!Hs.has(r))){t=Oa(t,e=vu(t,e=lu(n,e),1),1),e=ec(),null!==t&&(gt(t,1,e),rc(t,e));break}}t=t.return}}function Ec(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,As===e&&(Ds&n)===n&&(4===Os||3===Os&&(130023424&Ds)===Ds&&500>Je()-Ks?fc(e,0):js|=n),rc(e,t)}function Sc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=ec();null!==(e=Aa(e,t))&&(gt(e,t,n),rc(e,n))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Sc(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Sc(e,n)}function Ac(e,t){return Ge(e,t)}function Nc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dc(e,t,n,r){return new Nc(e,t,n,r)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rc(e,t){var n=e.alternate;return null===n?((n=Dc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Oc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Pc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case x:return Lc(n.children,i,o,t);case I:u=8,i|=8;break;case E:return(e=Dc(12,n,t,2|i)).elementType=E,e.lanes=o,e;case A:return(e=Dc(13,n,t,i)).elementType=A,e.lanes=o,e;case N:return(e=Dc(19,n,t,i)).elementType=N,e.lanes=o,e;case R:return Mc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:u=10;break e;case T:u=9;break e;case C:u=11;break e;case D:u=14;break e;case P:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Dc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lc(e,t,n,r){return(e=Dc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Dc(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Dc(6,e,null,t)).lanes=n,e}function jc(e,t,n){return(t=Dc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,r,i,a,o,u,s){return e=new Uc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Dc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Da(a),e}function Kc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Bc(e){if(!e)return Ti;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Li(e,n,t)}return t}function qc(e,t,n,r,i,a,o,u,s){return(e=Vc(n,r,!0,e,0,a,0,u,s)).context=Bc(null),n=e.current,(a=Ra(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Oa(n,a,i),e.current.lanes=i,gt(e,i,r),rc(e,r),e}function zc(e,t,n,r){var i=t.current,a=ec(),o=tc(i);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ra(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Oa(i,t,o))&&(nc(e,i,o,a),La(e,i,o)),o}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}xs=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)wu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wu=!1,function(e,t,n){switch(t.tag){case 3:Nu(t),da();break;case 5:ao(t);break;case 1:Pi(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Si(ga,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Si(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fu(e,t,n):(Si(uo,1&uo.current),null!==(e=zu(e,t,n))?e.sibling:null);Si(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Bu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Si(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Eu(e,t,n)}return zu(e,t,n)}(e,t,n);wu=0!==(131072&e.flags)}else wu=!1,ia&&0!==(1048576&t.flags)&&$i(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qu(e,t),e=t.pendingProps;var i=Di(t,Ci.current);Ia(t,n),i=Io(null,t,r,e,i,n);var o=Eo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Da(t),i.updater=Ka,t.stateNode=i,i._reactInternals=t,Wa(t,r,e,n),t=Au(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),bu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qu(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Pc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===D)return 14}return 2}(r),e=ya(r,e),i){case 0:t=Tu(null,t,r,e,n);break e;case 1:t=Cu(null,t,r,e,n);break e;case 11:t=_u(null,t,r,e,n);break e;case 14:t=xu(null,t,r,ya(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Tu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 3:e:{if(Nu(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Pa(e,t),Fa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Du(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Du(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Ja(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=zu(e,t,n);break e}bu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Su(e,t),bu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Fu(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Xa(t,null,r,n):bu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_u(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 7:return bu(e,t,t.pendingProps,n),t.child;case 8:case 12:return bu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Si(ga,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ai.current){t=zu(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Ra(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var h=(l=l.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),xa(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),xa(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}bu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ia(t,n),r=r(i=Ea(i)),t.flags|=1,bu(e,t,r,n),t.child;case 14:return i=ya(r=t.type,t.pendingProps),xu(e,t,r,i=ya(r.type,i),n);case 15:return Iu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ya(r,i),qu(e,t),t.tag=1,Pi(r)?(e=!0,Mi(t)):e=!1,Ia(t,n),qa(t,r,i),Wa(t,r,i,n),Au(null,t,r,!0,e,n);case 19:return Bu(e,t,n);case 22:return Eu(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $c(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Wc(o);u.call(e)}}zc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Wc(o);a.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",$c);return e._reactRootContainer=o,e[pi]=o.current,Br(8===e.nodeType?e.parentNode:e),lc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Wc(s);u.call(e)}}var s=Vc(e,0,!1,null,0,!1,0,"",$c);return e._reactRootContainer=s,e[pi]=s.current,Br(8===e.nodeType?e.parentNode:e),lc((function(){zc(t,s,n,r)})),s}(n,t,e,i,r);return Wc(o)}Xc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));zc(e,t,null,null)},Xc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;lc((function(){zc(null,e,null,null)})),t[pi]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=It();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Ft(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(mt(t,1|n),rc(t,Je()),0===(6&Cs)&&(Bs=Je()+500,Bi()))}break;case 13:lc((function(){var t=Aa(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Gc(e,1)}},_t=function(e){if(13===e.tag){var t=Aa(e,134217728);if(null!==t)nc(t,e,134217728,ec());Gc(e,134217728)}},xt=function(e){if(13===e.tag){var t=tc(e),n=Aa(e,t);if(null!==n)nc(n,e,t,ec());Gc(e,t)}},It=function(){return kt},Et=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},_e=function(e,t,n){switch(t){case"input":if(Z(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=bi(r);if(!i)throw Error(a(90));G(r),Z(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=cc,Ae=lc;var tl={usingClientEntryPoint:!1,Events:[ki,wi,bi,Se,Te,cc]},nl={findFiberByHostInstance:mi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(a(200));return Kc(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return lc(e)},t.hydrate=function(e,t,n){if(!Zc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Xc(t)},t.render=function(e,t,n){if(!Zc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Zc(e))throw Error(a(40));return!!e._reactRootContainer&&(lc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Zc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.jsx=c,t.jsxs=c},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function g(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}function m(){}function k(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},m.prototype=g.prototype;var w=k.prototype=new m;w.constructor=k,v(w,g.prototype),w.isPureReactComponent=!0;var b=Array.isArray,_=Object.prototype.hasOwnProperty,x={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,i)&&!I.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:x.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,b(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),A(o,t,i,"",(function(e){return e}))):null!=o&&(S(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",b(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=A(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=A(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function N(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},R={transition:null},O={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:R,ReactCurrentOwner:x};t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)_.call(t,c)&&!I.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],h=1,f=null,d=3,p=!1,v=!1,y=!1,g="function"===typeof setTimeout?setTimeout:null,m="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function b(e){if(y=!1,w(e),!v)if(null!==r(c))v=!0,R(_);else{var t=r(l);null!==t&&O(b,t.startTime-e)}}function _(e,n){v=!1,y&&(y=!1,m(S),S=-1),p=!0;var a=d;try{for(w(n),f=r(c);null!==f&&(!(f.expirationTime>n)||e&&!A());){var o=f.callback;if("function"===typeof o){f.callback=null,d=f.priorityLevel;var u=o(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?f.callback=u:f===r(c)&&i(c),w(n)}else i(c);f=r(c)}if(null!==f)var s=!0;else{var h=r(l);null!==h&&O(b,h.startTime-n),s=!1}return s}finally{f=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,I=!1,E=null,S=-1,T=5,C=-1;function A(){return!(t.unstable_now()-C<T)}function N(){if(null!==E){var e=t.unstable_now();C=e;var n=!0;try{n=E(!0,e)}finally{n?x():(I=!1,E=null)}}else I=!1}if("function"===typeof k)x=function(){k(N)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,P=D.port2;D.port1.onmessage=N,x=function(){P.postMessage(null)}}else x=function(){g(N,0)};function R(e){E=e,I||(I=!0,x())}function O(e,n){S=g((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,R(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(y?(m(S),S=-1):y=!0,O(b,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,R(_))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var u=2&i&&r;"object"==typeof u&&!~e.indexOf(u);u=t(u))Object.getOwnPropertyNames(u).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".c3d17fa1.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="recipe-algo:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var u,s;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var h=c[l];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+a){u=h;break}}u||(s=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,n.nc&&u.setAttribute("nonce",n.nc),u.setAttribute("data-webpack",t+a),u.src=r),e[r]=[i];var f=function(t,n){u.onerror=u.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],u.parentNode&&u.parentNode.removeChild(u),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(f.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=f.bind(null,u.onerror),u.onload=f.bind(null,u.onload),s&&document.head.appendChild(u)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),u=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;u.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",u.name="ChunkLoadError",u.type=a,u.request=o,i[1](u)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],u=r[1],s=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in u)n.o(u,i)&&(n.m[i]=u[i]);if(s)s(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkrecipe_algo=self.webpackChunkrecipe_algo||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return it},SDK_VERSION:function(){return An},_DEFAULT_ENTRY_NAME:function(){return yn},_addComponent:function(){return wn},_addOrOverwriteComponent:function(){return bn},_apps:function(){return mn},_clearComponents:function(){return En},_components:function(){return kn},_getProvider:function(){return xn},_registerComponent:function(){return _n},_removeServiceInstance:function(){return In},deleteApp:function(){return Rn},getApp:function(){return Dn},getApps:function(){return Pn},initializeApp:function(){return Nn},onLog:function(){return Mn},registerVersion:function(){return Ln},setLogLevel:function(){return Fn}});var t,r=n(791),i=n.t(r,2),a=n(250);function o(e){if(Array.isArray(e))return e}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){if(e){if("string"===typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){return o(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||s(e,t)||c()}function h(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function f(e){return function(e){if(Array.isArray(e))return u(e)}(e)||h(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function k(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t){if(t&&("object"===w(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function x(e){var t=k();return function(){var n,r=m(e);if(t){var i=m(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _(this,n)}}function I(e,t,n){return I=k()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&y(i,n.prototype),i},I.apply(null,arguments)}function E(e){var t="function"===typeof Map?new Map:void 0;return E=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return I(e,arguments,m(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),y(n,e)},E(e)}function S(){return S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},S.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));var T,C="popstate";function A(e){return{usr:e.state,key:e.key}}function N(e,t,n,r){return void 0===n&&(n=null),S({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?P(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function D(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function P(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function R(e,n,r,i){void 0===i&&(i={});var a=i,o=a.window,u=void 0===o?document.defaultView:o,s=a.v5Compat,c=void 0!==s&&s,l=u.history,h=t.Pop,f=null;function d(){h=t.Pop,f&&f({action:h,location:p.location})}var p={get action(){return h},get location(){return e(u,l)},listen:function(e){if(f)throw new Error("A history only accepts one active listener");return u.addEventListener(C,d),f=e,function(){u.removeEventListener(C,d),f=null}},createHref:function(e){return n(u,e)},push:function(e,n){h=t.Push;var i=N(p.location,e,n);r&&r(i,e);var a=A(i),o=p.createHref(i);try{l.pushState(a,"",o)}catch(oC){u.location.assign(o)}c&&f&&f({action:h,location:i})},replace:function(e,n){h=t.Replace;var i=N(p.location,e,n);r&&r(i,e);var a=A(i),o=p.createHref(i);l.replaceState(a,"",o),c&&f&&f({action:h,location:i})},go:function(e){return l.go(e)}};return p}function O(e,t,n){void 0===n&&(n="/");var r=K(("string"===typeof t?P(t):t).pathname||"/",n);if(null==r)return null;var i=L(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=U(i[o],r);return a}function L(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,i){var a={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(B(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));var o=W([r,a.relativePath]),u=n.concat(a);e.children&&e.children.length>0&&(B(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),L(e.children,t,u,o)),(null!=e.path||e.index)&&t.push({path:o,score:j(o,e.index),routesMeta:u})})),t}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(T||(T={}));var M=/^:\w+$/,F=function(e){return"*"===e};function j(e,t){var n=e.split("/"),r=n.length;return n.some(F)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!F(e)})).reduce((function(e,t){return e+(M.test(t)?3:""===t?1:10)}),r)}function U(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=V({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var h=u.route;a.push({params:r,pathname:W([i,l.pathname]),pathnameBase:H(W([i,l.pathnameBase])),route:h}),"/"!==l.pathnameBase&&(i=W([i,l.pathnameBase]))}return a}function V(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);q("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=n?"\\/*$":"(?:(?=[@.~-]|%[0-9A-F]{2})|\\b|\\/|$)";return[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=l(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],s=u.replace(/(.)\/+$/,"$1"),c=o.slice(1),h=a.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";s=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(oC){return q(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+oC+")."),e}}(c[n]||"",t),e}),{});return{params:h,pathname:u,pathnameBase:s,pattern:e}}function K(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function B(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function q(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function z(e,t,n,r){void 0===r&&(r=!1);var i,a="string"===typeof e?P(e):S({},e),o=""===e||""===a.pathname,u=o?"/":a.pathname;if(r||null==u)i=n;else{var s=t.length-1;if(u.startsWith("..")){for(var c=u.split("/");".."===c[0];)c.shift(),s-=1;a.pathname=c.join("/")}i=s>=0?t[s]:"/"}var l=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?P(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:G(a),hash:Q(u)}}(a,i),h=u&&"/"!==u&&u.endsWith("/"),f=(o||"."===u)&&n.endsWith("/");return l.pathname.endsWith("/")||!h&&!f||(l.pathname+="/"),l}var W=function(e){return e.join("/").replace(/\/\/+/g,"/")},H=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},G=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},Q=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},Y=function(e){g(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n)}(E(Error));var X=v((function e(t,n,r){d(this,e),this.status=t,this.statusText=n||"",this.data=r}));function J(e){return e instanceof X}function Z(){return Z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Z.apply(this,arguments)}var $="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},ee=r.useState,te=r.useEffect,ne=r.useLayoutEffect,re=r.useDebugValue;function ie(e){var t=e.getSnapshot,n=e.value;try{var r=t();return!$(n,r)}catch(oC){return!0}}"undefined"===typeof window||"undefined"===typeof window.document||window.document.createElement,i.useSyncExternalStore;var ae=r.createContext(null);var oe=r.createContext(null);var ue=r.createContext(null);var se=r.createContext(null);var ce=r.createContext(null);var le=r.createContext(null);var he=r.createContext({outlet:null,matches:[]});var fe=r.createContext(null);function de(){return null!=r.useContext(le)}function pe(){return de()||B(!1),r.useContext(le).location}function ve(e){return e.filter((function(t,n){return 0===n||!t.route.index&&t.pathnameBase!==e[n-1].pathnameBase}))}function ye(){de()||B(!1);var e=r.useContext(ce),t=e.basename,n=e.navigator,i=r.useContext(he).matches,a=pe().pathname,o=JSON.stringify(ve(i).map((function(e){return e.pathnameBase}))),u=r.useRef(!1);r.useEffect((function(){u.current=!0}));var s=r.useCallback((function(e,r){if(void 0===r&&(r={}),u.current)if("number"!==typeof e){var i=z(e,JSON.parse(o),a,"path"===r.relative);"/"!==t&&(i.pathname="/"===i.pathname?t:W([t,i.pathname])),(r.replace?n.replace:n.push)(i,r.state,r)}else n.go(e)}),[t,n,o,a]);return s}function ge(e,t){var n=(void 0===t?{}:t).relative,i=r.useContext(he).matches,a=pe().pathname,o=JSON.stringify(ve(i).map((function(e){return e.pathnameBase})));return r.useMemo((function(){return z(e,JSON.parse(o),a,"path"===n)}),[e,o,a,n])}function me(){var e=function(){var e,t=r.useContext(fe),n=xe(ke.UseRouteError),i=r.useContext(he),a=i.matches[i.matches.length-1];if(t)return t;return i||B(!1),!a.route.id&&B(!1),null==(e=n.errors)?void 0:e[a.route.id]}(),t=J(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unhandled Thrown Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:a},n):null,r.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),r.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own\xa0",r.createElement("code",{style:o},"errorElement")," props on\xa0",r.createElement("code",{style:o},"<Route>")))}var ke,we=function(e){g(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).state={location:e.location,error:e.error},r}return v(n,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?r.createElement(fe.Provider,{value:this.state.error,children:this.props.component}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location?{error:e.error,location:e.location}:{error:e.error||t.error,location:t.location}}}]),n}(r.Component);function be(e){var t=e.routeContext,n=e.match,i=e.children,a=r.useContext(ae);return a&&n.route.errorElement&&(a._deepestRenderedBoundaryId=n.route.id),r.createElement(he.Provider,{value:t},i)}function _e(e,t,n){if(void 0===t&&(t=[]),null==e){if(null==n||!n.errors)return null;e=n.matches}var i=e,a=null==n?void 0:n.errors;if(null!=a){var o=i.findIndex((function(e){return e.route.id&&(null==a?void 0:a[e.route.id])}));o>=0||B(!1),i=i.slice(0,Math.min(i.length,o+1))}return i.reduceRight((function(e,o,u){var s=o.route.id?null==a?void 0:a[o.route.id]:null,c=n?o.route.errorElement||r.createElement(me,null):null,l=function(){return r.createElement(be,{match:o,routeContext:{outlet:e,matches:t.concat(i.slice(0,u+1))}},s?c:void 0!==o.route.element?o.route.element:e)};return n&&(o.route.errorElement||0===u)?r.createElement(we,{location:n.location,component:c,error:s,children:l()}):l()}),null)}function xe(e){var t=r.useContext(ue);return t||B(!1),t}!function(e){e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"}(ke||(ke={}));var Ie;function Ee(e){B(!1)}function Se(e){var n=e.basename,i=void 0===n?"/":n,a=e.children,o=void 0===a?null:a,u=e.location,s=e.navigationType,c=void 0===s?t.Pop:s,l=e.navigator,h=e.static,f=void 0!==h&&h;de()&&B(!1);var d=i.replace(/^\/*/,"/"),p=r.useMemo((function(){return{basename:d,navigator:l,static:f}}),[d,l,f]);"string"===typeof u&&(u=P(u));var v=u,y=v.pathname,g=void 0===y?"/":y,m=v.search,k=void 0===m?"":m,w=v.hash,b=void 0===w?"":w,_=v.state,x=void 0===_?null:_,I=v.key,E=void 0===I?"default":I,S=r.useMemo((function(){var e=K(g,d);return null==e?null:{pathname:e,search:k,hash:b,state:x,key:E}}),[d,g,k,b,x,E]);return null==S?null:r.createElement(ce.Provider,{value:p},r.createElement(le.Provider,{children:o,value:{location:S,navigationType:c}}))}function Te(e){var n=e.children,i=e.location,a=r.useContext(oe);return function(e,n){de()||B(!1);var i,a=r.useContext(ue),o=r.useContext(he).matches,u=o[o.length-1],s=u?u.params:{},c=(u&&u.pathname,u?u.pathnameBase:"/"),l=(u&&u.route,pe());if(n){var h,f="string"===typeof n?P(n):n;"/"===c||(null==(h=f.pathname)?void 0:h.startsWith(c))||B(!1),i=f}else i=l;var d=i.pathname||"/",p=O(e,{pathname:"/"===c?d:d.slice(c.length)||"/"}),v=_e(p&&p.map((function(e){return Object.assign({},e,{params:Object.assign({},s,e.params),pathname:W([c,e.pathname]),pathnameBase:"/"===e.pathnameBase?c:W([c,e.pathnameBase])})})),o,a||void 0);return n?r.createElement(le.Provider,{value:{location:Z({pathname:"/",search:"",hash:"",state:null,key:"default"},i),navigationType:t.Pop}},v):v}(a&&!n?a.router.routes:Ae(n),i)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(Ie||(Ie={}));var Ce=new Promise((function(){}));r.Component;function Ae(e,t){void 0===t&&(t=[]);var n=[];return r.Children.forEach(e,(function(e,i){if(r.isValidElement(e))if(e.type!==r.Fragment){e.type!==Ee&&B(!1);var a=[].concat(f(t),[i]),o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,hasErrorBoundary:null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle};e.props.children&&(o.children=Ae(e.props.children,a)),n.push(o)}else n.push.apply(n,Ae(e.props.children,t))})),n}function Ne(){return Ne=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ne.apply(this,arguments)}function De(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var Pe=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function Re(e){var t,n=e.basename,i=e.children,a=e.window,o=r.useRef();null==o.current&&(o.current=(void 0===(t={window:a,v5Compat:!0})&&(t={}),R((function(e,t){var n=e.location;return N("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:D(t)}),null,t)));var u=o.current,s=l(r.useState({action:u.action,location:u.location}),2),c=s[0],h=s[1];return r.useLayoutEffect((function(){return u.listen(h)}),[u]),r.createElement(Se,{basename:n,children:i,location:c.location,navigationType:c.action,navigator:u})}var Oe=r.forwardRef((function(e,t){var n=e.onClick,i=e.relative,a=e.reloadDocument,o=e.replace,u=e.state,s=e.target,c=e.to,l=e.preventScrollReset,h=De(e,Pe),f=function(e,t){var n=(void 0===t?{}:t).relative;de()||B(!1);var i=r.useContext(ce),a=i.basename,o=i.navigator,u=ge(e,{relative:n}),s=u.hash,c=u.pathname,l=u.search,h=c;return"/"!==a&&(h="/"===c?a:W([a,c])),o.createHref({pathname:h,search:l,hash:s})}(c,{relative:i}),d=function(e,t){var n=void 0===t?{}:t,i=n.target,a=n.replace,o=n.state,u=n.preventScrollReset,s=n.relative,c=ye(),l=pe(),h=ge(e,{relative:s});return r.useCallback((function(t){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,i)){t.preventDefault();var n=void 0!==a?a:D(l)===D(h);c(e,{replace:n,state:o,preventScrollReset:u,relative:s})}}),[l,c,h,a,o,i,e,u,s])}(c,{replace:o,state:u,target:s,preventScrollReset:l,relative:i});return r.createElement("a",Ne({},h,{href:f,onClick:a?n:function(e){n&&n(e),e.defaultPrevented||d(e)},ref:t,target:s}))}));function Le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Me(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}var Fe=!1,je=!1,Ue="${JSCORE_VERSION}",Ve=function(e,t){if(!e)throw Ke(t)},Ke=function(e){return new Error("Firebase Database ("+Ue+") INTERNAL ASSERT FAILED: "+e)},Be=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},qe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,h=(3&a)<<4|u>>4,f=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(f=64)),r.push(n[l],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Be(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var h=u<<6&192|s;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},ze=function(e){var t=Be(e);return qe.encodeByteArray(t,!0)},We=function(e){return ze(e).replace(/\./g,"")},He=function(e){try{return qe.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Ge(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Ge(e[n],t[n]));return e}var Qe=function(){function e(){var t=this;d(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return v(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function Ye(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[We(JSON.stringify({alg:"none",type:"JWT"})),We(JSON.stringify(a)),""].join(".")}function Xe(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Je(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xe())}function Ze(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function $e(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function et(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function tt(){var e=Xe();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function nt(){return!0===Fe||!0===je}function rt(){return"object"===typeof indexedDB}var it=function(e){g(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(b(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(b(a),at.prototype.create),a}return v(n)}(E(Error)),at=function(){function e(t,n,r){d(this,e),this.service=t,this.serviceName=n,this.errors=r}return v(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?ot(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new it(n,a,t);return o}}]),e}();function ot(e,t){return e.replace(ut,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var ut=/\{\$([^}]+)}/g;function st(e){return JSON.parse(e)}function ct(e){return JSON.stringify(e)}var lt=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=st(He(a[0])||""),n=st(He(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(o){}return{header:t,claims:n,data:r,signature:i}};function ht(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ft(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function dt(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function pt(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function vt(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(yt(u)&&yt(s)){if(!vt(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var h=l[c];if(!n.includes(h))return!1}return!0}function yt(e){return null!==e&&"object"===typeof e}function gt(e){for(var t=[],n=function(){var e=l(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function mt(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=l(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function kt(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var wt=function(){function e(){d(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return v(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var u,s,c=this.chain_[0],l=this.chain_[1],h=this.chain_[2],f=this.chain_[3],d=this.chain_[4],p=0;p<80;p++){p<40?p<20?(u=f^l&(h^f),s=1518500249):(u=l^h^f,s=1859775393):p<60?(u=l&h|f&(l|h),s=2400959708):(u=l^h^f,s=3395469782);var v=(c<<5|c>>>27)+u+d+s+n[p]&4294967295;d=f,f=h,h=4294967295&(l<<30|l>>>2),l=c,c=v}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();function bt(e,t){var n=new _t(e,t);return n.subscribe.bind(n)}var _t=function(){function e(t,n){var r=this;d(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return v(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=Me(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=xt),void 0===r.error&&(r.error=xt),void 0===r.complete&&(r.complete=xt);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function xt(){}var It=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function Et(e,t){return"".concat(e," failed: ").concat(t," argument ")}function St(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(Et(e,t)+"must be a valid function.")}function Tt(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(Et(e,t)+"must be a valid context object.")}var Ct=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function At(e){return e&&e._delegate?e._delegate:e}function Nt(){Nt=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(T){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof h?t:h,a=Object.create(i.prototype),o=new I(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return S()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=b(o,n);if(u){if(u===l)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=c(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(T){return{type:"throw",arg:T}}}e.wrap=s;var l={};function h(){}function f(){}function d(){}var p={};u(p,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(E([])));y&&y!==t&&n.call(y,i)&&(p=y);var g=d.prototype=h.prototype=Object.create(p);function m(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(i,a,o,u){var s=c(e[i],e,a);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==w(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){r("next",e,o,u)}),(function(e){r("throw",e,o,u)})):t.resolve(h).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,u)}))}u(s.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function b(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function E(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return f.prototype=d,u(g,"constructor",d),u(d,"constructor",f),f.displayName=u(d,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,o,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},m(k.prototype),u(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new k(s(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},m(g),u(g,o,"Generator"),u(g,i,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=E,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:E(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}function Dt(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(oC){return void n(oC)}u.done?t(s):Promise.resolve(s).then(r,i)}function Pt(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Dt(a,r,i,o,u,"next",e)}function u(e){Dt(a,r,i,o,u,"throw",e)}o(void 0)}))}}var Rt=function(){function e(t,n,r){d(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return v(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Ot="[DEFAULT]",Lt=function(){function e(t,n){d(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return v(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new Qe;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Ot})}catch(s){}var t,n=Me(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=l(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ot;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=Pt(Nt().mark((function e(){var t;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(f(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),f(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ot;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ot;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=Me(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=l(i.value,2),s=u[0],c=u[1],h=this.normalizeInstanceIdentifier(s);r===h&&c.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=Me(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(o){}}}catch(u){i.e(u)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Ot?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(o){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ot;return this.component?this.component.multipleInstances?e:Ot:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Mt,Ft,jt=function(){function e(t){d(this,e),this.name=t,this.providers=new Map}return v(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Lt(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Ut=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Ft||(Ft={}));var Vt={debug:Ft.DEBUG,verbose:Ft.VERBOSE,info:Ft.INFO,warn:Ft.WARN,error:Ft.ERROR,silent:Ft.SILENT},Kt=Ft.INFO,Bt=(Le(Mt={},Ft.DEBUG,"log"),Le(Mt,Ft.VERBOSE,"log"),Le(Mt,Ft.INFO,"info"),Le(Mt,Ft.WARN,"warn"),Le(Mt,Ft.ERROR,"error"),Mt),qt=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Bt[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},zt=function(){function e(t){d(this,e),this.name=t,this._logLevel=Kt,this._logHandler=qt,this._userLogHandler=null,Ut.push(this)}return v(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Ft))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Vt[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ft.DEBUG].concat(t)),this._logHandler.apply(this,[this,Ft.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ft.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Ft.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ft.INFO].concat(t)),this._logHandler.apply(this,[this,Ft.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ft.WARN].concat(t)),this._logHandler.apply(this,[this,Ft.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ft.ERROR].concat(t)),this._logHandler.apply(this,[this,Ft.ERROR].concat(t))}}]),e}();function Wt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ht(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wt(Object(n),!0).forEach((function(t){Le(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Gt,Qt;var Yt=new WeakMap,Xt=new WeakMap,Jt=new WeakMap,Zt=new WeakMap,$t=new WeakMap;var en={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Xt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Jt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return rn(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function tn(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Qt||(Qt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(an(this),n),rn(Yt.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return rn(e.apply(an(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[an(this),t].concat(r));return Jt.set(a,t.sort?t.sort():[t]),rn(a)}}function nn(e){return"function"===typeof e?tn(e):(e instanceof IDBTransaction&&function(e){if(!Xt.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Xt.set(e,t)}}(e),t=e,(Gt||(Gt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,en):e);var t}function rn(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(rn(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&Yt.set(t,e)})).catch((function(){})),$t.set(t,e),t}(e);if(Zt.has(e))return Zt.get(e);var t=nn(e);return t!==e&&(Zt.set(e,t),$t.set(t,e)),t}var an=function(e){return $t.get(e)};var on,un,sn=["get","getKey","getAll","getAllKeys","count"],cn=["put","add","delete","clear"],ln=new Map;function hn(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(ln.get(t))return ln.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=cn.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||sn.includes(n))){var a=function(){var e=Pt(Nt().mark((function e(t){var a,o,u,s,c,l,h=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=h.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=h[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return ln.set(t,a),a}}}en=function(e){return Ht(Ht({},e),{},{get:function(t,n,r){return hn(t,n)||e.get(t,n,r)},has:function(t,n){return!!hn(t,n)||e.has(t,n)}})}(en);var fn=function(){function e(t){d(this,e),this.container=t}return v(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var dn="@firebase/app",pn="0.7.32",vn=new zt("@firebase/app"),yn="[DEFAULT]",gn=(Le(on={},dn,"fire-core"),Le(on,"@firebase/app-compat","fire-core-compat"),Le(on,"@firebase/analytics","fire-analytics"),Le(on,"@firebase/analytics-compat","fire-analytics-compat"),Le(on,"@firebase/app-check","fire-app-check"),Le(on,"@firebase/app-check-compat","fire-app-check-compat"),Le(on,"@firebase/auth","fire-auth"),Le(on,"@firebase/auth-compat","fire-auth-compat"),Le(on,"@firebase/database","fire-rtdb"),Le(on,"@firebase/database-compat","fire-rtdb-compat"),Le(on,"@firebase/functions","fire-fn"),Le(on,"@firebase/functions-compat","fire-fn-compat"),Le(on,"@firebase/installations","fire-iid"),Le(on,"@firebase/installations-compat","fire-iid-compat"),Le(on,"@firebase/messaging","fire-fcm"),Le(on,"@firebase/messaging-compat","fire-fcm-compat"),Le(on,"@firebase/performance","fire-perf"),Le(on,"@firebase/performance-compat","fire-perf-compat"),Le(on,"@firebase/remote-config","fire-rc"),Le(on,"@firebase/remote-config-compat","fire-rc-compat"),Le(on,"@firebase/storage","fire-gcs"),Le(on,"@firebase/storage-compat","fire-gcs-compat"),Le(on,"@firebase/firestore","fire-fst"),Le(on,"@firebase/firestore-compat","fire-fst-compat"),Le(on,"fire-js","fire-js"),Le(on,"firebase","fire-js-all"),on),mn=new Map,kn=new Map;function wn(e,t){try{e.container.addComponent(t)}catch(n){vn.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function bn(e,t){e.container.addOrOverwriteComponent(t)}function _n(e){var t=e.name;if(kn.has(t))return vn.debug("There were multiple attempts to register component ".concat(t,".")),!1;kn.set(t,e);var n,r=Me(mn.values());try{for(r.s();!(n=r.n()).done;){wn(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function xn(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function In(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:yn;xn(e,t).clearInstance(n)}function En(){kn.clear()}var Sn=(Le(un={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Le(un,"bad-app-name","Illegal App name: '{$appName}"),Le(un,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),Le(un,"app-deleted","Firebase App named '{$appName}' already deleted"),Le(un,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Le(un,"invalid-log-argument","First argument to `onLog` must be null or a function."),Le(un,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),Le(un,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),Le(un,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),Le(un,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),un),Tn=new at("app","Firebase",Sn),Cn=function(){function e(t,n,r){var i=this;d(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Rt("app",(function(){return i}),"PUBLIC"))}return v(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Tn.create("app-deleted",{appName:this._name})}}]),e}(),An="9.9.4";function Nn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:yn,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Tn.create("bad-app-name",{appName:String(i)});var a=mn.get(i);if(a){if(vt(e,a.options)&&vt(r,a.config))return a;throw Tn.create("duplicate-app",{appName:i})}var o,u=new jt(i),s=Me(kn.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(h){s.e(h)}finally{s.f()}var l=new Cn(e,r,u);return mn.set(i,l),l}function Dn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yn,t=mn.get(e);if(!t)throw Tn.create("no-app",{appName:e});return t}function Pn(){return Array.from(mn.values())}function Rn(e){return On.apply(this,arguments)}function On(){return(On=Pt(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!mn.has(n)){e.next=6;break}return mn.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ln(e,t,n){var r,i=null!==(r=gn[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void vn.warn(u.join(" "))}_n(new Rt("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Mn(e,t){if(null!==e&&"function"!==typeof e)throw Tn.create("invalid-log-argument");!function(e,t){var n,r=Me(Ut);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=Vt[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:Ft[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function Fn(e){var t;t=e,Ut.forEach((function(e){e.setLogLevel(t)}))}var jn="firebase-heartbeat-store",Un=null;function Vn(){return Un||(Un=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=rn(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(rn(u.result),e.oldVersion,e.newVersion,rn(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(jn)}}).catch((function(e){throw Tn.create("idb-open",{originalErrorMessage:e.message})}))),Un}function Kn(e){return Bn.apply(this,arguments)}function Bn(){return Bn=Pt(Nt().mark((function e(t){var n,r,i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Vn();case 3:return r=e.sent,e.abrupt("return",r.transaction(jn).objectStore(jn).get(Wn(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof it?vn.warn(e.t0.message):(i=Tn.create("idb-get",{originalErrorMessage:null===(n=e.t0)||void 0===n?void 0:n.message}),vn.warn(i.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),Bn.apply(this,arguments)}function qn(e,t){return zn.apply(this,arguments)}function zn(){return zn=Pt(Nt().mark((function e(t,n){var r,i,a,o,u;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Vn();case 3:return i=e.sent,a=i.transaction(jn,"readwrite"),o=a.objectStore(jn),e.next=8,o.put(n,Wn(t));case 8:return e.abrupt("return",a.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof it?vn.warn(e.t0.message):(u=Tn.create("idb-set",{originalErrorMessage:null===(r=e.t0)||void 0===r?void 0:r.message}),vn.warn(u.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),zn.apply(this,arguments)}function Wn(e){return"".concat(e.name,"!").concat(e.options.appId)}var Hn=function(){function e(t){var n=this;d(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new Jn(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return v(e,[{key:"triggerHeartbeat",value:function(){var e=Pt(Nt().mark((function e(){var t,n,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=Gn(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=Pt(Nt().mark((function e(){var t,n,r,i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=Gn(),n=Qn(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=We(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Gn(){return(new Date).toISOString().substring(0,10)}function Qn(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=Me(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Zn(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Zn(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Yn,Xn,Jn=function(){function e(t){d(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return v(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=Pt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(rt()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(oC){t(oC)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=Pt(Nt().mark((function e(){var t;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,Kn(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=Pt(Nt().mark((function e(t){var n,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",qn(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Pt(Nt().mark((function e(t){var n,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",qn(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(f(r.heartbeats),f(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Zn(e){return We(JSON.stringify({version:2,heartbeats:e})).length}Yn="",_n(new Rt("platform-logger",(function(e){return new fn(e)}),"PRIVATE")),_n(new Rt("heartbeat",(function(e){return new Hn(e)}),"PRIVATE")),Ln(dn,pn,Yn),Ln(dn,pn,"esm2017"),Ln("fire-js","");var $n=function(){function e(t,n){var r=this;d(this,e),this._delegate=t,this.firebase=n,wn(t,new Rt("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return v(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Rn(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yn;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yn;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){wn(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){bn(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),er=(Le(Xn={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Le(Xn,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Xn),tr=new at("app-compat","Firebase",er);var nr=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Nn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(ht(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:Ln,setLogLevel:Fn,onLog:Mn,apps:null,SDK_VERSION:An,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(_n(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw tr.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&Ge(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!ht(n,e=e||yn))throw tr.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}($n);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Ge(n,e)},createSubscribe:bt,ErrorFactory:at,deepExtend:Ge}),n}(),rr=new zt("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){rr.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var ir=self.firebase.SDK_VERSION;ir&&ir.indexOf("LITE")>=0&&rr.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var ar=nr;!function(e){Ln("@firebase/app-compat","0.1.33",e)}();function or(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}function ur(){return ur="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=or(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},ur.apply(this,arguments)}ar.registerVersion("firebase","9.9.4","app-compat");var sr,cr="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},lr={},hr=hr||{},fr=cr||self;function dr(){}function pr(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function vr(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var yr="closure_uid_"+(1e9*Math.random()>>>0),gr=0;function mr(e,t,n){return e.call.apply(e.bind,arguments)}function kr(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function wr(e,t,n){return(wr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?mr:kr).apply(null,arguments)}function br(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function _r(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function xr(){this.s=this.s,this.o=this.o}var Ir={};xr.prototype.s=!1,xr.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,yr)&&e[yr]||(e[yr]=++gr)}(this);delete Ir[e]}},xr.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Er=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Sr=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function Tr(e){return Array.prototype.concat.apply([],arguments)}function Cr(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Ar(e){return/^[\s\xa0]*$/.test(e)}var Nr,Dr=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Pr(e,t){return-1!=e.indexOf(t)}function Rr(e,t){return e<t?-1:e>t?1:0}e:{var Or=fr.navigator;if(Or){var Lr=Or.userAgent;if(Lr){Nr=Lr;break e}}Nr=""}function Mr(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Fr(e){var t={};for(var n in e)t[n]=e[n];return t}var jr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ur(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<jr.length;a++)n=jr[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Vr(e){return Vr[" "](e),e}Vr[" "]=dr;var Kr,Br=Pr(Nr,"Opera"),qr=Pr(Nr,"Trident")||Pr(Nr,"MSIE"),zr=Pr(Nr,"Edge"),Wr=zr||qr,Hr=Pr(Nr,"Gecko")&&!(Pr(Nr.toLowerCase(),"webkit")&&!Pr(Nr,"Edge"))&&!(Pr(Nr,"Trident")||Pr(Nr,"MSIE"))&&!Pr(Nr,"Edge"),Gr=Pr(Nr.toLowerCase(),"webkit")&&!Pr(Nr,"Edge");function Qr(){var e=fr.document;return e?e.documentMode:void 0}e:{var Yr="",Xr=function(){var e=Nr;return Hr?/rv:([^\);]+)(\)|;)/.exec(e):zr?/Edge\/([\d\.]+)/.exec(e):qr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Gr?/WebKit\/(\S+)/.exec(e):Br?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Xr&&(Yr=Xr?Xr[1]:""),qr){var Jr=Qr();if(null!=Jr&&Jr>parseFloat(Yr)){Kr=String(Jr);break e}}Kr=Yr}var Zr,$r={};function ei(){return function(e){var t=$r;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=Dr(String(Kr)).split("."),n=Dr("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=Rr(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||Rr(0==a[2].length,0==o[2].length)||Rr(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(fr.document&&qr){var ti=Qr();Zr=ti||(parseInt(Kr,10)||void 0)}else Zr=void 0;var ni=Zr,ri=function(){if(!fr.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{fr.addEventListener("test",dr,t),fr.removeEventListener("test",dr,t)}catch(n){}return e}();function ii(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function ai(e,t){if(ii.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Hr){e:{try{Vr(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:oi[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&ai.Z.h.call(this)}}ii.prototype.h=function(){this.defaultPrevented=!0},_r(ai,ii);var oi={2:"touch",3:"pen",4:"mouse"};ai.prototype.h=function(){ai.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var ui="closure_listenable_"+(1e6*Math.random()|0),si=0;function ci(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++si,this.ca=this.fa=!1}function li(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function hi(e){this.src=e,this.g={},this.h=0}function fi(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Er(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(li(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function di(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}hi.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=di(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new ci(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var pi="closure_lm_"+(1e6*Math.random()|0),vi={};function yi(e,t,n,r,i){if(r&&r.once)return mi(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)yi(e,t[a],n,r,i);return null}return n=Ei(n),e&&e[ui]?e.N(t,n,vr(r)?!!r.capture:!!r,i):gi(e,t,n,!1,r,i)}function gi(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=vr(i)?!!i.capture:!!i,u=xi(e);if(u||(e[pi]=u=new hi(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=_i;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)ri||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(bi(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function mi(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)mi(e,t[a],n,r,i);return null}return n=Ei(n),e&&e[ui]?e.O(t,n,vr(r)?!!r.capture:!!r,i):gi(e,t,n,!0,r,i)}function ki(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)ki(e,t[a],n,r,i);else r=vr(r)?!!r.capture:!!r,n=Ei(n),e&&e[ui]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=di(a=e.g[t],n,r,i))&&(li(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=xi(e))&&(t=e.g[t.toString()],e=-1,t&&(e=di(t,n,r,i)),(n=-1<e?t[e]:null)&&wi(n))}function wi(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[ui])fi(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(bi(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=xi(t))?(fi(n,e),0==n.h&&(n.src=null,t[pi]=null)):li(e)}}}function bi(e){return e in vi?vi[e]:vi[e]="on"+e}function _i(e,t){if(e.ca)e=!0;else{t=new ai(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&wi(e),e=n.call(r,t)}return e}function xi(e){return(e=e[pi])instanceof hi?e:null}var Ii="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ei(e){return"function"===typeof e?e:(e[Ii]||(e[Ii]=function(t){return e.handleEvent(t)}),e[Ii])}function Si(){xr.call(this),this.i=new hi(this),this.P=this,this.I=null}function Ti(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new ii(t,e);else if(t instanceof ii)t.target=t.target||e;else{var i=t;Ur(t=new ii(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Ci(o,r,!0,t)&&i}if(i=Ci(o=t.g=e,r,!0,t)&&i,i=Ci(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Ci(o=t.g=n[a],r,!1,t)&&i}function Ci(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var u=o.listener,s=o.ia||o.src;o.fa&&fi(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}_r(Si,xr),Si.prototype[ui]=!0,Si.prototype.removeEventListener=function(e,t,n,r){ki(this,e,t,n,r)},Si.prototype.M=function(){if(Si.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)li(n[r]);delete t.g[e],t.h--}}this.I=null},Si.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Si.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Ai=fr.JSON.stringify;function Ni(){var e=ji,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Di,Pi=function(){function e(){d(this,e),this.h=this.g=null}return v(e,[{key:"add",value:function(e,t){var n=Ri.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Ri=new(function(){function e(t,n){d(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return v(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new Oi}),(function(e){return e.reset()})),Oi=function(){function e(){d(this,e),this.next=this.g=this.h=null}return v(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Li(e){fr.setTimeout((function(){throw e}),0)}function Mi(e,t){Di||function(){var e=fr.Promise.resolve(void 0);Di=function(){e.then(Ui)}}(),Fi||(Di(),Fi=!0),ji.add(e,t)}var Fi=!1,ji=new Pi;function Ui(){for(var e;e=Ni();){try{e.h.call(e.g)}catch(n){Li(n)}var t=Ri;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Fi=!1}function Vi(e,t){Si.call(this),this.h=e||1,this.g=t||fr,this.j=wr(this.kb,this),this.l=Date.now()}function Ki(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function Bi(e,t,n){if("function"===typeof e)n&&(e=wr(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=wr(e.handleEvent,e)}return 2147483647<Number(t)?-1:fr.setTimeout(e,t||0)}function qi(e){e.g=Bi((function(){e.g=null,e.i&&(e.i=!1,qi(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}_r(Vi,Si),(sr=Vi.prototype).da=!1,sr.S=null,sr.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Ti(this,"tick"),this.da&&(Ki(this),this.start()))}},sr.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},sr.M=function(){Vi.Z.M.call(this),Ki(this),delete this.g};var zi=function(e){g(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return v(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:qi(this)}},{key:"M",value:function(){ur(m(n.prototype),"M",this).call(this),this.g&&(fr.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(xr);function Wi(e){xr.call(this),this.h=e,this.g={}}_r(Wi,xr);var Hi=[];function Gi(e,t,n,r){Array.isArray(n)||(n&&(Hi[0]=n.toString()),n=Hi);for(var i=0;i<n.length;i++){var a=yi(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Qi(e){Mr(e.g,(function(e,t){this.g.hasOwnProperty(t)&&wi(e)}),e),e.g={}}function Yi(){this.g=!0}function Xi(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Ai(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}Wi.prototype.M=function(){Wi.Z.M.call(this),Qi(this)},Wi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Yi.prototype.Aa=function(){this.g=!1},Yi.prototype.info=function(){};var Ji={},Zi=null;function $i(){return Zi=Zi||new Si}function ea(e){ii.call(this,Ji.Ma,e)}function ta(e){var t=$i();Ti(t,new ea(t,e))}function na(e,t){ii.call(this,Ji.STAT_EVENT,e),this.stat=t}function ra(e){var t=$i();Ti(t,new na(t,e))}function ia(e,t){ii.call(this,Ji.Na,e),this.size=t}function aa(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return fr.setTimeout((function(){e()}),t)}Ji.Ma="serverreachability",_r(ea,ii),Ji.STAT_EVENT="statevent",_r(na,ii),Ji.Na="timingevent",_r(ia,ii);var oa={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},ua={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function sa(){}function ca(e){return e.h||(e.h=e.i())}function la(){}sa.prototype.h=null;var ha,fa={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function da(){ii.call(this,"d")}function pa(){ii.call(this,"c")}function va(){}function ya(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Wi(this),this.P=ma,e=Wr?125:void 0,this.W=new Vi(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new ga}function ga(){this.i=null,this.g="",this.h=!1}_r(da,ii),_r(pa,ii),_r(va,sa),va.prototype.g=function(){return new XMLHttpRequest},va.prototype.i=function(){return{}},ha=new va;var ma=45e3,ka={},wa={};function ba(e,t,n){e.K=1,e.v=za(ja(t)),e.s=n,e.U=!0,_a(e,null)}function _a(e,t){e.F=Date.now(),Sa(e),e.A=ja(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),ro(n.h,"t",r),e.C=0,n=e.l.H,e.h=new ga,e.g=ou(e.l,n?t:null,!e.s),0<e.O&&(e.L=new zi(wr(e.Ia,e,e.g),e.O)),Gi(e.V,e.g,"readystatechange",e.gb),t=e.H?Fr(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),ta(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function xa(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function Ia(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Ea(e,n))==wa){4==t&&(e.o=4,ra(14),i=!1),Xi(e.j,e.m,null,"[Incomplete Response]");break}if(r==ka){e.o=4,ra(15),Xi(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Xi(e.j,e.m,r,null),Da(e,r)}xa(e)&&r!=wa&&r!=ka&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,ra(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Zo(t),t.L=!0,ra(11))):(Xi(e.j,e.m,n,"[Invalid Chunked Response]"),Na(e),Aa(e))}function Ea(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?wa:(n=Number(t.substring(n,r)),isNaN(n)?ka:(r+=1)+n>t.length?wa:(t=t.substr(r,n),e.C=r+n,t))}function Sa(e){e.Y=Date.now()+e.P,Ta(e,e.P)}function Ta(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=aa(wr(e.eb,e),t)}function Ca(e){e.B&&(fr.clearTimeout(e.B),e.B=null)}function Aa(e){0==e.l.G||e.I||tu(e.l,e)}function Na(e){Ca(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Ki(e.W),Qi(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Da(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||ho(n.i,e)))if(n.I=e.N,!e.J&&ho(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;eu(n),qo(n)}Jo(n),ra(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=aa(wr(n.ab,n),6e3));if(1>=lo(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else ru(n,11)}else if((e.J||n.g==e)&&eu(n),!Ar(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var u=a[4];null!=u&&(n.za=u,n.h.info("SVER="+n.za));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(Pr(l,"spdy")||Pr(l,"quic")||Pr(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(fo(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,qa(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=au(r,r.H?r.la:null,r.W),d.J){po(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(Ca(p),Sa(p)),r.g=d}else Xo(r);0<n.l.length&&Ho(n)}else"stop"!=a[0]&&"close"!=a[0]||ru(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?ru(n,7):Bo(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}ta(4)}catch(a){}}function Pa(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(pr(e)||"string"===typeof e)Sr(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(pr(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(pr(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function Ra(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Ra)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Oa(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];La(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)La(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function La(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(sr=ya.prototype).setTimeout=function(e){this.P=e},sr.gb=function(e){e=e.target;var t=this.L;t&&3==Fo(e)?t.l():this.Ia(e)},sr.Ia=function(e){try{if(e==this.g)e:{var t=Fo(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||Wr||this.g&&(this.h.h||this.g.ga()||jo(this.g)))){this.I||4!=t||7==n||ta(8==n||0>=r?3:2),Ca(this);var i=this.g.ba();this.N=i;t:if(xa(this)){var a=jo(this.g);e="";var o=a.length,u=4==Fo(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Na(this),Aa(this);var s="";break t}this.h.i=new fr.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:u&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ar(c)){var h=c;break t}}h=null}if(!(i=h)){this.i=!1,this.o=3,ra(12),Na(this),Aa(this);break e}Xi(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Da(this,i)}this.U?(Ia(this,t,s),Wr&&this.i&&3==t&&(Gi(this.V,this.W,"tick",this.fb),this.W.start())):(Xi(this.j,this.m,s,null),Da(this,s)),4==t&&Na(this),this.i&&!this.I&&(4==t?tu(this.l,this):(this.i=!1,Sa(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,ra(12)):(this.o=0,ra(13)),Na(this),Aa(this)}}}catch(t){}},sr.fb=function(){if(this.g){var e=Fo(this.g),t=this.g.ga();this.C<t.length&&(Ca(this),Ia(this,e,t),this.i&&4!=e&&Sa(this))}},sr.cancel=function(){this.I=!0,Na(this)},sr.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(ta(3),ra(17)),Na(this),this.o=2,Aa(this)):Ta(this,this.Y-e)},(sr=Ra.prototype).R=function(){Oa(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},sr.T=function(){return Oa(this),this.g.concat()},sr.get=function(e,t){return La(this.h,e)?this.h[e]:t},sr.set=function(e,t){La(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},sr.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var Ma=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Fa(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Fa){this.g=void 0!==t?t:e.g,Ua(this,e.j),this.s=e.s,Va(this,e.i),Ka(this,e.m),this.l=e.l,t=e.h;var n=new $a;n.i=t.i,t.g&&(n.g=new Ra(t.g),n.h=t.h),Ba(this,n),this.o=e.o}else e&&(n=String(e).match(Ma))?(this.g=!!t,Ua(this,n[1]||"",!0),this.s=Wa(n[2]||""),Va(this,n[3]||"",!0),Ka(this,n[4]),this.l=Wa(n[5]||"",!0),Ba(this,n[6]||"",!0),this.o=Wa(n[7]||"")):(this.g=!!t,this.h=new $a(null,this.g))}function ja(e){return new Fa(e)}function Ua(e,t,n){e.j=n?Wa(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Va(e,t,n){e.i=n?Wa(t,!0):t}function Ka(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Ba(e,t,n){t instanceof $a?(e.h=t,function(e,t){t&&!e.j&&(eo(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(to(this,t),ro(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=Ha(t,Ja)),e.h=new $a(t,e.g))}function qa(e,t,n){e.h.set(t,n)}function za(e){return qa(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Wa(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Ha(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Ga),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Ga(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Fa.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Ha(t,Qa,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Ha(t,Qa,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Ha(n,"/"==n.charAt(0)?Xa:Ya,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Ha(n,Za)),e.join("")};var Qa=/[#\/\?@]/g,Ya=/[#\?:]/g,Xa=/[#\?]/g,Ja=/[#\?@]/g,Za=/#/g;function $a(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function eo(e){e.g||(e.g=new Ra,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function to(e,t){eo(e),t=io(e,t),La(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,La((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&Oa(e)))}function no(e,t){return eo(e),t=io(e,t),La(e.g.h,t)}function ro(e,t,n){to(e,t),0<n.length&&(e.i=null,e.g.set(io(e,t),Cr(n)),e.h+=n.length)}function io(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(sr=$a.prototype).add=function(e,t){eo(this),this.i=null,e=io(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},sr.forEach=function(e,t){eo(this),this.g.forEach((function(n,r){Sr(n,(function(n){e.call(t,n,r,this)}),this)}),this)},sr.T=function(){eo(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},sr.R=function(e){eo(this);var t=[];if("string"===typeof e)no(this,e)&&(t=Tr(t,this.g.get(io(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=Tr(t,e[n])}return t},sr.set=function(e,t){return eo(this),this.i=null,no(this,e=io(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},sr.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},sr.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var ao=v((function e(t,n){d(this,e),this.h=t,this.g=n}));function oo(e){this.l=e||so,fr.PerformanceNavigationTiming?e=0<(e=fr.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(fr.g&&fr.g.Ea&&fr.g.Ea()&&fr.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var uo,so=10;function co(e){return!!e.h||!!e.g&&e.g.size>=e.j}function lo(e){return e.h?1:e.g?e.g.size:0}function ho(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function fo(e,t){e.g?e.g.add(t):e.h=t}function po(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function vo(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=Me(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return Cr(e.i)}function yo(){}function go(){this.g=new yo}function mo(e,t,n){var r=n||"";try{Pa(e,(function(e,n){var i=e;vr(e)&&(i=Ai(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function ko(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function wo(e){this.l=e.$b||null,this.j=e.ib||!1}function bo(e,t){Si.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=_o,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}oo.prototype.cancel=function(){if(this.i=vo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=Me(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},yo.prototype.stringify=function(e){return fr.JSON.stringify(e,void 0)},yo.prototype.parse=function(e){return fr.JSON.parse(e,void 0)},_r(wo,sa),wo.prototype.g=function(){return new bo(this.l,this.j)},wo.prototype.i=(uo={},function(){return uo}),_r(bo,Si);var _o=0;function xo(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function Io(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Eo(e)}function Eo(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(sr=bo.prototype).open=function(e,t){if(this.readyState!=_o)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Eo(this)},sr.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||fr).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},sr.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Io(this)),this.readyState=_o},sr.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Eo(this)),this.g&&(this.readyState=3,Eo(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof fr.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;xo(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},sr.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Io(this):Eo(this),3==this.readyState&&xo(this)}},sr.Ua=function(e){this.g&&(this.response=this.responseText=e,Io(this))},sr.Ta=function(e){this.g&&(this.response=e,Io(this))},sr.ha=function(){this.g&&Io(this)},sr.setRequestHeader=function(e,t){this.v.append(e,t)},sr.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},sr.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(bo.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var So=fr.JSON.parse;function To(e){Si.call(this),this.headers=new Ra,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Co,this.K=this.L=!1}_r(To,Si);var Co="",Ao=/^https?$/i,No=["POST","PUT"];function Do(e){return"content-type"==e.toLowerCase()}function Po(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Ro(e),Lo(e)}function Ro(e){e.D||(e.D=!0,Ti(e,"complete"),Ti(e,"error"))}function Oo(e){if(e.h&&"undefined"!=typeof hr&&(!e.C[1]||4!=Fo(e)||2!=e.ba()))if(e.v&&4==Fo(e))Bi(e.Fa,0,e);else if(Ti(e,"readystatechange"),4==Fo(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(Ma)[1]||null;if(!a&&fr.self&&fr.self.location){var o=fr.self.location.protocol;a=o.substr(0,o.length-1)}i=!Ao.test(a?a.toLowerCase():"")}t=i}if(t)Ti(e,"complete"),Ti(e,"success");else{e.m=6;try{var u=2<Fo(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.ba()+"]",Ro(e)}}finally{Lo(e)}}}function Lo(e,t){if(e.g){Mo(e);var n=e.g,r=e.C[0]?dr:null;e.g=null,e.C=null,t||Ti(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Mo(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(fr.clearTimeout(e.A),e.A=null)}function Fo(e){return e.g?e.g.readyState:0}function jo(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Co:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Uo(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return Mr(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):qa(e,t,n))}function Vo(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Ko(e){this.za=0,this.l=[],this.h=new Yi,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Vo("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Vo("baseRetryDelayMs",5e3,e),this.$a=Vo("retryDelaySeedMs",1e4,e),this.Ya=Vo("forwardChannelMaxRetries",2,e),this.ra=Vo("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new oo(e&&e.concurrentRequestLimit),this.Ca=new go,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function Bo(e){if(zo(e),3==e.G){var t=e.V++,n=ja(e.F);qa(n,"SID",e.J),qa(n,"RID",t),qa(n,"TYPE","terminate"),Qo(e,n),(t=new ya(e,e.h,t,void 0)).K=2,t.v=za(ja(n)),n=!1,fr.navigator&&fr.navigator.sendBeacon&&(n=fr.navigator.sendBeacon(t.v.toString(),"")),!n&&fr.Image&&((new Image).src=t.v,n=!0),n||(t.g=ou(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Sa(t)}iu(e)}function qo(e){e.g&&(Zo(e),e.g.cancel(),e.g=null)}function zo(e){qo(e),e.u&&(fr.clearTimeout(e.u),e.u=null),eu(e),e.i.cancel(),e.m&&("number"===typeof e.m&&fr.clearTimeout(e.m),e.m=null)}function Wo(e,t){e.l.push(new ao(e.Za++,t)),3==e.G&&Ho(e)}function Ho(e){co(e.i)||e.m||(e.m=!0,Mi(e.Ha,e),e.C=0)}function Go(e,t){var n;n=t?t.m:e.V++;var r=ja(e.F);qa(r,"SID",e.J),qa(r,"RID",n),qa(r,"AID",e.U),Qo(e,r),e.o&&e.s&&Uo(r,e.o,e.s),n=new ya(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Yo(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),fo(e.i,n),ba(n,r,t)}function Qo(e,t){e.j&&Pa({},(function(e,n){qa(t,n,e)}))}function Yo(e,t,n){n=Math.min(e.l.length,n);var r=e.j?wr(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{mo(l,o,"req"+c+"_")}catch(Ou){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function Xo(e){e.g||e.u||(e.Y=1,Mi(e.Ga,e),e.A=0)}function Jo(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=aa(wr(e.Ga,e),nu(e,e.A)),e.A++,!0)}function Zo(e){null!=e.B&&(fr.clearTimeout(e.B),e.B=null)}function $o(e){e.g=new ya(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=ja(e.oa);qa(t,"RID","rpc"),qa(t,"SID",e.J),qa(t,"CI",e.N?"0":"1"),qa(t,"AID",e.U),Qo(e,t),qa(t,"TYPE","xmlhttp"),e.o&&e.s&&Uo(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=za(ja(t)),n.s=null,n.U=!0,_a(n,e)}function eu(e){null!=e.v&&(fr.clearTimeout(e.v),e.v=null)}function tu(e,t){var n=null;if(e.g==t){eu(e),Zo(e),e.g=null;var r=2}else{if(!ho(e.i,t))return;n=t.D,po(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Ti(r=$i(),new ia(r,n,t,i)),Ho(e)}else Xo(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(lo(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=aa(wr(e.Ha,e,t),nu(e,e.C)),e.C++,!0))}(e,t)||2==r&&Jo(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:ru(e,5);break;case 4:ru(e,10);break;case 3:ru(e,6);break;default:ru(e,2)}}function nu(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function ru(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=wr(e.jb,e);n||(n=new Fa("//www.google.com/images/cleardot.gif"),fr.location&&"http"==fr.location.protocol||Ua(n,"https"),za(n)),function(e,t){var n=new Yi;if(fr.Image){var r=new Image;r.onload=br(ko,n,r,"TestLoadImage: loaded",!0,t),r.onerror=br(ko,n,r,"TestLoadImage: error",!1,t),r.onabort=br(ko,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=br(ko,n,r,"TestLoadImage: timeout",!1,t),fr.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else ra(2);e.G=0,e.j&&e.j.va(t),iu(e),zo(e)}function iu(e){e.G=0,e.I=-1,e.j&&(0==vo(e.i).length&&0==e.l.length||(e.i.i.length=0,Cr(e.l),e.l.length=0),e.j.ua())}function au(e,t,n){var r=function(e){return e instanceof Fa?ja(e):new Fa(e,void 0)}(n);if(""!=r.i)t&&Va(r,t+"."+r.i),Ka(r,r.m);else{var i=fr.location;r=function(e,t,n,r){var i=new Fa(null,void 0);return e&&Ua(i,e),t&&Va(i,t),n&&Ka(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&Mr(e.aa,(function(e,t){qa(r,t,e)})),t=e.D,n=e.sa,t&&n&&qa(r,t,n),qa(r,"VER",e.ma),Qo(e,r),r}function ou(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new To(new wo({ib:!0})):new To(e.qa)).L=e.H,t}function uu(){}function su(){if(qr&&!(10<=Number(ni)))throw Error("Environmental error: no available transport.")}function cu(e,t){Si.call(this),this.g=new Ko(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!Ar(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Ar(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new fu(this)}function lu(e){da.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function hu(){pa.call(this),this.status=1}function fu(e){this.g=e}(sr=To.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ha.g(),this.C=this.u?ca(this.u):ca(ha),this.g.onreadystatechange=wr(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void Po(this,a)}e=n||"";var i=new Ra(this.headers);r&&Pa(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=Do,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=fr.FormData&&e instanceof fr.FormData,!(0<=Er(No,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Mo(this),0<this.B&&((this.K=function(e){return qr&&ei()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=wr(this.pa,this)):this.A=Bi(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){Po(this,a)}},sr.pa=function(){"undefined"!=typeof hr&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ti(this,"timeout"),this.abort(8))},sr.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Ti(this,"complete"),Ti(this,"abort"),Lo(this))},sr.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Lo(this,!0)),To.Z.M.call(this)},sr.Fa=function(){this.s||(this.F||this.v||this.l?Oo(this):this.cb())},sr.cb=function(){Oo(this)},sr.ba=function(){try{return 2<Fo(this)?this.g.status:-1}catch(uo){return-1}},sr.ga=function(){try{return this.g?this.g.responseText:""}catch(uo){return""}},sr.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),So(t)}},sr.Da=function(){return this.m},sr.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(sr=Ko.prototype).ma=8,sr.G=1,sr.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},sr.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new ya(this,this.h,e,void 0),n=this.s;if(this.P&&(n?Ur(n=Fr(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Yo(this,t,r),qa(i=ja(this.F),"RID",e),qa(i,"CVER",22),this.D&&qa(i,"X-HTTP-Session-Id",this.D),Qo(this,i),this.o&&n&&Uo(i,this.o,n),fo(this.i,t),this.Ra&&qa(i,"TYPE","init"),this.ja?(qa(i,"$req",r),qa(i,"SID","null"),t.$=!0,ba(t,i,null)):ba(t,i,r),this.G=2}}else 3==this.G&&(e?Go(this,e):0==this.l.length||co(this.i)||Go(this))},sr.Ga=function(){if(this.u=null,$o(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=aa(wr(this.bb,this),e)}},sr.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ra(10),qo(this),$o(this))},sr.ab=function(){null!=this.v&&(this.v=null,qo(this),Jo(this),ra(19))},sr.jb=function(e){e?(this.h.info("Successfully pinged google.com"),ra(2)):(this.h.info("Failed to ping google.com"),ra(1))},(sr=uu.prototype).xa=function(){},sr.wa=function(){},sr.va=function(){},sr.ua=function(){},sr.Oa=function(){},su.prototype.g=function(e,t){return new cu(e,t)},_r(cu,Si),cu.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Mi(wr(e.hb,e,t))),ra(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=au(e,null,e.W),Ho(e)},cu.prototype.close=function(){Bo(this.g)},cu.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,Wo(this.g,t)}else this.v?((t={}).__data__=Ai(e),Wo(this.g,t)):Wo(this.g,e)},cu.prototype.M=function(){this.g.j=null,delete this.j,Bo(this.g),delete this.g,cu.Z.M.call(this)},_r(lu,da),_r(hu,pa),_r(fu,uu),fu.prototype.xa=function(){Ti(this.g,"a")},fu.prototype.wa=function(e){Ti(this.g,new lu(e))},fu.prototype.va=function(e){Ti(this.g,new hu(e))},fu.prototype.ua=function(){Ti(this.g,"b")},su.prototype.createWebChannel=su.prototype.g,cu.prototype.send=cu.prototype.u,cu.prototype.open=cu.prototype.m,cu.prototype.close=cu.prototype.close,oa.NO_ERROR=0,oa.TIMEOUT=8,oa.HTTP_ERROR=6,ua.COMPLETE="complete",la.EventType=fa,fa.OPEN="a",fa.CLOSE="b",fa.ERROR="c",fa.MESSAGE="d",Si.prototype.listen=Si.prototype.N,To.prototype.listenOnce=To.prototype.O,To.prototype.getLastError=To.prototype.La,To.prototype.getLastErrorCode=To.prototype.Da,To.prototype.getStatus=To.prototype.ba,To.prototype.getResponseJson=To.prototype.Qa,To.prototype.getResponseText=To.prototype.ga,To.prototype.send=To.prototype.ea;var du=lr.createWebChannelTransport=function(){return new su},pu=lr.getStatEventTarget=function(){return $i()},vu=lr.ErrorCode=oa,yu=lr.EventType=ua,gu=lr.Event=Ji,mu=lr.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},ku=lr.FetchXmlHttpFactory=wo,wu=lr.WebChannel=la,bu=lr.XhrIo=To,_u="@firebase/firestore",xu=function(){function e(t){d(this,e),this.uid=t}return v(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();xu.UNAUTHENTICATED=new xu(null),xu.GOOGLE_CREDENTIALS=new xu("google-credentials-uid"),xu.FIRST_PARTY=new xu("first-party-uid"),xu.MOCK_USER=new xu("mock-user");var Iu="9.9.4",Eu=new zt("@firebase/firestore");function Su(){return Eu.logLevel}function Tu(e){if(Eu.logLevel<=Ft.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Nu);Eu.debug.apply(Eu,["Firestore (".concat(Iu,"): ").concat(e)].concat(f(i)))}}function Cu(e){if(Eu.logLevel<=Ft.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Nu);Eu.error.apply(Eu,["Firestore (".concat(Iu,"): ").concat(e)].concat(f(i)))}}function Au(e){if(Eu.logLevel<=Ft.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Nu);Eu.warn.apply(Eu,["Firestore (".concat(Iu,"): ").concat(e)].concat(f(i)))}}function Nu(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Du(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Iu,") INTERNAL ASSERTION FAILED: ")+e;throw Cu(t),new Error(t)}function Pu(e,t){e||Du()}function Ru(e,t){return e}var Ou={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Lu=function(e){g(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return v(n)}(it),Mu=v((function e(){var t=this;d(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Fu=v((function e(t,n){d(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),ju=function(){function e(){d(this,e)}return v(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(xu.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Uu=function(){function e(t){d(this,e),this.token=t,this.changeListener=null}return v(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Vu=function(){function e(t){d(this,e),this.t=t,this.currentUser=xu.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return v(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Mu;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Mu,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(Pt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){Tu("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(Tu("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Mu)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Tu("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Pu("string"==typeof n.accessToken),new Fu(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Pu(null===e||"string"==typeof e),new xu(e)}}]),e}(),Ku=function(){function e(t,n,r,i){d(this,e),this.h=t,this.l=n,this.m=r,this.g=i,this.type="FirstParty",this.user=xu.FIRST_PARTY,this.p=new Map}return v(e,[{key:"I",value:function(){return this.g?this.g():(Pu(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}},{key:"headers",get:function(){this.p.set("X-Goog-AuthUser",this.l);var e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}]),e}(),Bu=function(){function e(t,n,r,i){d(this,e),this.h=t,this.l=n,this.m=r,this.g=i}return v(e,[{key:"getToken",value:function(){return Promise.resolve(new Ku(this.h,this.l,this.m,this.g))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(xu.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),qu=v((function e(t){d(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),zu=function(){function e(t){d(this,e),this.T=t,this.forceRefresh=!1,this.appCheck=null,this.A=null}return v(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&Tu("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.A;return n.A=e.token,Tu("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){Tu("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.T.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.T.getImmediate({optional:!0});e?i(e):Tu("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Pu("string"==typeof t.token),e.A=t.token,new qu(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function Wu(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var Hu=function(){function e(){d(this,e)}return v(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Wu(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Gu(e,t){return e<t?-1:e>t?1:0}function Qu(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Yu(e){return e+"\0"}var Xu=function(){function e(t,n){if(d(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Lu(Ou.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Lu(Ou.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Lu(Ou.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Lu(Ou.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return v(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Gu(this.nanoseconds,e.nanoseconds):Gu(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Ju=function(){function e(t){d(this,e),this.timestamp=t}return v(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Xu(0,0))}},{key:"max",value:function(){return new e(new Xu(253402300799,999999999))}}]),e}(),Zu=function(){function e(t,n,r){d(this,e),void 0===n?n=0:n>t.length&&Du(),void 0===r?r=t.length-n:r>t.length-n&&Du(),this.segments=t,this.offset=n,this.len=r}return v(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),$u=function(e){g(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new Lu(Ou.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,f(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Zu),es=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ts=function(e){g(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return es.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Lu(Ou.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new Lu(Ou.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new Lu(Ou.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new Lu(Ou.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Zu),ns=function(){function e(t){d(this,e),this.path=t}return v(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===$u.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e($u.fromString(t))}},{key:"fromName",value:function(t){return new e($u.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e($u.emptyPath())}},{key:"comparator",value:function(e,t){return $u.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new $u(t.slice()))}}]),e}(),rs=v((function e(t,n,r,i){d(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function is(e){return e.fields.find((function(e){return 2===e.kind}))}function as(e){return e.fields.filter((function(e){return 2!==e.kind}))}rs.UNKNOWN_ID=-1;var os=v((function e(t,n){d(this,e),this.fieldPath=t,this.kind=n}));var us=function(){function e(t,n){d(this,e),this.sequenceNumber=t,this.offset=n}return v(e,null,[{key:"empty",value:function(){return new e(0,ls.min())}}]),e}();function ss(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Ju.fromTimestamp(1e9===r?new Xu(n+1,0):new Xu(n,r));return new ls(i,ns.empty(),t)}function cs(e){return new ls(e.readTime,e.key,-1)}var ls=function(){function e(t,n,r){d(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return v(e,null,[{key:"min",value:function(){return new e(Ju.min(),ns.empty(),-1)}},{key:"max",value:function(){return new e(Ju.max(),ns.empty(),-1)}}]),e}();function hs(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=ns.comparator(e.documentKey,t.documentKey))?n:Gu(e.largestBatchId,t.largestBatchId)}var fs="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ds=function(){function e(){d(this,e),this.onCommittedListeners=[]}return v(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function ps(e){return vs.apply(this,arguments)}function vs(){return vs=Pt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Ou.FAILED_PRECONDITION&&t.message===fs){e.next=2;break}throw t;case 2:Tu("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),vs.apply(this,arguments)}var ys=function(){function e(t){var n=this;d(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return v(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Du(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=Me(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(u){var s=u;n(t[s]).next((function(t){a[s]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u(s)}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),gs=function(){function e(t,n){var r=this;d(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.P=new Mu,this.transaction.oncomplete=function(){r.P.resolve()},this.transaction.onabort=function(){n.error?r.P.reject(new ws(t,n.error)):r.P.resolve()},this.transaction.onerror=function(e){var n=Es(e.target.error);r.P.reject(new ws(t,n))}}return v(e,[{key:"v",get:function(){return this.P.promise}},{key:"abort",value:function(e){e&&this.P.reject(e),this.aborted||(Tu("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"V",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new _s(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new ws(n,t)}}}]),e}(),ms=function(){function e(t,n,r){d(this,e),this.name=t,this.version=n,this.S=r,12.2===e.D(Xe())&&Cu("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return v(e,[{key:"F",value:function(){var e=Pt(Nt().mark((function e(t){var n=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return Tu("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new ws(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Lu(Ou.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new Lu(Ou.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new ws(t,n))},i.onupgradeneeded=function(e){Tu("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.S.$(t,i.transaction,e.oldVersion,n.version).next((function(){Tu("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.B&&(this.db.onversionchange=function(e){return n.B(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"L",value:function(e){this.B=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=Pt(Nt().mark((function e(t,n,r,i){var a,o,u,s,c,l=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(Nt().mark((function e(){var n,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.F(t);case 2:return l.db=e.sent,n=gs.open(l.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.V(),e})).catch((function(e){return n.abort(e),ys.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.v;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s=e.t1,c="FirebaseError"!==s.name&&o<3,Tu("SimpleDb","Transaction failed with error:",s.message,"Retrying:",c),this.close(),c){e.next=15;break}return e.abrupt("return",Promise.reject(s));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return Tu("SimpleDb","Removing database:",e),xs(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"C",value:function(){if(!rt())return!1;if(e.N())return!0;var t=Xe(),n=e.D(t),r=0<n&&n<10,i=e.k(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"N",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.M)}},{key:"O",value:function(e,t){return e.store(t)}},{key:"D",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"k",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),ks=function(){function e(t){d(this,e),this.U=t,this.q=!1,this.K=null}return v(e,[{key:"isDone",get:function(){return this.q}},{key:"G",get:function(){return this.K}},{key:"cursor",set:function(e){this.U=e}},{key:"done",value:function(){this.q=!0}},{key:"j",value:function(e){this.K=e}},{key:"delete",value:function(){return xs(this.U.delete())}}]),e}(),ws=function(e){g(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,Ou.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return v(n)}(Lu);function bs(e){return"IndexedDbTransactionError"===e.name}var _s=function(){function e(t){d(this,e),this.store=t}return v(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(Tu("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Tu("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),xs(n)}},{key:"add",value:function(e){return Tu("SimpleDb","ADD",this.store.name,e,e),xs(this.store.add(e))}},{key:"get",value:function(e){var t=this;return xs(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Tu("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return Tu("SimpleDb","DELETE",this.store.name,e),xs(this.store.delete(e))}},{key:"count",value:function(){return Tu("SimpleDb","COUNT",this.store.name),xs(this.store.count())}},{key:"W",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.H(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new ys((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new ys((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Y",value:function(e,t){Tu("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.X=!1;var r=this.cursor(n);return this.H(r,(function(e,t,n){return n.delete()}))}},{key:"Z",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.H(r,t)}},{key:"tt",value:function(e){var t=this.cursor({});return new ys((function(n,r){t.onerror=function(e){var t=Es(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"H",value:function(e,t){var n=[];return new ys((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new ks(i),o=t(i.primaryKey,i.value,a);if(o instanceof ys){var u=o.catch((function(e){return a.done(),ys.reject(e)}));n.push(u)}a.isDone?r():null===a.G?i.continue():i.continue(a.G)}else r()}})).next((function(){return ys.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.X?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function xs(e){return new ys((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Es(e.target.error);n(t)}}))}var Is=!1;function Es(e){var t=ms.D(Xe());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Lu("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Is||(Is=!0,setTimeout((function(){throw r}),0)),r}}return e}var Ss=function(){function e(t,n){d(this,e),this.asyncQueue=t,this.et=n,this.task=null}return v(e,[{key:"start",value:function(){this.nt(15)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"nt",value:function(e){var t=this;Tu("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,Pt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=Tu,e.t1="Documents written: ",e.next=6,t.et.st();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!bs(e.t4)){e.next=17;break}Tu("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,ps(e.t4);case 19:return e.next=21,t.nt(1);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),Ts=function(){function e(t,n){d(this,e),this.localStore=t,this.persistence=n}return v(e,[{key:"st",value:function(){var e=Pt(Nt().mark((function e(){var t,n=this,r=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.it(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"it",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return ys.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return Tu("IndexBackiller","Processing collection: ".concat(t)),n.rt(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"rt",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.ot(i,n)})).next((function(n){return Tu("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"ot",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=cs(t);hs(r,n)>0&&(n=r)})),new ls(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),Cs=function(){function e(t,n){var r=this;d(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ut(e)},this.ct=function(e){return n.writeSequenceNumber(e)})}return v(e,[{key:"ut",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ct&&this.ct(e),e}}]),e}();function As(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ns(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Ds(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}Cs.at=-1;var Ps=function(){function e(t,n){d(this,e),this.comparator=t,this.root=n||Os.EMPTY}return v(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Os.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Os.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Rs(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Rs(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Rs(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Rs(this.root,e,this.comparator,!0)}}]),e}(),Rs=function(){function e(t,n,r,i){d(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return v(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Os=function(){function e(t,n,r,i,a){d(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return v(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Du();if(this.right.isRed())throw Du();var e=this.left.check();if(e!==this.right.check())throw Du();return e+(this.isRed()?0:1)}}]),e}();Os.EMPTY=null,Os.RED=!0,Os.BLACK=!1,Os.EMPTY=new(function(){function e(){d(this,e),this.size=0}return v(e,[{key:"key",get:function(){throw Du()}},{key:"value",get:function(){throw Du()}},{key:"color",get:function(){throw Du()}},{key:"left",get:function(){throw Du()}},{key:"right",get:function(){throw Du()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Os(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Ls=function(){function e(t){d(this,e),this.comparator=t,this.data=new Ps(this.comparator)}return v(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Ms(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Ms(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Ms=function(){function e(t){d(this,e),this.iter=t}return v(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Fs(e){return e.hasNext()?e.getNext():void 0}var js=function(){function e(t){d(this,e),this.fields=t,t.sort(ts.comparator)}return v(e,[{key:"unionWith",value:function(t){var n,r=new Ls(ts.comparator),i=Me(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=Me(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=Me(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Qu(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}();var Us=function(e){function t(e){d(this,t),this.binaryString=e}return v(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Gu(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Us.EMPTY_BYTE_STRING=new Us("");var Vs=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ks(e){if(Pu(!!e),"string"==typeof e){var t=0,n=Vs.exec(e);if(Pu(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Bs(e.seconds),nanos:Bs(e.nanos)}}function Bs(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function qs(e){return"string"==typeof e?Us.fromBase64String(e):Us.fromUint8Array(e)}function zs(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ws(e){var t=e.mapValue.fields.__previous_value__;return zs(t)?Ws(t):t}function Hs(e){var t=Ks(e.mapValue.fields.__local_write_time__.timestampValue);return new Xu(t.seconds,t.nanos)}var Gs=v((function e(t,n,r,i,a,o,u,s){d(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),Qs=function(){function e(t,n){d(this,e),this.projectId=t,this.database=n||"(default)"}return v(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function Ys(e){return null==e}function Xs(e){return 0===e&&1/e==-1/0}function Js(e){return"number"==typeof e&&Number.isInteger(e)&&!Xs(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var Zs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},$s={nullValue:"NULL_VALUE"};function ec(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?zs(e)?4:pc(e)?9007199254740991:10:Du()}function tc(e,t){if(e===t)return!0;var n=ec(e);if(n!==ec(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Hs(e).isEqual(Hs(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Ks(e.timestampValue),r=Ks(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return qs(e.bytesValue).isEqual(qs(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Bs(e.geoPointValue.latitude)===Bs(t.geoPointValue.latitude)&&Bs(e.geoPointValue.longitude)===Bs(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Bs(e.integerValue)===Bs(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Bs(e.doubleValue),r=Bs(t.doubleValue);return n===r?Xs(n)===Xs(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Qu(e.arrayValue.values||[],t.arrayValue.values||[],tc);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(As(n)!==As(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!tc(n[i],r[i])))return!1;return!0}(e,t);default:return Du()}}function nc(e,t){return void 0!==(e.values||[]).find((function(e){return tc(e,t)}))}function rc(e,t){if(e===t)return 0;var n=ec(e),r=ec(t);if(n!==r)return Gu(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Gu(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Bs(e.integerValue||e.doubleValue),r=Bs(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return ic(e.timestampValue,t.timestampValue);case 4:return ic(Hs(e),Hs(t));case 5:return Gu(e.stringValue,t.stringValue);case 6:return function(e,t){var n=qs(e),r=qs(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Gu(n[i],r[i]);if(0!==a)return a}return Gu(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Gu(Bs(e.latitude),Bs(t.latitude));return 0!==n?n:Gu(Bs(e.longitude),Bs(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=rc(n[i],r[i]);if(a)return a}return Gu(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Zs.mapValue&&t===Zs.mapValue)return 0;if(e===Zs.mapValue)return 1;if(t===Zs.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=Gu(r[o],a[o]);if(0!==u)return u;var s=rc(n[r[o]],i[a[o]]);if(0!==s)return s}return Gu(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Du()}}function ic(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Gu(e,t);var n=Ks(e),r=Ks(t),i=Gu(n.seconds,r.seconds);return 0!==i?i:Gu(n.nanos,r.nanos)}function ac(e){return oc(e)}function oc(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Ks(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?qs(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,ns.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=Me(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=oc(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=Me(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(oc(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Du();var t,n}function uc(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function sc(e){return!!e&&"integerValue"in e}function cc(e){return!!e&&"arrayValue"in e}function lc(e){return!!e&&"nullValue"in e}function hc(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function fc(e){return!!e&&"mapValue"in e}function dc(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Ns(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=dc(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=dc(e.arrayValue.values[r]);return n}return Object.assign({},e)}function pc(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function vc(e){return"nullValue"in e?$s:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?uc(Qs.empty(),ns.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Du()}function yc(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?uc(Qs.empty(),ns.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Zs:Du()}function gc(e,t){var n=rc(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function mc(e,t){var n=rc(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var kc=function(){function e(t){d(this,e),this.value=t}return v(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!fc(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=dc(t)}},{key:"setAll",value:function(e){var t=this,n=ts.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=dc(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());fc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return tc(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];fc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Ns(t,(function(t,n){return e[t]=n}));var r,i=Me(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(dc(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function wc(e){var t=[];return Ns(e.fields,(function(e,n){var r=new ts([e]);if(fc(n)){var i=wc(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=Me(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new js(t)}var bc=function(){function e(t,n,r,i,a,o){d(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return v(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=kc.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=kc.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=Ju.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Ju.min(),Ju.min(),kc.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,Ju.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Ju.min(),kc.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Ju.min(),kc.empty(),2)}}]),e}(),_c=v((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;d(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.ht=null}));function xc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new _c(e,t,n,r,i,a,o)}function Ic(e){var t=Ru(e);if(null===t.ht){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+ac(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Ys(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return ac(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return ac(e)})).join(",")),t.ht=n}return t.ht}function Ec(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Kc(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!tc(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!qc(e.startAt,t.startAt)&&qc(e.endAt,t.endAt)}function Sc(e){return ns.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Tc(e,t){return e.filters.filter((function(e){return e instanceof Nc&&e.field.isEqual(t)}))}function Cc(e,t,n){var r,i=$s,a=!0,o=Me(Tc(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=$s,c=!0;switch(u.op){case"<":case"<=":s=vc(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=$s}gc({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(f){o.e(f)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var h=n.position[l];gc({value:i,inclusive:a},{value:h,inclusive:n.inclusive})<0&&(i=h,a=n.inclusive);break}return{value:i,inclusive:a}}function Ac(e,t,n){var r,i=Zs,a=!0,o=Me(Tc(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Zs,c=!0;switch(u.op){case">=":case">":s=yc(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=Zs}mc({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(f){o.e(f)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var h=n.position[l];mc({value:i,inclusive:a},{value:h,inclusive:n.inclusive})>0&&(i=h,a=n.inclusive);break}return{value:i,inclusive:a}}var Nc=function(e){g(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return v(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(rc(t,this.value)):null!==t&&ec(this.value)===ec(t)&&this.ft(rc(t,this.value))}},{key:"ft",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Du()}}},{key:"dt",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new Dc(e,t,r):"array-contains"===t?new Lc(e,r):"in"===t?new Mc(e,r):"not-in"===t?new Fc(e,r):"array-contains-any"===t?new jc(e,r):new n(e,t,r)}},{key:"lt",value:function(e,t,n){return"in"===t?new Pc(e,n):new Rc(e,n)}}]),n}(function(){return v((function e(){d(this,e)}))}()),Dc=function(e){g(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,e,r,i)).key=ns.fromName(i.referenceValue),a}return v(n,[{key:"matches",value:function(e){var t=ns.comparator(e.key,this.key);return this.ft(t)}}]),n}(Nc),Pc=function(e){g(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,"in",r)).keys=Oc("in",r),i}return v(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Nc),Rc=function(e){g(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,"not-in",r)).keys=Oc("not-in",r),i}return v(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Nc);function Oc(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return ns.fromName(e.referenceValue)}))}var Lc=function(e){g(n,e);var t=x(n);function n(e,r){return d(this,n),t.call(this,e,"array-contains",r)}return v(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return cc(t)&&nc(t.arrayValue,this.value)}}]),n}(Nc),Mc=function(e){g(n,e);var t=x(n);function n(e,r){return d(this,n),t.call(this,e,"in",r)}return v(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&nc(this.value.arrayValue,t)}}]),n}(Nc),Fc=function(e){g(n,e);var t=x(n);function n(e,r){return d(this,n),t.call(this,e,"not-in",r)}return v(n,[{key:"matches",value:function(e){if(nc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!nc(this.value.arrayValue,t)}}]),n}(Nc),jc=function(e){g(n,e);var t=x(n);function n(e,r){return d(this,n),t.call(this,e,"array-contains-any",r)}return v(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!cc(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return nc(t.value.arrayValue,e)}))}}]),n}(Nc),Uc=v((function e(t,n){d(this,e),this.position=t,this.inclusive=n})),Vc=v((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";d(this,e),this.field=t,this.dir=n}));function Kc(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Bc(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?ns.comparator(ns.fromName(o.referenceValue),n.key):rc(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function qc(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!tc(e.position[n],t.position[n]))return!1;return!0}var zc=v((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;d(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this._t=null,this.wt=null,this.startAt,this.endAt}));function Wc(e,t,n,r,i,a,o,u){return new zc(e,t,n,r,i,a,o,u)}function Hc(e){return new zc(e)}function Gc(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Qc(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Yc(e){var t,n=Me(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.dt())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function Xc(e){return null!==e.collectionGroup}function Jc(e){var t=Ru(e);if(null===t._t){t._t=[];var n=Yc(t),r=Qc(t);if(null!==n&&null===r)n.isKeyField()||t._t.push(new Vc(n)),t._t.push(new Vc(ts.keyField(),"asc"));else{var i,a=!1,o=Me(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t._t.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t._t.push(new Vc(ts.keyField(),s))}}}return t._t}function Zc(e){var t=Ru(e);if(!t.wt)if("F"===t.limitType)t.wt=xc(t.path,t.collectionGroup,Jc(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=Me(Jc(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new Vc(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new Uc(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Uc(t.startAt.position,t.startAt.inclusive):null;t.wt=xc(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.wt}function $c(e,t,n){return new zc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function el(e,t){return Ec(Zc(e),Zc(t))&&e.limitType===t.limitType}function tl(e){return"".concat(Ic(Zc(e)),"|lt:").concat(e.limitType)}function nl(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(ac(t.value));var t})).join(", "),"]")),Ys(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return ac(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return ac(e)})).join(",")),"Target(".concat(t,")")}(Zc(e)),"; limitType=").concat(e.limitType,")")}function rl(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ns.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=Me(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=Me(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=Bc(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Jc(e),t))&&!(e.endAt&&!function(e,t,n){var r=Bc(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Jc(e),t))}(e,t)}function il(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function al(e){return function(t,n){var r,i=!1,a=Me(Jc(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=ol(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function ol(e,t,n){var r=e.field.isKeyField()?ns.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?rc(r,i):Du()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Du()}}function ul(e,t){if(e.gt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xs(t)?"-0":t}}function sl(e){return{integerValue:""+e}}function cl(e,t){return Js(t)?sl(t):ul(e,t)}var ll=v((function e(){d(this,e),this._=void 0}));function hl(e,t,n){return e instanceof pl?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof vl?yl(e,t):e instanceof gl?ml(e,t):function(e,t){var n=dl(e,t),r=wl(n)+wl(e.yt);return sc(n)&&sc(e.yt)?sl(r):ul(e.It,r)}(e,t)}function fl(e,t,n){return e instanceof vl?yl(e,t):e instanceof gl?ml(e,t):n}function dl(e,t){return e instanceof kl?sc(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var pl=function(e){g(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n)}(ll),vl=function(e){g(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).elements=e,r}return v(n)}(ll);function yl(e,t){var n,r=bl(t),i=Me(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return tc(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var gl=function(e){g(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).elements=e,r}return v(n)}(ll);function ml(e,t){var n,r=bl(t),i=Me(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!tc(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var kl=function(e){g(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).It=e,i.yt=r,i}return v(n)}(ll);function wl(e){return Bs(e.integerValue||e.doubleValue)}function bl(e){return cc(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var _l=v((function e(t,n){d(this,e),this.field=t,this.transform=n}));var xl=v((function e(t,n){d(this,e),this.version=t,this.transformResults=n})),Il=function(){function e(t,n){d(this,e),this.updateTime=t,this.exists=n}return v(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function El(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Sl=v((function e(){d(this,e)}));function Tl(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Ul(e.key,Il.none()):new Pl(e.key,e.data,Il.none());var n,r=e.data,i=kc.empty(),a=new Ls(ts.comparator),o=Me(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new Rl(e.key,i,new js(a.toArray()),Il.none())}function Cl(e,t,n){e instanceof Pl?function(e,t,n){var r=e.value.clone(),i=Ll(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Rl?function(e,t,n){if(El(e.precondition,t)){var r=Ll(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Ol(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Al(e,t,n,r){return e instanceof Pl?function(e,t,n,r){if(!El(e.precondition,t))return n;var i=e.value.clone(),a=Ml(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Rl?function(e,t,n,r){if(!El(e.precondition,t))return n;var i=Ml(e.fieldTransforms,r,t),a=t.data;return a.setAll(Ol(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return El(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Nl(e,t){var n,r=null,i=Me(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=dl(a.transform,o||null);null!=u&&(null===r&&(r=kc.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function Dl(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Qu(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof vl&&t instanceof vl||e instanceof gl&&t instanceof gl?Qu(e.elements,t.elements,tc):e instanceof kl&&t instanceof kl?tc(e.yt,t.yt):e instanceof pl&&t instanceof pl}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var Pl=function(e){g(n,e);var t=x(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return d(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return v(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Sl),Rl=function(e){g(n,e);var t=x(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return d(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return v(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(Sl);function Ol(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Ll(e,t,n){var r=new Map;Pu(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,fl(o,u,n[i]))}return r}function Ml(e,t,n){var r,i=new Map,a=Me(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,hl(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Fl,jl,Ul=function(e){g(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return v(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Sl),Vl=function(e){g(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return v(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Sl),Kl=v((function e(t){d(this,e),this.count=t}));function Bl(e){switch(e){default:return Du();case Ou.CANCELLED:case Ou.UNKNOWN:case Ou.DEADLINE_EXCEEDED:case Ou.RESOURCE_EXHAUSTED:case Ou.INTERNAL:case Ou.UNAVAILABLE:case Ou.UNAUTHENTICATED:return!1;case Ou.INVALID_ARGUMENT:case Ou.NOT_FOUND:case Ou.ALREADY_EXISTS:case Ou.PERMISSION_DENIED:case Ou.FAILED_PRECONDITION:case Ou.ABORTED:case Ou.OUT_OF_RANGE:case Ou.UNIMPLEMENTED:case Ou.DATA_LOSS:return!0}}function ql(e){if(void 0===e)return Cu("GRPC error has no .code"),Ou.UNKNOWN;switch(e){case Fl.OK:return Ou.OK;case Fl.CANCELLED:return Ou.CANCELLED;case Fl.UNKNOWN:return Ou.UNKNOWN;case Fl.DEADLINE_EXCEEDED:return Ou.DEADLINE_EXCEEDED;case Fl.RESOURCE_EXHAUSTED:return Ou.RESOURCE_EXHAUSTED;case Fl.INTERNAL:return Ou.INTERNAL;case Fl.UNAVAILABLE:return Ou.UNAVAILABLE;case Fl.UNAUTHENTICATED:return Ou.UNAUTHENTICATED;case Fl.INVALID_ARGUMENT:return Ou.INVALID_ARGUMENT;case Fl.NOT_FOUND:return Ou.NOT_FOUND;case Fl.ALREADY_EXISTS:return Ou.ALREADY_EXISTS;case Fl.PERMISSION_DENIED:return Ou.PERMISSION_DENIED;case Fl.FAILED_PRECONDITION:return Ou.FAILED_PRECONDITION;case Fl.ABORTED:return Ou.ABORTED;case Fl.OUT_OF_RANGE:return Ou.OUT_OF_RANGE;case Fl.UNIMPLEMENTED:return Ou.UNIMPLEMENTED;case Fl.DATA_LOSS:return Ou.DATA_LOSS;default:return Du()}}(jl=Fl||(Fl={}))[jl.OK=0]="OK",jl[jl.CANCELLED=1]="CANCELLED",jl[jl.UNKNOWN=2]="UNKNOWN",jl[jl.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",jl[jl.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",jl[jl.NOT_FOUND=5]="NOT_FOUND",jl[jl.ALREADY_EXISTS=6]="ALREADY_EXISTS",jl[jl.PERMISSION_DENIED=7]="PERMISSION_DENIED",jl[jl.UNAUTHENTICATED=16]="UNAUTHENTICATED",jl[jl.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",jl[jl.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",jl[jl.ABORTED=10]="ABORTED",jl[jl.OUT_OF_RANGE=11]="OUT_OF_RANGE",jl[jl.UNIMPLEMENTED=12]="UNIMPLEMENTED",jl[jl.INTERNAL=13]="INTERNAL",jl[jl.UNAVAILABLE=14]="UNAVAILABLE",jl[jl.DATA_LOSS=15]="DATA_LOSS";var zl=function(){function e(t,n){d(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return v(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=Me(n);try{for(i.s();!(r=i.n()).done;){var a=l(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Ns(this.inner,(function(t,n){var r,i=Me(n);try{for(i.s();!(r=i.n()).done;){var a=l(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Ds(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Wl=new Ps(ns.comparator);function Hl(){return Wl}var Gl=new Ps(ns.comparator);function Ql(){for(var e=Gl,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function Yl(e){var t=Gl;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function Xl(){return Zl()}function Jl(){return Zl()}function Zl(){return new zl((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var $l=new Ps(ns.comparator),eh=new Ls(ns.comparator);function th(){for(var e=eh,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var nh=new Ls(Gu);function rh(){return nh}var ih=function(){function e(t,n,r,i,a){d(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return v(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,ah.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(Ju.min(),r,rh(),Hl(),th())}}]),e}(),ah=function(){function e(t,n,r,i,a){d(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return v(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(Us.EMPTY_BYTE_STRING,n,th(),th(),th())}}]),e}(),oh=v((function e(t,n,r,i){d(this,e),this.Tt=t,this.removedTargetIds=n,this.key=r,this.Et=i})),uh=v((function e(t,n){d(this,e),this.targetId=t,this.At=n})),sh=v((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Us.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;d(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),ch=function(){function e(){d(this,e),this.Rt=0,this.bt=fh(),this.Pt=Us.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}return v(e,[{key:"current",get:function(){return this.vt}},{key:"resumeToken",get:function(){return this.Pt}},{key:"St",get:function(){return 0!==this.Rt}},{key:"Dt",get:function(){return this.Vt}},{key:"Ct",value:function(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}},{key:"xt",value:function(){var e=th(),t=th(),n=th();return this.bt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Du()}})),new ah(this.Pt,this.vt,e,t,n)}},{key:"Nt",value:function(){this.Vt=!1,this.bt=fh()}},{key:"kt",value:function(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}},{key:"Mt",value:function(e){this.Vt=!0,this.bt=this.bt.remove(e)}},{key:"Ot",value:function(){this.Rt+=1}},{key:"Ft",value:function(){this.Rt-=1}},{key:"$t",value:function(){this.Vt=!0,this.vt=!0}}]),e}(),lh=function(){function e(t){d(this,e),this.Bt=t,this.Lt=new Map,this.Ut=Hl(),this.qt=hh(),this.Kt=new Ls(Gu)}return v(e,[{key:"Gt",value:function(e){var t,n=Me(e.Tt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.Et&&e.Et.isFoundDocument()?this.Qt(r,e.Et):this.jt(r,e.key,e.Et)}}catch(u){n.e(u)}finally{n.f()}var i,a=Me(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.jt(o,e.key,e.Et)}}catch(u){a.e(u)}finally{a.f()}}},{key:"Wt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.zt(n);switch(e.state){case 0:t.Ht(n)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||t.removeTarget(n);break;case 3:t.Ht(n)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:t.Ht(n)&&(t.Jt(n),r.Ct(e.resumeToken));break;default:Du()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((function(e,r){n.Ht(r)&&t(r)}))}},{key:"Yt",value:function(e){var t=e.targetId,n=e.At.count,r=this.Xt(t);if(r){var i=r.target;if(Sc(i))if(0===n){var a=new ns(i.path);this.jt(t,a,bc.newNoDocument(a,Ju.min()))}else Pu(1===n);else this.Zt(t)!==n&&(this.Jt(t),this.Kt=this.Kt.add(t))}}},{key:"te",value:function(e){var t=this,n=new Map;this.Lt.forEach((function(r,i){var a=t.Xt(i);if(a){if(r.current&&Sc(a.target)){var o=new ns(a.target.path);null!==t.Ut.get(o)||t.ee(i,o)||t.jt(i,o,bc.newNoDocument(o,e))}r.Dt&&(n.set(i,r.xt()),r.Nt())}}));var r=th();this.qt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Xt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.Ut.forEach((function(t,n){return n.setReadTime(e)}));var i=new ih(e,n,this.Kt,this.Ut,r);return this.Ut=Hl(),this.qt=hh(),this.Kt=new Ls(Gu),i}},{key:"Qt",value:function(e,t){if(this.Ht(e)){var n=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,n),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}}},{key:"jt",value:function(e,t,n){if(this.Ht(e)){var r=this.zt(e);this.ee(e,t)?r.kt(t,1):r.Mt(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),n&&(this.Ut=this.Ut.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Lt.delete(e)}},{key:"Zt",value:function(e){var t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Ot",value:function(e){this.zt(e).Ot()}},{key:"zt",value:function(e){var t=this.Lt.get(e);return t||(t=new ch,this.Lt.set(e,t)),t}},{key:"ne",value:function(e){var t=this.qt.get(e);return t||(t=new Ls(Gu),this.qt=this.qt.insert(e,t)),t}},{key:"Ht",value:function(e){var t=null!==this.Xt(e);return t||Tu("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Xt",value:function(e){var t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}},{key:"Jt",value:function(e){var t=this;this.Lt.set(e,new ch),this.Bt.getRemoteKeysForTarget(e).forEach((function(n){t.jt(e,n,null)}))}},{key:"ee",value:function(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}]),e}();function hh(){return new Ps(ns.comparator)}function fh(){return new Ps(ns.comparator)}var dh={asc:"ASCENDING",desc:"DESCENDING"},ph={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vh=v((function e(t,n){d(this,e),this.databaseId=t,this.gt=n}));function yh(e,t){return e.gt?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function gh(e,t){return e.gt?t.toBase64():t.toUint8Array()}function mh(e,t){return yh(e,t.toTimestamp())}function kh(e){return Pu(!!e),Ju.fromTimestamp(function(e){var t=Ks(e);return new Xu(t.seconds,t.nanos)}(e))}function wh(e,t){return function(e){return new $u(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function bh(e){var t=$u.fromString(e);return Pu(zh(t)),t}function _h(e,t){return wh(e.databaseId,t.path)}function xh(e,t){var n=bh(t);if(n.get(1)!==e.databaseId.projectId)throw new Lu(Ou.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Lu(Ou.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ns(Th(n))}function Ih(e,t){return wh(e.databaseId,t)}function Eh(e){var t=bh(e);return 4===t.length?$u.emptyPath():Th(t)}function Sh(e){return new $u(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Th(e){return Pu(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Ch(e,t,n){return{name:_h(e,t),fields:n.value.mapValue.fields}}function Ah(e,t,n){var r=xh(e,t.name),i=kh(t.updateTime),a=new kc({mapValue:{fields:t.fields}}),o=bc.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Nh(e,t){return"found"in t?function(e,t){Pu(!!t.found),t.found.name,t.found.updateTime;var n=xh(e,t.found.name),r=kh(t.found.updateTime),i=new kc({mapValue:{fields:t.found.fields}});return bc.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){Pu(!!t.missing),Pu(!!t.readTime);var n=xh(e,t.missing),r=kh(t.readTime);return bc.newNoDocument(n,r)}(e,t):Du()}function Dh(e,t){var n;if(t instanceof Pl)n={update:Ch(e,t.key,t.value)};else if(t instanceof Ul)n={delete:_h(e,t.key)};else if(t instanceof Rl)n={update:Ch(e,t.key,t.data),updateMask:qh(t.fieldMask)};else{if(!(t instanceof Vl))return Du();n={verify:_h(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof pl)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof vl)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof gl)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof kl)return{fieldPath:t.field.canonicalString(),increment:n.yt};throw Du()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:mh(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Du()}(e,t.precondition)),n}function Ph(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Il.updateTime(kh(e.updateTime)):void 0!==e.exists?Il.exists(e.exists):Il.none()}(t.currentDocument):Il.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Pu("REQUEST_TIME"===t.setToServerValue),n=new pl;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new vl(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new gl(i)}else"increment"in t?n=new kl(e,t.increment):Du();var a=ts.fromServerFormat(t.fieldPath);return new _l(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=xh(e,t.update.name),a=new kc({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new js(t.map((function(e){return ts.fromServerFormat(e)})))}(t.updateMask);return new Rl(i,a,o,n,r)}return new Pl(i,a,n,r)}if(t.delete){var u=xh(e,t.delete);return new Ul(u,n)}if(t.verify){var s=xh(e,t.verify);return new Vl(s,n)}return Du()}function Rh(e,t){return{documents:[Ih(e,t.path)]}}function Oh(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Ih(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Ih(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(hc(e.value))return{unaryFilter:{field:Uh(e.field),op:"IS_NAN"}};if(lc(e.value))return{unaryFilter:{field:Uh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(hc(e.value))return{unaryFilter:{field:Uh(e.field),op:"IS_NOT_NAN"}};if(lc(e.value))return{unaryFilter:{field:Uh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Uh(e.field),op:jh(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Uh(e.field),direction:Fh(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.gt||Ys(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Lh(e){var t=Eh(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Pu(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=Mh(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new Vc(Vh(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return Ys(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Uc(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Uc(n,t)}(n.endAt)),Wc(t,i,u,o,s,"F",c,l)}function Mh(e){return e?void 0!==e.unaryFilter?[Bh(e)]:void 0!==e.fieldFilter?[Kh(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return Mh(e)})).reduce((function(e,t){return e.concat(t)})):Du():[]}function Fh(e){return dh[e]}function jh(e){return ph[e]}function Uh(e){return{fieldPath:e.canonicalString()}}function Vh(e){return ts.fromServerFormat(e.fieldPath)}function Kh(e){return Nc.create(Vh(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Du()}}(e.fieldFilter.op),e.fieldFilter.value)}function Bh(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Vh(e.unaryFilter.field);return Nc.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Vh(e.unaryFilter.field);return Nc.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Vh(e.unaryFilter.field);return Nc.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Vh(e.unaryFilter.field);return Nc.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Du()}}function qh(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function zh(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function Wh(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Gh(t)),t=Hh(e.get(n),t);return Gh(t)}function Hh(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function Gh(e){return e+"\x01\x01"}function Qh(e){var t=e.length;if(Pu(t>=2),2===t)return Pu("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),$u.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&Du(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:Du()}a=o+2}return new $u(r)}var Yh=["userId","batchId"];function Xh(e,t){return[e,Wh(t)]}function Jh(e,t,n){return[e,Wh(t),n]}var Zh={},$h=["prefixPath","collectionGroup","readTime","documentId"],ef=["prefixPath","collectionGroup","documentId"],tf=["collectionGroup","readTime","prefixPath","documentId"],nf=["canonicalId","targetId"],rf=["targetId","path"],af=["path","targetId"],of=["collectionId","parent"],uf=["indexId","uid"],sf=["uid","sequenceNumber"],cf=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],lf=["indexId","uid","orderedDocumentKey"],hf=["userId","collectionPath","documentId"],ff=["userId","collectionPath","largestBatchId"],df=["userId","collectionGroup","largestBatchId"],pf=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),vf=[].concat(f(pf),["documentOverlays"]),yf=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],gf=yf,mf=[].concat(gf,["indexConfiguration","indexState","indexEntries"]),kf=function(e){g(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).ie=e,i.currentSequenceNumber=r,i}return v(n)}(ds);function wf(e,t){var n=Ru(e);return ms.O(n.ie,t)}var bf=function(){function e(t,n,r,i){d(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return v(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Cl(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=Me(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=Al(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=Me(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=Al(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=Jl();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=Tl(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(Ju.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),th())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Qu(this.mutations,e.mutations,(function(e,t){return Dl(e,t)}))&&Qu(this.baseMutations,e.baseMutations,(function(e,t){return Dl(e,t)}))}}]),e}(),_f=function(){function e(t,n,r,i){d(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return v(e,null,[{key:"from",value:function(t,n,r){Pu(t.mutations.length===r.length);for(var i=$l,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),xf=function(){function e(t,n){d(this,e),this.largestBatchId=t,this.mutation=n}return v(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),If=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ju.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Ju.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Us.EMPTY_BYTE_STRING;d(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return v(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),Ef=v((function e(t){d(this,e),this.re=t}));function Sf(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Tf(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:_h(e,t.key),fields:t.data.value.mapValue.fields,updateTime:yh(e,t.version.toTimestamp())}}(e.re,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Cf(t.version)};else{if(!t.isUnknownDocument())return Du();r.unknownDocument={path:n.path.toArray(),version:Cf(t.version)}}return r}function Tf(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Cf(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Af(e){var t=new Xu(e.seconds,e.nanoseconds);return Ju.fromTimestamp(t)}function Nf(e,t){for(var n=(t.baseMutations||[]).map((function(t){return Ph(e.re,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return Ph(e.re,t)})),u=Xu.fromMillis(t.localWriteTimeMs);return new bf(t.batchId,u,n,o)}function Df(e){var t,n,r=Af(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?Af(e.lastLimboFreeSnapshotVersion):Ju.min();return void 0!==e.query.documents?(Pu(1===(n=e.query).documents.length),t=Zc(Hc(Eh(n.documents[0])))):t=function(e){return Zc(Lh(e))}(e.query),new If(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Us.fromBase64String(e.resumeToken))}function Pf(e,t){var n,r=Cf(t.snapshotVersion),i=Cf(t.lastLimboFreeSnapshotVersion);n=Sc(t.target)?Rh(e.re,t.target):Oh(e.re,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Ic(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function Rf(e){var t=Lh({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?$c(t,t.limit,"L"):t}function Of(e,t){return new xf(t.largestBatchId,Ph(e.re,t.overlayMutation))}function Lf(e,t){var n=t.path.lastSegment();return[e,Wh(t.path.popLast()),n]}function Mf(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Cf(r.readTime),documentKey:Wh(r.documentKey.path),largestBatchId:r.largestBatchId}}var Ff=function(){function e(){d(this,e)}return v(e,[{key:"getBundleMetadata",value:function(e,t){return jf(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:Af(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return jf(e).put({bundleId:(n=t).id,createTime:Cf(kh(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return Uf(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:Rf(t.bundledQuery),readTime:Af(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return Uf(e).put(function(e){return{name:e.name,readTime:Cf(kh(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function jf(e){return wf(e,"bundles")}function Uf(e){return wf(e,"namedQueries")}var Vf=function(){function e(t,n){d(this,e),this.It=t,this.userId=n}return v(e,[{key:"getOverlay",value:function(e,t){var n=this;return Kf(e).get(Lf(this.userId,t)).next((function(e){return e?Of(n.It,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=Xl();return ys.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new xf(t,a);i.push(r.ue(e,o))})),ys.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(Wh(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(Kf(e).Y("collectionPathOverlayIndex",i))})),ys.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=Xl(),a=Wh(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Kf(e).W("collectionPathOverlayIndex",o).next((function(e){var t,n=Me(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=Of(r.It,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=Xl(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Kf(e).Z({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=Of(a.It,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"ue",value:function(e,t){return Kf(e).put(function(e,t,n){var r=l(Lf(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Dh(e.re,n.mutation)}}(this.It,this.userId,t))}}],[{key:"oe",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function Kf(e){return wf(e,"documentOverlays")}var Bf=function(){function e(){d(this,e)}return v(e,[{key:"ce",value:function(e,t){this.ae(e,t),t.he()}},{key:"ae",value:function(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(Bs(e.integerValue));else if("doubleValue"in e){var n=Bs(e.doubleValue);isNaN(n)?this.le(t,13):(this.le(t,15),Xs(n)?t.fe(0):t.fe(n))}else if("timestampValue"in e){var r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de("".concat(r.seconds||"")),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(qs(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.le(t,45),t.fe(i.latitude||0),t.fe(i.longitude||0)}else"mapValue"in e?pc(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):Du()}},{key:"_e",value:function(e,t){this.le(t,25),this.Ie(e,t)}},{key:"Ie",value:function(e,t){t.de(e)}},{key:"ye",value:function(e,t){var n=e.fields||{};this.le(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this._e(a,t),this.ae(n[a],t)}}},{key:"pe",value:function(e,t){var n=e.values||[];this.le(t,50);var r,i=Me(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.ae(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ge",value:function(e,t){var n=this;this.le(t,37),ns.fromName(e).path.forEach((function(e){n.le(t,60),n.Ie(e,t)}))}},{key:"le",value:function(e,t){e.fe(t)}},{key:"we",value:function(e){e.fe(2)}}]),e}();function qf(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function zf(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=qf(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Bf.Te=new Bf;var Wf=function(){function e(){d(this,e),this.buffer=new Uint8Array(1024),this.position=0}return v(e,[{key:"Ee",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ae(n.value),n=t.next();this.Re()}},{key:"be",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Pe(n.value),n=t.next();this.ve()}},{key:"Ve",value:function(e){var t,n=Me(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ae(i);else if(i<2048)this.Ae(960|i>>>6),this.Ae(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ae(480|i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i);else{var a=r.codePointAt(0);this.Ae(240|a>>>18),this.Ae(128|63&a>>>12),this.Ae(128|63&a>>>6),this.Ae(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Re()}},{key:"Se",value:function(e){var t,n=Me(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Pe(i);else if(i<2048)this.Pe(960|i>>>6),this.Pe(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Pe(480|i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i);else{var a=r.codePointAt(0);this.Pe(240|a>>>18),this.Pe(128|63&a>>>12),this.Pe(128|63&a>>>6),this.Pe(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ve()}},{key:"De",value:function(e){var t=this.Ce(e),n=zf(t);this.xe(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Ne",value:function(e){var t=this.Ce(e),n=zf(t);this.xe(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"ke",value:function(){this.Me(255),this.Me(255)}},{key:"Oe",value:function(){this.Fe(255),this.Fe(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"$e",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ce",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Ae",value:function(e){var t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}},{key:"Pe",value:function(e){var t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}},{key:"Re",value:function(){this.Me(0),this.Me(1)}},{key:"ve",value:function(){this.Fe(0),this.Fe(1)}},{key:"Me",value:function(e){this.xe(1),this.buffer[this.position++]=e}},{key:"Fe",value:function(e){this.xe(1),this.buffer[this.position++]=~e}},{key:"xe",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),Hf=function(){function e(t){d(this,e),this.Be=t}return v(e,[{key:"me",value:function(e){this.Be.Ee(e)}},{key:"de",value:function(e){this.Be.Ve(e)}},{key:"fe",value:function(e){this.Be.De(e)}},{key:"he",value:function(){this.Be.ke()}}]),e}(),Gf=function(){function e(t){d(this,e),this.Be=t}return v(e,[{key:"me",value:function(e){this.Be.be(e)}},{key:"de",value:function(e){this.Be.Se(e)}},{key:"fe",value:function(e){this.Be.Ne(e)}},{key:"he",value:function(){this.Be.Oe()}}]),e}(),Qf=function(){function e(){d(this,e),this.Be=new Wf,this.Le=new Hf(this.Be),this.Ue=new Gf(this.Be)}return v(e,[{key:"seed",value:function(e){this.Be.seed(e)}},{key:"qe",value:function(e){return 0===e?this.Le:this.Ue}},{key:"$e",value:function(){return this.Be.$e()}},{key:"reset",value:function(){this.Be.reset()}}]),e}(),Yf=function(){function e(t,n,r,i){d(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return v(e,[{key:"Ke",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function Xf(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=Jf(e.arrayValue,t.arrayValue))?n:0!==(n=Jf(e.directionalValue,t.directionalValue))?n:ns.comparator(e.documentKey,t.documentKey)}function Jf(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var Zf=function(){function e(t){d(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ge=t.orderBy,this.Qe=[];var n,r=Me(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.dt()?this.je=i:this.Qe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return v(e,[{key:"We",value:function(e){var t=is(e);if(void 0!==t&&!this.ze(t))return!1;for(var n=as(e),r=0,i=0;r<n.length&&this.ze(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.je){var a=n[r];if(!this.He(this.je,a)||!this.Je(this.Ge[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Ge.length||!this.Je(this.Ge[i++],o))return!1}return!0}},{key:"ze",value:function(e){var t,n=Me(this.Qe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.He(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"He",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"Je",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),$f=function(){function e(){d(this,e),this.Ye=new ed}return v(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.Ye.add(t),ys.resolve()}},{key:"getCollectionParents",value:function(e,t){return ys.resolve(this.Ye.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return ys.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return ys.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return ys.resolve(null)}},{key:"getIndexType",value:function(e,t){return ys.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return ys.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return ys.resolve(null)}},{key:"getMinOffset",value:function(e,t){return ys.resolve(ls.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return ys.resolve(ls.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return ys.resolve()}},{key:"updateIndexEntries",value:function(e,t){return ys.resolve()}}]),e}(),ed=function(){function e(){d(this,e),this.index={}}return v(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Ls($u.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Ls($u.comparator)).toArray()}}]),e}(),td=new Uint8Array(0),nd=function(){function e(t,n){d(this,e),this.user=t,this.databaseId=n,this.Xe=new ed,this.Ze=new zl((function(e){return Ic(e)}),(function(e,t){return Ec(e,t)})),this.uid=t.uid||""}return v(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Xe.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Xe.add(t)}));var a={collectionId:r,parent:Wh(i)};return rd(e).put(a)}return ys.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Yu(t),""],!1,!0);return rd(e).W(r).next((function(e){var r,i=Me(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(Qh(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=ad(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=od(e);return a.next((function(e){o.put(Mf(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=ad(e),r=od(e),i=id(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=id(e),i=!0,a=new Map;return ys.forEach(this.tn(t),(function(t){return n.en(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=th(),o=[];return ys.forEach(a,(function(i,a){var u;Tu("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(Ic(t)));var s=function(e,t){var n=is(t);if(void 0===n)return null;var r,i=Me(Tc(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=Me(as(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=Me(Tc(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=Me(as(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Cc(e,o.fieldPath,e.startAt):Ac(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Uc(r,i)}(a,i),h=function(e,t){var n,r=[],i=!0,a=Me(as(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Ac(e,o.fieldPath,e.endAt):Cc(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Uc(r,i)}(a,i),f=n.nn(i,a,l),d=n.nn(i,a,h),p=n.sn(i,a,c),v=n.rn(i.indexId,s,f,l.inclusive,d,h.inclusive,p);return ys.forEach(v,(function(n){return r.J(n,t.limit).next((function(t){t.forEach((function(t){var n=ns.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return ys.resolve(null)}))}},{key:"tn",value:function(e){var t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}},{key:"rn",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],h=function(s){var h=t?u.on(t[s/c]):td,d=u.un(e,h,n[s%c],r),p=u.cn(e,h,i[s%c],a),v=o.map((function(t){return u.un(e,h,t,!0)}));l.push.apply(l,f(u.createRange(d,p,v)))},d=0;d<s;++d)h(d);return l}},{key:"un",value:function(e,t,n,r){var i=new Yf(e,ns.empty(),t,n);return r?i:i.Ke()}},{key:"cn",value:function(e,t,n,r){var i=new Yf(e,ns.empty(),t,n);return r?i.Ke():i}},{key:"en",value:function(e,t){var n=new Zf(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=Me(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.We(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2;return ys.forEach(this.tn(t),(function(t){return n.en(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new Ls(ts.comparator),r=!1,i=Me(e.filters);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.field.isKeyField()||("array-contains"===a.op||"array-contains-any"===a.op?r=!0:n=n.add(a.field))}}catch(c){i.e(c)}finally{i.f()}var o,u=Me(e.orderBy);try{for(u.s();!(o=u.n()).done;){var s=o.value;s.field.isKeyField()||(n=n.add(s.field))}}catch(c){u.e(c)}finally{u.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return r}))}},{key:"an",value:function(e,t){var n,r=new Qf,i=Me(as(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.qe(a.kind);Bf.Te.ce(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.$e()}},{key:"on",value:function(e){var t=new Qf;return Bf.Te.ce(e,t.qe(0)),t.$e()}},{key:"hn",value:function(e,t){var n=new Qf;return Bf.Te.ce(uc(this.databaseId,t),n.qe(function(e){var t=as(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.$e()}},{key:"sn",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new Qf);var i,a=0,o=Me(as(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=Me(r);try{for(l.s();!(u=l.n()).done;){var h=u.value;if(this.ln(t,s.fieldPath)&&cc(c))r=this.fn(r,s,c);else{var f=h.qe(s.kind);Bf.Te.ce(c,f)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.dn(r)}},{key:"nn",value:function(e,t,n){return this.sn(e,t,n.position)}},{key:"dn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].$e();return t}},{key:"fn",value:function(e,t,n){var r,i=f(e),a=[],o=Me(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=Me(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,h=new Qf;h.seed(l.$e()),Bf.Te.ce(s,h.qe(t.kind)),a.push(h)}}catch(d){c.e(d)}finally{c.f()}}}catch(d){o.e(d)}finally{o.f()}return a}},{key:"ln",value:function(e,t){return!!e.filters.find((function(e){return e instanceof Nc&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=ad(e),i=od(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next((function(e){var t=[];return ys.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new us(t.sequenceNumber,new ls(Af(t.readTime),new ns(Qh(t.documentKey)),t.largestBatchId)):us.empty(),r=e.fields.map((function(e){var t=l(e,2),n=t[0],r=t[1];return new os(ts.fromServerFormat(n),r)}));return new rs(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Gu(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=ad(e),a=od(e);return this._n(e).next((function(e){return i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return ys.forEach(t,(function(t){return a.put(Mf(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return ys.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?ys.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),ys.forEach(a,(function(r){return n.wn(e,t,r).next((function(t){var a=n.mn(i,r);return t.isEqual(a)?ys.resolve():n.gn(e,i,r,t,a)}))}))}))}))}},{key:"yn",value:function(e,t,n,r){return id(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.hn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"pn",value:function(e,t,n,r){return id(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.hn(n,t.key),t.key.path.toArray()])}},{key:"wn",value:function(e,t,n){var r=id(e),i=new Ls(Xf);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.hn(n,t)])},(function(e,r){i=i.add(new Yf(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"mn",value:function(e,t){var n=new Ls(Xf),r=this.an(t,e);if(null==r)return n;var i=is(t);if(null!=i){var a=e.data.field(i.fieldPath);if(cc(a)){var o,u=Me(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new Yf(t.indexId,e.key,this.on(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new Yf(t.indexId,e.key,td,r));return n}},{key:"gn",value:function(e,t,n,r,i){var a=this;Tu("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=Fs(a),s=Fs(o);u||s;){var c=!1,l=!1;if(u&&s){var h=n(u,s);h<0?l=!0:h>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=Fs(o)):l?(i(u),u=Fs(a)):(u=Fs(a),s=Fs(o))}}(r,i,Xf,(function(r){o.push(a.yn(e,t,n,r))}),(function(r){o.push(a.pn(e,t,n,r))})),ys.waitFor(o)}},{key:"_n",value:function(e){var t=1;return od(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return Xf(e,t)})).filter((function(e,t,n){return!t||0!==Xf(e,n[t-1])}));var r=[];r.push(e);var i,a=Me(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=Xf(o,e),s=Xf(o,t);if(0===u)r[0]=e.Ke();else if(u>0&&s<0)r.push(o),r.push(o.Ke());else if(s>0)break}}catch(h){a.e(h)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,td,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,td,[]]));return c}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(ud)}},{key:"getMinOffset",value:function(e,t){var n=this;return ys.mapArray(this.tn(t),(function(t){return n.en(e,t).next((function(e){return e||Du()}))})).next(ud)}}]),e}();function rd(e){return wf(e,"collectionParents")}function id(e){return wf(e,"indexEntries")}function ad(e){return wf(e,"indexConfiguration")}function od(e){return wf(e,"indexState")}function ud(e){Pu(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;hs(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new ls(t.readTime,t.documentKey,n)}var sd={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},cd=function(){function e(t,n,r){d(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return v(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function ld(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Z({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){Pu(1===u)})));var c,l=[],h=Me(n.mutations);try{for(h.s();!(c=h.n()).done;){var f=c.value,d=Jh(t,f.key.path,n.batchId);a.push(i.delete(d)),l.push(f.key)}}catch(p){h.e(p)}finally{h.f()}return ys.waitFor(a).next((function(){return l}))}function hd(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Du();t=e.noDocument}return JSON.stringify(t).length}cd.DEFAULT_COLLECTION_PERCENTILE=10,cd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cd.DEFAULT=new cd(41943040,cd.DEFAULT_COLLECTION_PERCENTILE,cd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cd.DISABLED=new cd(-1,0,0);var fd=function(){function e(t,n,r,i){d(this,e),this.userId=t,this.It=n,this.indexManager=r,this.referenceDelegate=i,this.In={}}return v(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return pd(e).Z({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=vd(e),o=pd(e);return o.add({}).next((function(u){Pu("number"==typeof u);var s,c=new bf(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return Dh(e.re,t)})),i=n.mutations.map((function(t){return Dh(e.re,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.It,i.userId,c),h=[],f=new Ls((function(e,t){return Gu(e.canonicalString(),t.canonicalString())})),d=Me(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=Jh(i.userId,p.key.path,u);f=f.add(p.key.path.popLast()),h.push(o.put(l)),h.push(a.put(v,Zh))}}catch(y){d.e(y)}finally{d.f()}return f.forEach((function(t){h.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.In[u]=c.keys()})),ys.waitFor(h).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return pd(e).get(t).next((function(e){return e?(Pu(e.userId===n.userId),Nf(n.It,e)):null}))}},{key:"Tn",value:function(e,t){var n=this;return this.In[t]?ys.resolve(this.In[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.In[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return pd(e).Z({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(Pu(t.batchId>=r),a=Nf(n.It,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return pd(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return pd(e).W("userMutationsIndex",n).next((function(e){return e.map((function(e){return Nf(t.It,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=Xh(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return vd(e).Z({range:i},(function(r,i,o){var u=l(r,3),s=u[0],c=u[1],h=u[2],f=Qh(c);if(s===n.userId&&t.path.isEqual(f))return pd(e).get(h).next((function(e){if(!e)throw Du();Pu(e.userId===n.userId),a.push(Nf(n.It,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Ls(Gu),i=[];return t.forEach((function(t){var a=Xh(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=vd(e).Z({range:o},(function(e,i,a){var o=l(e,3),u=o[0],s=o[1],c=o[2],h=Qh(s);u===n.userId&&t.path.isEqual(h)?r=r.add(c):a.done()}));i.push(u)})),ys.waitFor(i).next((function(){return n.En(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=Xh(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new Ls(Gu);return vd(e).Z({range:o},(function(e,t,a){var o=l(e,3),s=o[0],c=o[1],h=o[2],f=Qh(c);s===n.userId&&r.isPrefixOf(f)?f.length===i&&(u=u.add(h)):a.done()})).next((function(){return n.En(e,u)}))}},{key:"En",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(pd(e).get(t).next((function(e){if(null===e)throw Du();Pu(e.userId===n.userId),r.push(Nf(n.It,e))})))})),ys.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return ld(e.ie,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.An(t.batchId)})),ys.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"An",value:function(e){delete this.In[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return ys.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return vd(e).Z({range:r},(function(e,n,r){if(e[0]===t.userId){var a=Qh(e[1]);i.push(a)}else r.done()})).next((function(){Pu(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return dd(e,this.userId,t)}},{key:"Rn",value:function(e){var t=this;return yd(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"oe",value:function(t,n,r,i){return Pu(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function dd(e,t,n){var r=Xh(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return vd(e).Z({range:a,X:!0},(function(e,n,r){var a=l(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function pd(e){return wf(e,"mutations")}function vd(e){return wf(e,"documentMutations")}function yd(e){return wf(e,"mutationQueues")}var gd=function(){function e(t){d(this,e),this.bn=t}return v(e,[{key:"next",value:function(){return this.bn+=2,this.bn}}],[{key:"Pn",value:function(){return new e(0)}},{key:"vn",value:function(){return new e(-1)}}]),e}(),md=function(){function e(t,n){d(this,e),this.referenceDelegate=t,this.It=n}return v(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Vn(e).next((function(n){var r=new gd(n.highestTargetId);return n.highestTargetId=r.next(),t.Sn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Vn(e).next((function(e){return Ju.fromTimestamp(new Xu(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.Vn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Vn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Sn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Dn(e,t).next((function(){return n.Vn(e).next((function(r){return r.targetCount+=1,n.Cn(t,r),n.Sn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Dn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return kd(e).delete(t.targetId)})).next((function(){return n.Vn(e)})).next((function(t){return Pu(t.targetCount>0),t.targetCount-=1,n.Sn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return kd(e).Z((function(o,u){var s=Df(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return ys.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return kd(e).Z((function(e,n){var r=Df(n);t(r)}))}},{key:"Vn",value:function(e){return wd(e).get("targetGlobalKey").next((function(e){return Pu(null!==e),e}))}},{key:"Sn",value:function(e,t){return wd(e).put("targetGlobalKey",t)}},{key:"Dn",value:function(e,t){return kd(e).put(Pf(this.It,t))}},{key:"Cn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Vn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=Ic(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return kd(e).Z({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=Df(n);Ec(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=bd(e);return t.forEach((function(t){var o=Wh(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),ys.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=bd(e);return ys.forEach(t,(function(t){var a=Wh(t.path);return ys.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=bd(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=bd(e),i=th();return r.Z({range:n,X:!0},(function(e,t,n){var r=Qh(e[1]),a=new ns(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=Wh(t.path),r=IDBKeyRange.bound([n],[Yu(n)],!1,!0),i=0;return bd(e).Z({index:"documentTargetsIndex",X:!0,range:r},(function(e,t,n){var r=l(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"se",value:function(e,t){return kd(e).get(t).next((function(e){return e?Df(e):null}))}}]),e}();function kd(e){return wf(e,"targets")}function wd(e){return wf(e,"targetGlobal")}function bd(e){return wf(e,"targetDocuments")}function _d(e,t){var n=l(e,2),r=n[0],i=n[1],a=l(t,2),o=a[0],u=a[1],s=Gu(r,o);return 0===s?Gu(i,u):s}var xd=function(){function e(t){d(this,e),this.xn=t,this.buffer=new Ls(_d),this.Nn=0}return v(e,[{key:"kn",value:function(){return++this.Nn}},{key:"Mn",value:function(e){var t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();_d(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),Id=function(){function e(t,n,r){d(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.On=null}return v(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}},{key:"stop",value:function(){this.On&&(this.On.cancel(),this.On=null)}},{key:"started",get:function(){return null!==this.On}},{key:"Fn",value:function(e){var t=this;Tu("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,Pt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.On=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!bs(e.t0)){e.next=12;break}Tu("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,ps(e.t0);case 14:return e.next=16,t.Fn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),Ed=function(){function e(t,n){d(this,e),this.$n=t,this.params=n}return v(e,[{key:"calculateTargetCount",value:function(e,t){return this.$n.Bn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return ys.resolve(Cs.at);var r=new xd(t);return this.$n.forEachTarget(e,(function(e){return r.Mn(e.sequenceNumber)})).next((function(){return n.$n.Ln(e,(function(e){return r.Mn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.$n.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.$n.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Tu("LruGarbageCollector","Garbage collection skipped; disabled"),ys.resolve(sd)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Tu("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),sd):n.Un(e,t)}))}},{key:"getCacheSize",value:function(e){return this.$n.getCacheSize(e)}},{key:"Un",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(Tu("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),Su()<=Ft.DEBUG&&Tu("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),ys.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),Sd=function(){function e(t,n){d(this,e),this.db=t,this.garbageCollector=function(e,t){return new Ed(e,t)}(this,n)}return v(e,[{key:"Bn",value:function(e){var t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"qn",value:function(e){var t=0;return this.Ln(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Ln",value:function(e,t){return this.Kn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return Td(e,n)}},{key:"removeReference",value:function(e,t,n){return Td(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return Td(e,t)}},{key:"Gn",value:function(e,t){return function(e,t){var n=!1;return yd(e).tt((function(r){return dd(e,r,t).next((function(e){return e&&(n=!0),ys.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Kn(e,(function(o,u){if(u<=t){var s=n.Gn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Ju.min()),bd(e).delete([0,Wh(o.path)])}))}));i.push(s)}})).next((function(){return ys.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return Td(e,t)}},{key:"Kn",value:function(e,t){var n,r=bd(e),i=Cs.at;return r.Z({index:"documentTargetsIndex"},(function(e,r){var a=l(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==Cs.at&&t(new ns(Qh(n)),i),i=s,n=u):i=Cs.at})).next((function(){i!==Cs.at&&t(new ns(Qh(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function Td(e,t){return bd(e).put(function(e,t){return{targetId:0,path:Wh(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var Cd=function(){function e(){d(this,e),this.changes=new zl((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return v(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,bc.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?ys.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),Ad=function(){function e(t){d(this,e),this.It=t}return v(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return Rd(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return Rd(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Tf(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Qn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=bc.newInvalidDocument(t);return Rd(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Od(t))},(function(e,i){r=n.jn(t,i)})).next((function(){return r}))}},{key:"Wn",value:function(e,t){var n=this,r={size:0,document:bc.newInvalidDocument(t)};return Rd(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Od(t))},(function(e,i){r={document:n.jn(t,i),size:hd(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=Hl();return this.zn(e,t,(function(e,t){var i=n.jn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Hn",value:function(e,t){var n=this,r=Hl(),i=new Ps(ns.comparator);return this.zn(e,t,(function(e,t){var a=n.jn(e,t);r=r.insert(e,a),i=i.insert(e,hd(t))})).next((function(){return{documents:r,Jn:i}}))}},{key:"zn",value:function(e,t,n){if(t.isEmpty())return ys.resolve();var r=new Ls(Md);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(Od(r.first()),Od(r.last())),a=r.getIterator(),o=a.getNext();return Rd(e).Z({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=ns.fromSegments([].concat(f(t.prefixPath),[t.collectionGroup,t.documentId]));o&&Md(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.j(Od(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),Tf(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Rd(e).W(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=Hl(),i=Me(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.jn(ns.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(u){i.e(u)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=Hl(),o=Ld(t,n),u=Ld(t,ls.max());return Rd(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.jn(ns.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new Dd(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return Pd(e).get("remoteDocumentGlobalKey").next((function(e){return Pu(!!e),e}))}},{key:"Qn",value:function(e,t){return Pd(e).put("remoteDocumentGlobalKey",t)}},{key:"jn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=Ah(e.re,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=ns.fromSegments(t.noDocument.path),i=Af(t.noDocument.readTime);n=bc.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Du();var a=ns.fromSegments(t.unknownDocument.path),o=Af(t.unknownDocument.version);n=bc.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new Xu(e[0],e[1]);return Ju.fromTimestamp(t)}(t.readTime)),n}(this.It,t);if(!n.isNoDocument()||!n.version.isEqual(Ju.min()))return n}return bc.newInvalidDocument(e)}}]),e}();function Nd(e){return new Ad(e)}var Dd=function(e){g(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).Yn=e,i.trackRemovals=r,i.Xn=new zl((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return v(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Ls((function(e,t){return Gu(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Xn.get(a);if(n.push(t.Yn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=Sf(t.Yn.It,o);i=i.add(a.path.popLast());var c=hd(s);r+=c-u.size,n.push(t.Yn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=Sf(t.Yn.It,o.convertToNoDocument(Ju.min()));n.push(t.Yn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.Yn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Yn.updateMetadata(e,r)),ys.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Yn.Wn(e,t).next((function(e){return n.Xn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Yn.Hn(e,t).next((function(e){var t=e.documents;return e.Jn.forEach((function(e,r){n.Xn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(Cd);function Pd(e){return wf(e,"remoteDocumentGlobal")}function Rd(e){return wf(e,"remoteDocumentsV14")}function Od(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Ld(e,t){var n=t.documentKey.path.toArray();return[e,Tf(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Md(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Gu(n[a],r[a]))return i;return(i=Gu(n.length,r.length))||((i=Gu(n[n.length-2],r[r.length-2]))||Gu(n[n.length-1],r[r.length-1]))}var Fd=v((function e(t,n){d(this,e),this.overlayedDocument=t,this.mutatedFields=n})),jd=function(){function e(t,n,r,i){d(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return v(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.getBaseDocument(e,t,r)})).next((function(e){return null!==r&&Al(r.mutation,e,js.empty(),Xu.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,th()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:th(),i=Xl();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=Ql();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=Xl();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,th())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=Hl(),a=Zl(),o=Zl();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Rl)?i=i.insert(t.key,t):void 0!==o&&(a.set(t.key,o.mutation.getFieldMask()),Al(o.mutation,t,o.mutation.getFieldMask(),Xu.now()))})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new Fd(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=Zl(),i=new Ps((function(e,t){return e-t})),a=th();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=Me(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||js.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||th()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=Jl();c.forEach((function(e){if(!a.has(e)){var n=Tl(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return ys.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return ns.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Xc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):ys.resolve(Xl()),u=-1,s=a;return o.next((function(t){return ys.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?ys.resolve():i.getBaseDocument(e,t,n).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,th())})).next((function(e){return{batchId:u,changes:Yl(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new ns(t)).next((function(e){var t=Ql();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=Ql();return this.indexManager.getCollectionParents(e,i).next((function(o){return ys.forEach(o,(function(o){var u=function(e,t){return new zc(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.remoteDocumentCache.getAllFromCollection(e,t.path,n).next((function(a){return r=a,i.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId)})).next((function(e){e.forEach((function(e,t){var n=t.getKey();null===r.get(n)&&(r=r.insert(n,bc.newInvalidDocument(n)))}));var n=Ql();return r.forEach((function(r,i){var a=e.get(r);void 0!==a&&Al(a.mutation,i,js.empty(),Xu.now()),rl(t,i)&&(n=n.insert(r,i))})),n}))}},{key:"getBaseDocument",value:function(e,t,n){return null===n||1===n.mutation.type?this.remoteDocumentCache.getEntry(e,t):ys.resolve(bc.newInvalidDocument(t))}}]),e}(),Ud=function(){function e(t){d(this,e),this.It=t,this.Zn=new Map,this.ts=new Map}return v(e,[{key:"getBundleMetadata",value:function(e,t){return ys.resolve(this.Zn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Zn.set(t.id,{id:(n=t).id,version:n.version,createTime:kh(n.createTime)}),ys.resolve()}},{key:"getNamedQuery",value:function(e,t){return ys.resolve(this.ts.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.ts.set(t.name,function(e){return{name:e.name,query:Rf(e.bundledQuery),readTime:kh(e.readTime)}}(t)),ys.resolve()}}]),e}(),Vd=function(){function e(){d(this,e),this.overlays=new Ps(ns.comparator),this.es=new Map}return v(e,[{key:"getOverlay",value:function(e,t){return ys.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=Xl();return ys.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.ue(e,t,i)})),ys.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.es.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.es.delete(n)),ys.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Xl(),i=t.length+1,a=new ns(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return ys.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Ps((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=Xl(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=Xl(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return ys.resolve(s)}},{key:"ue",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.es.get(r.largestBatchId).delete(n.key);this.es.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new xf(t,n));var a=this.es.get(t);void 0===a&&(a=th(),this.es.set(t,a)),this.es.set(t,a.add(n.key))}}]),e}(),Kd=function(){function e(){d(this,e),this.ns=new Ls(Bd.ss),this.rs=new Ls(Bd.os)}return v(e,[{key:"isEmpty",value:function(){return this.ns.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Bd(e,t);this.ns=this.ns.add(n),this.rs=this.rs.add(n)}},{key:"us",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.cs(new Bd(e,t))}},{key:"hs",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"ls",value:function(e){var t=this,n=new ns(new $u([])),r=new Bd(n,e),i=new Bd(n,e+1),a=[];return this.rs.forEachInRange([r,i],(function(e){t.cs(e),a.push(e.key)})),a}},{key:"fs",value:function(){var e=this;this.ns.forEach((function(t){return e.cs(t)}))}},{key:"cs",value:function(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}},{key:"ds",value:function(e){var t=new ns(new $u([])),n=new Bd(t,e),r=new Bd(t,e+1),i=th();return this.rs.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Bd(e,0),n=this.ns.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Bd=function(){function e(t,n){d(this,e),this.key=t,this._s=n}return v(e,null,[{key:"ss",value:function(e,t){return ns.comparator(e.key,t.key)||Gu(e._s,t._s)}},{key:"os",value:function(e,t){return Gu(e._s,t._s)||ns.comparator(e.key,t.key)}}]),e}(),qd=function(){function e(t,n){d(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this.gs=new Ls(Bd.ss)}return v(e,[{key:"checkEmpty",value:function(e){return ys.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new bf(i,t,n,r);this.mutationQueue.push(a);var o,u=Me(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.gs=this.gs.add(new Bd(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return ys.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return ys.resolve(this.ys(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ps(n),i=r<0?0:r;return ys.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return ys.resolve(0===this.mutationQueue.length?-1:this.ws-1)}},{key:"getAllMutationBatches",value:function(e){return ys.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Bd(t,0),i=new Bd(t,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([r,i],(function(e){var t=n.ys(e._s);a.push(t)})),ys.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Ls(Gu);return t.forEach((function(e){var t=new Bd(e,0),i=new Bd(e,Number.POSITIVE_INFINITY);n.gs.forEachInRange([t,i],(function(e){r=r.add(e._s)}))})),ys.resolve(this.Is(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;ns.isDocumentKey(i)||(i=i.child(""));var a=new Bd(new ns(i),0),o=new Ls(Gu);return this.gs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e._s)),!0)}),a),ys.resolve(this.Is(o))}},{key:"Is",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.ys(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Pu(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();var r=this.gs;return ys.forEach(t.mutations,(function(i){var a=new Bd(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.gs=r}))}},{key:"An",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Bd(t,0),r=this.gs.firstAfterOrEqual(n);return ys.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,ys.resolve()}},{key:"Ts",value:function(e,t){return this.ps(e)}},{key:"ps",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"ys",value:function(e){var t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),zd=function(){function e(t){d(this,e),this.Es=t,this.docs=new Ps(ns.comparator),this.size=0}return v(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Es(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return ys.resolve(n?n.document.mutableCopy():bc.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Hl();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():bc.newInvalidDocument(e))})),ys.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=Hl(),i=new ns(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||hs(cs(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return ys.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Du()}},{key:"As",value:function(e,t){return ys.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Wd(this)}},{key:"getSize",value:function(e){return ys.resolve(this.size)}}]),e}(),Wd=function(e){g(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).Yn=e,r}return v(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Yn.addEntry(e,i)):t.Yn.removeEntry(r)})),ys.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Yn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Yn.getEntries(e,t)}}]),n}(Cd),Hd=function(){function e(t){d(this,e),this.persistence=t,this.Rs=new zl((function(e){return Ic(e)}),Ec),this.lastRemoteSnapshotVersion=Ju.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Kd,this.targetCount=0,this.vs=gd.Pn()}return v(e,[{key:"forEachTarget",value:function(e,t){return this.Rs.forEach((function(e,n){return t(n)})),ys.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return ys.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return ys.resolve(this.bs)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.vs.next(),ys.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.bs&&(this.bs=t),ys.resolve()}},{key:"Dn",value:function(e){this.Rs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.vs=new gd(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Dn(t),this.targetCount+=1,ys.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Dn(t),ys.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,ys.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Rs.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Rs.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),ys.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return ys.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Rs.get(t)||null;return ys.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Ps.us(t,n),ys.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Ps.hs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),ys.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Ps.ls(t),ys.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Ps.ds(t);return ys.resolve(n)}},{key:"containsKey",value:function(e,t){return ys.resolve(this.Ps.containsKey(t))}}]),e}(),Gd=function(){function e(t,n){var r=this;d(this,e),this.Vs={},this.overlays={},this.Ss=new Cs(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=t(this),this.Cs=new Hd(this),this.indexManager=new $f,this.remoteDocumentCache=new zd((function(e){return r.referenceDelegate.xs(e)})),this.It=new Ef(n),this.Ns=new Ud(this.It)}return v(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Ds=!1,Promise.resolve()}},{key:"started",get:function(){return this.Ds}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Vd,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Vs[e.toKey()];return n||(n=new qd(t,this.referenceDelegate),this.Vs[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Cs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ns}},{key:"runTransaction",value:function(e,t,n){var r=this;Tu("MemoryPersistence","Starting transaction:",e);var i=new Qd(this.Ss.next());return this.referenceDelegate.ks(),n(i).next((function(e){return r.referenceDelegate.Ms(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Os",value:function(e,t){return ys.or(Object.values(this.Vs).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Qd=function(e){g(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return v(n)}(ds),Yd=function(){function e(t){d(this,e),this.persistence=t,this.Fs=new Kd,this.$s=null}return v(e,[{key:"Ls",get:function(){if(this.$s)return this.$s;throw Du()}},{key:"addReference",value:function(e,t,n){return this.Fs.addReference(n,t),this.Ls.delete(n.toString()),ys.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Fs.removeReference(n,t),this.Ls.add(n.toString()),ys.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Ls.add(t.toString()),ys.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Fs.ls(t.targetId).forEach((function(e){return n.Ls.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Ls.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"ks",value:function(){this.$s=new Set}},{key:"Ms",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ys.forEach(this.Ls,(function(r){var i=ns.fromPath(r);return t.Us(e,i).next((function(e){e||n.removeEntry(i,Ju.min())}))})).next((function(){return t.$s=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Us(e,t).next((function(e){e?n.Ls.delete(t.toString()):n.Ls.add(t.toString())}))}},{key:"xs",value:function(e){return 0}},{key:"Us",value:function(e,t){var n=this;return ys.or([function(){return ys.resolve(n.Fs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Os(e,t)}])}}],[{key:"Bs",value:function(t){return new e(t)}}]),e}(),Xd=function(){function e(t){d(this,e),this.It=t}return v(e,[{key:"$",value:function(e,t,n,r){var i=this,a=new gs("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Yh,{unique:!0}),e.createObjectStore("documentMutations")}(e),Jd(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=ys.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Jd(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ju.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").W().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Yh,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return ys.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.qs(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Ks(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Gs(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.Qs(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.js(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:hf});t.createIndex("collectionPathOverlayIndex",ff,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",df,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:$h});t.createIndex("documentKeyIndex",ef),t.createIndex("collectionGroupIndex",tf)}(e)})).next((function(){return i.Ws(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.zs(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:uf}).createIndex("sequenceNumberIndex",sf,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:cf}).createIndex("documentKeyIndex",lf,{unique:!1})}(e)}))),o}},{key:"Ks",value:function(e){var t=0;return e.store("remoteDocuments").Z((function(e,n){t+=hd(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"qs",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next((function(n){return ys.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",i).next((function(r){return ys.forEach(r,(function(r){Pu(r.userId===n.userId);var i=Nf(t.It,r);return ld(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Gs",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Z((function(n,i){var a=new $u(n),o=function(e){return[0,Wh(e)]}(a);r.push(t.get(o).next((function(n){return n?ys.resolve():function(n){return t.put({targetId:0,path:Wh(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return ys.waitFor(r)}))}))}},{key:"Qs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:of});var n=t.store("collectionParents"),r=new ed,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Wh(i)})}};return t.store("remoteDocuments").Z({X:!0},(function(e,t){var n=new $u(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Z({X:!0},(function(e,t){var n=l(e,3),r=(n[0],n[1]),a=(n[2],Qh(r));return i(a.popLast())}))}))}},{key:"js",value:function(e){var t=this,n=e.store("targets");return n.Z((function(e,r){var i=Df(r),a=Pf(t.It,i);return n.put(a)}))}},{key:"Ws",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Z((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new ns($u.fromString(i.document.name).popFirst(5)):i.noDocument?ns.fromSegments(i.noDocument.path):i.unknownDocument?ns.fromSegments(i.unknownDocument.path):Du()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return ys.waitFor(r)}))}},{key:"zs",value:function(e,t){var n=this,r=t.store("mutations"),i=Nd(this.It),a=new Gd(Yd.Bs,this.It.re);return r.W().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:th();Nf(n.It,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),ys.forEach(r,(function(e,r){var o=new xu(r),u=Vf.oe(n.It,o),s=a.getIndexManager(o),c=fd.oe(o,n.It,s,a.referenceDelegate);return new jd(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new kf(t,Cs.at),e).next()}))}))}}]),e}();function Jd(e){e.createObjectStore("targetDocuments",{keyPath:rf}).createIndex("documentTargetsIndex",af,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",nf,{unique:!0}),e.createObjectStore("targetGlobal")}var Zd="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",$d=function(){function e(t,n,r,i,a,o,u,s,c,l){var h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(d(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Hs=a,this.window=o,this.document=u,this.Js=c,this.Ys=l,this.Xs=h,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=function(e){return Promise.resolve()},!e.C())throw new Lu(Ou.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Sd(this,i),this.ii=n+"main",this.It=new Ef(s),this.ri=new ms(this.ii,this.Xs,new Xd(this.It)),this.Cs=new md(this.referenceDelegate,this.It),this.remoteDocumentCache=Nd(this.It),this.Ns=new Ff,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===l&&Cu("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return v(e,[{key:"start",value:function(){var e=this;return this.ui().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Lu(Ou.FAILED_PRECONDITION,Zd);return e.ci(),e.ai(),e.hi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Cs.getHighestSequenceNumber(t)}))})).then((function(t){e.Ss=new Cs(t,e.Js)})).then((function(){e.Ds=!0})).catch((function(t){return e.ri&&e.ri.close(),Promise.reject(t)}))}},{key:"li",value:function(e){var t=this;return this.si=function(){var n=Pt(Nt().mark((function n(r){return Nt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ri.L(function(){var t=Pt(Nt().mark((function t(n){return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget(Pt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.ui();case 4:case"end":return e.stop()}}),e)})))))}},{key:"ui",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return tp(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.fi(t).next((function(t){t||(e.isPrimary=!1,e.Hs.enqueueRetryable((function(){return e.si(!1)})))}))})).next((function(){return e.di(t)})).next((function(n){return e.isPrimary&&!n?e._i(t).next((function(){return!1})):!!n&&e.wi(t).next((function(){return!0}))}))})).catch((function(t){if(bs(t))return Tu("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Tu("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Hs.enqueueRetryable((function(){return e.si(t)})),e.isPrimary=t}))}},{key:"fi",value:function(e){var t=this;return ep(e).get("owner").next((function(e){return ys.resolve(t.mi(e))}))}},{key:"gi",value:function(e){return tp(e).delete(this.clientId)}},{key:"yi",value:function(){var e=Pt(Nt().mark((function e(){var t,n,r,i,a=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.pi(this.ni,18e5)){e.next=6;break}return this.ni=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=wf(e,"clientMetadata");return t.W().next((function(e){var n=a.Ii(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return ys.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.oi){n=Me(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.oi.removeItem(this.Ti(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"hi",value:function(){var e=this;this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.ui().then((function(){return e.yi()})).then((function(){return e.hi()}))}))}},{key:"mi",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"di",value:function(e){var t=this;return this.Ys?ys.resolve(!0):ep(e).get("owner").next((function(n){if(null!==n&&t.pi(n.leaseTimestampMs,5e3)&&!t.Ei(n.ownerId)){if(t.mi(n)&&t.networkEnabled)return!0;if(!t.mi(n)){if(!n.allowTabSynchronization)throw new Lu(Ou.FAILED_PRECONDITION,Zd);return!1}}return!(!t.networkEnabled||!t.inForeground)||tp(e).W().next((function(e){return void 0===t.Ii(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Tu("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=Pt(Nt().mark((function e(){var t=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ds=!1,this.Ai(),this.ei&&(this.ei.cancel(),this.ei=null),this.Ri(),this.bi(),e.next=7,this.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new kf(e,Cs.at);return t._i(n).next((function(){return t.gi(n)}))}));case 7:this.ri.close(),this.Pi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ii",value:function(e,t){var n=this;return e.filter((function(e){return n.pi(e.updateTimeMs,t)&&!n.Ei(e.clientId)}))}},{key:"vi",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return tp(t).W().next((function(t){return e.Ii(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Ds}},{key:"getMutationQueue",value:function(e,t){return fd.oe(e,this.It,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Cs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new nd(e,this.It.re.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return Vf.oe(this.It,e)}},{key:"getBundleCache",value:function(){return this.Ns}},{key:"runTransaction",value:function(e,t,n){var r=this;Tu("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.Xs)?mf:14===i?gf:13===i?yf:12===i?vf:11===i?pf:void Du();return this.ri.runTransaction(e,o,u,(function(i){return a=new kf(i,r.Ss?r.Ss.next():Cs.at),"readwrite-primary"===t?r.fi(a).next((function(e){return!!e||r.di(a)})).next((function(t){if(!t)throw Cu("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Hs.enqueueRetryable((function(){return r.si(!1)})),new Lu(Ou.FAILED_PRECONDITION,fs);return n(a)})).next((function(e){return r.wi(a).next((function(){return e}))})):r.Vi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Vi",value:function(e){var t=this;return ep(e).get("owner").next((function(e){if(null!==e&&t.pi(e.leaseTimestampMs,5e3)&&!t.Ei(e.ownerId)&&!t.mi(e)&&!(t.Ys||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Lu(Ou.FAILED_PRECONDITION,Zd)}))}},{key:"wi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ep(e).put("owner",t)}},{key:"_i",value:function(e){var t=this,n=ep(e);return n.get("owner").next((function(e){return t.mi(e)?(Tu("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):ys.resolve()}))}},{key:"pi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(Cu("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ci",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=function(){e.Hs.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.ui()}))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ri",value:function(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}},{key:"ai",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=function(){t.Ai(),!Ze()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Hs.enterRestrictedMode(!0),t.Hs.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.Zs))}},{key:"bi",value:function(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}},{key:"Ei",value:function(e){var t;try{var n=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Tu("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Cu("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ai",value:function(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(_r){Cu("Failed to set zombie client id.",_r)}}},{key:"Pi",value:function(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(_r){}}},{key:"Ti",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"C",value:function(){return ms.C()}}]),e}();function ep(e){return wf(e,"owner")}function tp(e){return wf(e,"clientMetadata")}function np(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var rp=function(){function e(t,n,r,i){d(this,e),this.targetId=t,this.fromCache=n,this.Si=r,this.Di=i}return v(e,null,[{key:"Ci",value:function(t,n){var r,i=th(),a=th(),o=Me(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),ip=function(){function e(){d(this,e),this.xi=!1}return v(e,[{key:"initialize",value:function(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.ki(e,t).next((function(a){return a||i.Mi(e,t,r,n)})).next((function(n){return n||i.Oi(e,t)}))}},{key:"ki",value:function(e,t){var n=this;if(Gc(t))return ys.resolve(null);var r=Zc(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=$c(t,null,"F"),r=Zc(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=th.apply(void 0,f(i));return n.Ni.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.Fi(t,i);return n.$i(t,o,a,r.readTime)?n.ki(e,$c(t,null,"F")):n.Bi(e,o,t,r)}))}))})))}))}},{key:"Mi",value:function(e,t,n,r){var i=this;return Gc(t)||r.isEqual(Ju.min())?this.Oi(e,t):this.Ni.getDocuments(e,n).next((function(a){var o=i.Fi(t,a);return i.$i(t,o,n,r)?i.Oi(e,t):(Su()<=Ft.DEBUG&&Tu("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),nl(t)),i.Bi(e,o,t,ss(r,-1)))}))}},{key:"Fi",value:function(e,t){var n=new Ls(al(e));return t.forEach((function(t,r){rl(e,r)&&(n=n.add(r))})),n}},{key:"$i",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Oi",value:function(e,t){return Su()<=Ft.DEBUG&&Tu("QueryEngine","Using full collection scan to execute query:",nl(t)),this.Ni.getDocumentsMatchingQuery(e,t,ls.min())}},{key:"Bi",value:function(e,t,n,r){return this.Ni.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),ap=function(){function e(t,n,r,i){d(this,e),this.persistence=t,this.Li=n,this.It=i,this.Ui=new Ps(Gu),this.qi=new zl((function(e){return Ic(e)}),Ec),this.Ki=new Map,this.Gi=t.getRemoteDocumentCache(),this.Cs=t.getTargetCache(),this.Ns=t.getBundleCache(),this.Qi(r)}return v(e,[{key:"Qi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new jd(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Ui)}))}}]),e}();function op(e,t,n,r){return new ap(e,t,n,r)}function up(e,t){return sp.apply(this,arguments)}function sp(){return sp=Pt(Nt().mark((function e(t,n){var r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ru(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.Qi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=th(),s=Me(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,h=Me(c.mutations);try{for(h.s();!(l=h.n()).done;){var f=l.value;u=u.add(f.key)}}catch(k){h.e(k)}finally{h.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=Me(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,g=Me(v.mutations);try{for(g.s();!(y=g.n()).done;){var m=y.value;u=u.add(m.key)}}catch(k){g.e(k)}finally{g.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{ji:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),sp.apply(this,arguments)}function cp(e,t){var n=Ru(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Gi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=ys.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Pu(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=th(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function lp(e){var t=Ru(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Cs.getLastRemoteSnapshotVersion(e)}))}function hp(e,t){var n=Ru(e),r=t.snapshotVersion,i=n.Ui;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Gi.newChangeBuffer({trackRemovals:!0});i=n.Ui;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Cs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Cs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(Us.EMPTY_BYTE_STRING,Ju.min()).withLastLimboFreeSnapshotVersion(Ju.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Cs.updateTargetData(e,c))}}));var u=Hl(),s=th();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(fp(e,a,t.documentUpdates).next((function(e){u=e.Wi,s=e.zi}))),!r.isEqual(Ju.min())){var c=n.Cs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Cs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return ys.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.Ui=i,e}))}function fp(e,t,n){var r=th(),i=th();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=Hl();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(Ju.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):Tu("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{Wi:r,zi:i}}))}function dp(e,t){var n=Ru(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function pp(e,t){var n=Ru(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Cs.getTargetData(e,t).next((function(i){return i?(r=i,ys.resolve(r)):n.Cs.allocateTargetId(e).next((function(i){return r=new If(t,i,0,e.currentSequenceNumber),n.Cs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Ui.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ui=n.Ui.insert(e.targetId,e),n.qi.set(t,e.targetId)),e}))}function vp(e,t,n){return yp.apply(this,arguments)}function yp(){return yp=Pt(Nt().mark((function e(t,n,r){var i,a,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Ru(t),a=i.Ui.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),bs(e.t1)){e.next=12;break}throw e.t1;case 12:Tu("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Ui=i.Ui.remove(n),i.qi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),yp.apply(this,arguments)}function gp(e,t,n){var r=Ru(e),i=Ju.min(),a=th();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Ru(e),i=r.qi.get(n);return void 0!==i?ys.resolve(r.Ui.get(i)):r.Cs.getTargetData(t,n)}(r,e,Zc(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Li.getDocumentsMatchingQuery(e,t,n?i:Ju.min(),n?a:th())})).next((function(e){return wp(r,il(t),e),{documents:e,Hi:a}}))}))}function mp(e,t){var n=Ru(e),r=Ru(n.Cs),i=n.Ui.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.se(e,t).next((function(e){return e?e.target:null}))}))}function kp(e,t){var n=Ru(e),r=n.Ki.get(t)||Ju.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Gi.getAllFromCollectionGroup(e,t,ss(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return wp(n,t,e),e}))}function wp(e,t,n){var r=Ju.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Ki.set(t,r)}function bp(e,t,n,r){return _p.apply(this,arguments)}function _p(){return _p=Pt(Nt().mark((function e(t,n,r,i){var a,o,u,s,c,l,h,f,d,p;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Ru(t),o=th(),u=Hl(),s=Me(r);try{for(s.s();!(c=s.n()).done;)l=c.value,h=n.Ji(l.metadata.name),l.document&&(o=o.add(h)),(f=n.Yi(l)).setReadTime(n.Xi(l.metadata.readTime)),u=u.insert(h,f)}catch(v){s.e(v)}finally{s.f()}return d=a.Gi.newChangeBuffer({trackRemovals:!0}),e.next=7,pp(a,function(e){return Zc(Hc($u.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return fp(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.Cs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Cs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.Wi,t.zi)})).next((function(){return t.Wi}))}))})));case 9:case"end":return e.stop()}}),e)}))),_p.apply(this,arguments)}function xp(e,t){return Ip.apply(this,arguments)}function Ip(){return Ip=Pt(Nt().mark((function e(t,n){var r,i,a,o=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:th(),e.next=3,pp(t,Zc(Rf(n.bundledQuery)));case 3:return i=e.sent,a=Ru(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=kh(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Ns.saveNamedQuery(e,n);var o=i.withResumeToken(Us.EMPTY_BYTE_STRING,t);return a.Ui=a.Ui.insert(o.targetId,o),a.Cs.updateTargetData(e,o).next((function(){return a.Cs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Cs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Ns.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),Ip.apply(this,arguments)}function Ep(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Sp(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Tp(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Cp=function(){function e(t,n,r,i){d(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return v(e,[{key:"tr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new Lu(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(Cu("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),Ap=function(){function e(t,n,r){d(this,e),this.targetId=t,this.state=n,this.error=r}return v(e,[{key:"tr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Lu(i.error.code,i.error.message))),a?new e(t,i.state,r):(Cu("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),Np=function(){function e(t,n){d(this,e),this.clientId=t,this.activeTargetIds=n}return v(e,null,[{key:"Zi",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=rh(),o=0;i&&o<r.activeTargetIds.length;++o)i=Js(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(Cu("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),Dp=function(){function e(t,n){d(this,e),this.clientId=t,this.onlineState=n}return v(e,null,[{key:"Zi",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Cu("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),Pp=function(){function e(){d(this,e),this.activeTargetIds=rh()}return v(e,[{key:"er",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"nr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"tr",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Rp=function(){function e(t,n,r,i,a){d(this,e),this.window=t,this.Hs=n,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Ps(Gu),this.started=!1,this.cr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ar=Ep(this.persistenceKey,this.sr),this.hr=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ur=this.ur.insert(this.sr,new Pp),this.lr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.dr=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this._r=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.wr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.mr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}return v(e,[{key:"start",value:function(){var e=Pt(Nt().mark((function e(){var t,n,r,i,a,o,u,s,c,l,h,f=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.vi();case 2:t=e.sent,n=Me(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.sr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(Ep(this.persistenceKey,i)))&&(o=Np.Zi(i,a))&&(this.ur=this.ur.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.gr(),(u=this.storage.getItem(this.wr))&&(s=this.yr(u))&&this.pr(s),c=Me(this.cr);try{for(c.s();!(l=c.n()).done;)h=l.value,this.rr(h)}catch(d){c.e(d)}finally{c.f()}this.cr=[],this.window.addEventListener("pagehide",(function(){return f.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.hr,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Ir(this.ur)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ur.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Tr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Tr(e,t,n),this.Er(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Tp(this.persistenceKey,e));if(n){var r=Ap.Zi(e,n);r&&(t=r.state)}}return this.Ar.er(e),this.gr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Ar.nr(e),this.gr()}},{key:"isLocalQueryTarget",value:function(e){return this.Ar.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Tp(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Rr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Er(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.br(e)}},{key:"notifyBundleLoaded",value:function(e){this.Pr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return Tu("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){Tu("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){Tu("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"rr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Tu("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ar)return void Cu("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable(Pt(Nt().mark((function e(){var r,i,a,o,u,s,c;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.lr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.vr(n.key),e.abrupt("return",t.Vr(r,null));case 6:if(!(i=t.Sr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Vr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.dr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Dr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Cr(a));case 16:e.next=41;break;case 18:if(!t._r.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Nr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.kr(o));case 23:e.next=41;break;case 25:if(n.key!==t.wr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.yr(n.newValue))){e.next=30;break}return e.abrupt("return",t.pr(u));case 30:e.next=41;break;case 32:if(n.key!==t.hr){e.next=37;break}s=function(e){var t=Cs.at;if(null!=e)try{var n=JSON.parse(e);Pu("number"==typeof n),t=n}catch(e){Cu("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==Cs.at&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.mr){e.next=41;break}return c=t.Mr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Or(e)})));case 41:e.next=44;break;case 43:t.cr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Ar",get:function(){return this.ur.get(this.sr)}},{key:"gr",value:function(){this.setItem(this.ar,this.Ar.tr())}},{key:"Tr",value:function(e,t,n){var r=new Cp(this.currentUser,e,t,n),i=Sp(this.persistenceKey,this.currentUser,e);this.setItem(i,r.tr())}},{key:"Er",value:function(e){var t=Sp(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"br",value:function(e){var t={clientId:this.sr,onlineState:e};this.storage.setItem(this.wr,JSON.stringify(t))}},{key:"Rr",value:function(e,t,n){var r=Tp(this.persistenceKey,e),i=new Ap(e,t,n);this.setItem(r,i.tr())}},{key:"Pr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}},{key:"vr",value:function(e){var t=this.lr.exec(e);return t?t[1]:null}},{key:"Sr",value:function(e,t){var n=this.vr(e);return Np.Zi(n,t)}},{key:"Dr",value:function(e,t){var n=this.dr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Cp.Zi(new xu(i),r,t)}},{key:"Nr",value:function(e,t){var n=this._r.exec(e),r=Number(n[1]);return Ap.Zi(r,t)}},{key:"yr",value:function(e){return Dp.Zi(e)}},{key:"Mr",value:function(e){return JSON.parse(e)}},{key:"Cr",value:function(){var e=Pt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Fr(t.batchId,t.state,t.error));case 2:Tu("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"kr",value:function(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}},{key:"Vr",value:function(e,t){var n=this,r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),a=this.Ir(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Br(o,u).then((function(){n.ur=r}))}},{key:"pr",value:function(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Ir",value:function(e){var t=rh();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"C",value:function(e){return!(!e||!e.localStorage)}}]),e}(),Op=function(){function e(){d(this,e),this.Lr=new Pp,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return v(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Lr.er(e),this.Ur[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Ur[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Lr.nr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Lr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Ur[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Lr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Lr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Lr=new Pp,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Lp=function(){function e(){d(this,e)}return v(e,[{key:"qr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Mp=function(){function e(){var t=this;d(this,e),this.Kr=function(){return t.Gr()},this.Qr=function(){return t.jr()},this.Wr=[],this.zr()}return v(e,[{key:"qr",value:function(e){this.Wr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}},{key:"zr",value:function(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}},{key:"Gr",value:function(){Tu("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=Me(this.Wr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"jr",value:function(){Tu("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=Me(this.Wr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"C",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),Fp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},jp=function(){function e(t){d(this,e),this.Hr=t.Hr,this.Jr=t.Jr}return v(e,[{key:"Yr",value:function(e){this.Xr=e}},{key:"Zr",value:function(e){this.eo=e}},{key:"onMessage",value:function(e){this.no=e}},{key:"close",value:function(){this.Jr()}},{key:"send",value:function(e){this.Hr(e)}},{key:"so",value:function(){this.Xr()}},{key:"io",value:function(e){this.eo(e)}},{key:"ro",value:function(e){this.no(e)}}]),e}(),Up=function(e){g(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return v(n,[{key:"lo",value:function(e,t,n,r){return new Promise((function(i,a){var o=new bu;o.listenOnce(yu.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case vu.NO_ERROR:var t=o.getResponseJson();Tu("Connection","XHR received:",JSON.stringify(t)),i(t);break;case vu.TIMEOUT:Tu("Connection",'RPC "'+e+'" timed out'),a(new Lu(Ou.DEADLINE_EXCEEDED,"Request time out"));break;case vu.HTTP_ERROR:var n=o.getStatus();if(Tu("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Ou).indexOf(t)>=0?t:Ou.UNKNOWN}(r.status);a(new Lu(u,r.message))}else a(new Lu(Ou.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Lu(Ou.UNAVAILABLE,"Connection failed."));break;default:Du()}}finally{Tu("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"_o",value:function(e,t,n){var r=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=du(),a=pu(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new ku({})),this.ho(o.initMessageHeaders,t,n),Je()||et()||Xe().indexOf("Electron/")>=0||tt()||Xe().indexOf("MSAppHost/")>=0||$e()||(o.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");Tu("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,h=new jp({Hr:function(e){l?Tu("Connection","Not sending because WebChannel is closed:",e):(c||(Tu("Connection","Opening WebChannel transport."),s.open(),c=!0),Tu("Connection","WebChannel sending:",e),s.send(e))},Jr:function(){return s.close()}}),f=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return f(s,wu.EventType.OPEN,(function(){l||Tu("Connection","WebChannel transport opened.")})),f(s,wu.EventType.CLOSE,(function(){l||(l=!0,Tu("Connection","WebChannel transport closed"),h.io())})),f(s,wu.EventType.ERROR,(function(e){l||(l=!0,Au("Connection","WebChannel transport errored:",e),h.io(new Lu(Ou.UNAVAILABLE,"The operation could not be completed")))})),f(s,wu.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];Pu(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){Tu("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=Fl[e];if(void 0!==t)return ql(t)}(a),u=i.message;void 0===o&&(o=Ou.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,h.io(new Lu(o,u)),s.close()}else Tu("Connection","WebChannel received:",n),h.ro(n)}})),f(a,gu.STAT_EVENT,(function(e){e.stat===mu.PROXY?Tu("Connection","Detected buffering proxy"):e.stat===mu.NOPROXY&&Tu("Connection","Detected no buffering proxy")})),setTimeout((function(){h.so()}),0),h}}]),n}(function(){function e(t){d(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.oo=n+"://"+t.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return v(e,[{key:"co",value:function(e,t,n,r,i){var a=this.ao(e,t);Tu("RestConnection","Sending: ",a,n);var o={};return this.ho(o,r,i),this.lo(e,a,o,n).then((function(e){return Tu("RestConnection","Received: ",e),e}),(function(t){throw Au("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"fo",value:function(e,t,n,r,i,a){return this.co(e,t,n,r,i)}},{key:"ho",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Iu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"ao",value:function(e,t){var n=Fp[e];return"".concat(this.oo,"/v1/").concat(t,":").concat(n)}}]),e}());function Vp(){return"undefined"!=typeof window?window:null}function Kp(){return"undefined"!=typeof document?document:null}function Bp(e){return new vh(e,!0)}var qp=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;d(this,e),this.Hs=t,this.timerId=n,this.wo=r,this.mo=i,this.yo=a,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}return v(e,[{key:"reset",value:function(){this.po=0}},{key:"Eo",value:function(){this.po=this.yo}},{key:"Ao",value:function(e){var t=this;this.cancel();var n=Math.floor(this.po+this.Ro()),r=Math.max(0,Date.now()-this.To),i=Math.max(0,n-r);i>0&&Tu("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.po," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Io=this.Hs.enqueueAfterDelay(this.timerId,i,(function(){return t.To=Date.now(),e()})),this.po*=this.mo,this.po<this.wo&&(this.po=this.wo),this.po>this.yo&&(this.po=this.yo)}},{key:"bo",value:function(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}},{key:"cancel",value:function(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}},{key:"Ro",value:function(){return(Math.random()-.5)*this.po}}]),e}(),zp=function(){function e(t,n,r,i,a,o,u,s){d(this,e),this.Hs=t,this.Po=r,this.vo=i,this.Vo=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new qp(t,n)}return v(e,[{key:"No",value:function(){return 1===this.state||5===this.state||this.ko()}},{key:"ko",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Mo()}},{key:"stop",value:function(){var e=Pt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.No(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Oo",value:function(){this.state=0,this.xo.reset()}},{key:"Fo",value:function(){var e=this;this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.Po,6e4,(function(){return e.$o()})))}},{key:"Bo",value:function(e){this.Lo(),this.stream.send(e)}},{key:"$o",value:function(){var e=Pt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.ko()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Lo",value:function(){this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"Uo",value:function(){this.Co&&(this.Co.cancel(),this.Co=null)}},{key:"close",value:function(){var e=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Lo(),this.Uo(),this.xo.cancel(),this.So++,4!==t?this.xo.reset():n&&n.code===Ou.RESOURCE_EXHAUSTED?(Cu(n.toString()),Cu("Using maximum backoff delay to prevent overloading the backend."),this.xo.Eo()):n&&n.code===Ou.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.qo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Zr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"qo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Ko(this.So),n=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=l(t,2),i=r[0],a=r[1];e.So===n&&e.Go(i,a)}),(function(n){t((function(){var t=new Lu(Ou.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Qo(t)}))}))}},{key:"Go",value:function(e,t){var n=this,r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr((function(){r((function(){return n.state=2,n.Co=n.Hs.enqueueAfterDelay(n.vo,1e4,(function(){return n.ko()&&(n.state=3),Promise.resolve()})),n.listener.Yr()}))})),this.stream.Zr((function(e){r((function(){return n.Qo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Mo",value:function(){var e=this;this.state=5,this.xo.Ao(Pt(Nt().mark((function t(){return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Qo",value:function(e){return Tu("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Ko",value:function(e){var t=this;return function(n){t.Hs.enqueueAndForget((function(){return t.So===e?n():(Tu("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),Wp=function(e){g(n,e);var t=x(n);function n(e,r,i,a,o,u){var s;return d(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).It=o,s}return v(n,[{key:"jo",value:function(e,t){return this.Vo._o("Listen",e,t)}},{key:"onMessage",value:function(e){this.xo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Du()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.gt?(Pu(void 0===t||"string"==typeof t),Us.fromBase64String(t||"")):(Pu(void 0===t||t instanceof Uint8Array),Us.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?Ou.UNKNOWN:ql(e.code);return new Lu(t,e.message||"")}(o);n=new sh(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=xh(e,s.document.name),l=kh(s.document.updateTime),h=new kc({mapValue:{fields:s.document.fields}}),f=bc.newFoundDocument(c,l,h),d=s.targetIds||[],p=s.removedTargetIds||[];n=new oh(d,p,f.key,f)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var y=xh(e,v.document),g=v.readTime?kh(v.readTime):Ju.min(),m=bc.newNoDocument(y,g),k=v.removedTargetIds||[];n=new oh([],k,m.key,m)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var b=xh(e,w.document),_=w.removedTargetIds||[];n=new oh([],_,b,null)}else{if(!("filter"in t))return Du();t.filter;var x=t.filter;x.targetId;var I=x.count||0,E=new Kl(I),S=x.targetId;n=new uh(S,E)}return n}(this.It,e),n=function(e){if(!("targetChange"in e))return Ju.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Ju.min():t.readTime?kh(t.readTime):Ju.min()}(e);return this.listener.Wo(t,n)}},{key:"zo",value:function(e){var t={};t.database=Sh(this.It),t.addTarget=function(e,t){var n,r=t.target;return(n=Sc(r)?{documents:Rh(e,r)}:{query:Oh(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=gh(e,t.resumeToken):t.snapshotVersion.compareTo(Ju.min())>0&&(n.readTime=yh(e,t.snapshotVersion.toTimestamp())),n}(this.It,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Du()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.It,e);n&&(t.labels=n),this.Bo(t)}},{key:"Ho",value:function(e){var t={};t.database=Sh(this.It),t.removeTarget=e,this.Bo(t)}}]),n}(zp),Hp=function(e){g(n,e);var t=x(n);function n(e,r,i,a,o,u){var s;return d(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).It=o,s.Jo=!1,s}return v(n,[{key:"Yo",get:function(){return this.Jo}},{key:"start",value:function(){this.Jo=!1,this.lastStreamToken=void 0,ur(m(n.prototype),"start",this).call(this)}},{key:"qo",value:function(){this.Jo&&this.Xo([])}},{key:"jo",value:function(e,t){return this.Vo._o("Write",e,t)}},{key:"onMessage",value:function(e){if(Pu(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();var t=function(e,t){return e&&e.length>0?(Pu(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?kh(e.updateTime):kh(t);return n.isEqual(Ju.min())&&(n=kh(t)),new xl(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=kh(e.commitTime);return this.listener.Zo(n,t)}return Pu(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}},{key:"eu",value:function(){var e={};e.database=Sh(this.It),this.Bo(e)}},{key:"Xo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Dh(t.It,e)}))};this.Bo(n)}}]),n}(zp),Gp=function(e){g(n,e);var t=x(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.Vo=i,o.It=a,o.nu=!1,o}return v(n,[{key:"su",value:function(){if(this.nu)throw new Lu(Ou.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"co",value:function(e,t,n){var r=this;return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=l(i,2),o=a[0],u=a[1];return r.Vo.co(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Ou.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Lu(Ou.UNKNOWN,e.toString())}))}},{key:"fo",value:function(e,t,n,r){var i=this;return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=l(a,2),u=o[0],s=o[1];return i.Vo.fo(e,t,n,u,s,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Ou.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new Lu(Ou.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.nu=!0}}]),n}(function(){return v((function e(){d(this,e)}))}()),Qp=function(){function e(t,n){d(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}return v(e,[{key:"uu",value:function(){var e=this;0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.ru=null,e.au("Backend didn't respond within 10 seconds."),e.cu("Offline"),Promise.resolve()})))}},{key:"hu",value:function(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.cu("Offline")))}},{key:"set",value:function(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}},{key:"cu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"au",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.ou?(Cu(t),this.ou=!1):Tu("OnlineStateTracker",t)}},{key:"lu",value:function(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}]),e}(),Yp=v((function e(t,n,r,i,a){var o=this;d(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=a,this.mu.qr((function(e){r.enqueueAndForget(Pt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=ov(o),!e.t0){e.next=5;break}return Tu("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=Pt(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Ru(t))._u.add(4),e.next=4,Zp(n);case 4:return n.gu.set("Unknown"),n._u.delete(4),e.next=8,Xp(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.gu=new Qp(r,i)}));function Xp(e){return Jp.apply(this,arguments)}function Jp(){return Jp=Pt(Nt().mark((function e(t){var n,r,i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ov(t)){e.next=18;break}n=Me(t.wu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),Jp.apply(this,arguments)}function Zp(e){return $p.apply(this,arguments)}function $p(){return $p=Pt(Nt().mark((function e(t){var n,r,i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Me(t.wu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),$p.apply(this,arguments)}function ev(e,t){var n=Ru(e);n.du.has(t.targetId)||(n.du.set(t.targetId,t),av(n)?iv(n):Lv(n).ko()&&nv(n,t))}function tv(e,t){var n=Ru(e),r=Lv(n);n.du.delete(t),r.ko()&&rv(n,t),0===n.du.size&&(r.ko()?r.Fo():ov(n)&&n.gu.set("Unknown"))}function nv(e,t){e.yu.Ot(t.targetId),Lv(e).zo(t)}function rv(e,t){e.yu.Ot(t),Lv(e).Ho(t)}function iv(e){e.yu=new lh({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},se:function(t){return e.du.get(t)||null}}),Lv(e).start(),e.gu.uu()}function av(e){return ov(e)&&!Lv(e).No()&&e.du.size>0}function ov(e){return 0===Ru(e)._u.size}function uv(e){e.yu=void 0}function sv(e){return cv.apply(this,arguments)}function cv(){return cv=Pt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.du.forEach((function(e,n){nv(t,e)}));case 1:case"end":return e.stop()}}),e)}))),cv.apply(this,arguments)}function lv(e,t){return hv.apply(this,arguments)}function hv(){return hv=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:uv(t),av(t)?(t.gu.hu(n),iv(t)):t.gu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),hv.apply(this,arguments)}function fv(e,t,n){return dv.apply(this,arguments)}function dv(){return dv=Pt(Nt().mark((function e(t,n,r){var i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.gu.set("Online"),!(n instanceof sh&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=Pt(Nt().mark((function e(t,n){var r,i,a,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=Me(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.du.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.du.delete(o),t.yu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Tu("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,pv(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof oh?t.yu.Gt(n):n instanceof uh?t.yu.Yt(n):t.yu.Wt(n),r.isEqual(Ju.min())){e.next=29;break}return e.prev=14,e.next=17,lp(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.yu.te(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.du.get(r);i&&e.du.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.du.get(t);if(n){e.du.set(t,n.withResumeToken(Us.EMPTY_BYTE_STRING,n.snapshotVersion)),rv(e,t);var r=new If(n.target,t,1,n.sequenceNumber);nv(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Tu("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,pv(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),dv.apply(this,arguments)}function pv(e,t,n){return vv.apply(this,arguments)}function vv(){return vv=Pt(Nt().mark((function e(t,n,r){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(bs(n)){e.next=2;break}throw n;case 2:return t._u.add(1),e.next=5,Zp(t);case 5:t.gu.set("Offline"),r||(r=function(){return lp(t.localStore)}),t.asyncQueue.enqueueRetryable(Pt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Tu("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t._u.delete(1),e.next=6,Xp(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),vv.apply(this,arguments)}function yv(e,t){return t().catch((function(n){return pv(e,n,t)}))}function gv(e){return mv.apply(this,arguments)}function mv(){return mv=Pt(Nt().mark((function e(t){var n,r,i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Ru(t),r=Mv(n),i=n.fu.length>0?n.fu[n.fu.length-1].batchId:-1;case 2:if(!kv(n)){e.next=19;break}return e.prev=3,e.next=6,dp(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.fu.length&&r.Fo(),e.abrupt("break",19);case 10:i=a.batchId,wv(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,pv(n,e.t0);case 17:e.next=2;break;case 19:bv(n)&&_v(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),mv.apply(this,arguments)}function kv(e){return ov(e)&&e.fu.length<10}function wv(e,t){e.fu.push(t);var n=Mv(e);n.ko()&&n.Yo&&n.Xo(t.mutations)}function bv(e){return ov(e)&&!Mv(e).No()&&e.fu.length>0}function _v(e){Mv(e).start()}function xv(e){return Iv.apply(this,arguments)}function Iv(){return Iv=Pt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Mv(t).eu();case 1:case"end":return e.stop()}}),e)}))),Iv.apply(this,arguments)}function Ev(e){return Sv.apply(this,arguments)}function Sv(){return Sv=Pt(Nt().mark((function e(t){var n,r,i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Mv(t),r=Me(t.fu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Xo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),Sv.apply(this,arguments)}function Tv(e,t,n){return Cv.apply(this,arguments)}function Cv(){return Cv=Pt(Nt().mark((function e(t,n,r){var i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.fu.shift(),a=_f.from(i,n,r),e.next=3,yv(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,gv(t);case 5:case"end":return e.stop()}}),e)}))),Cv.apply(this,arguments)}function Av(e,t){return Nv.apply(this,arguments)}function Nv(){return Nv=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&Mv(t).Yo,!e.t0){e.next=4;break}return e.next=4,function(){var e=Pt(Nt().mark((function e(t,n){var r,i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Bl(i=n.code)||i===Ou.ABORTED){e.next=7;break}return r=t.fu.shift(),Mv(t).Oo(),e.next=5,yv(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,gv(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:bv(t)&&_v(t);case 5:case"end":return e.stop()}}),e)}))),Nv.apply(this,arguments)}function Dv(e,t){return Pv.apply(this,arguments)}function Pv(){return Pv=Pt(Nt().mark((function e(t,n){var r,i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Ru(t)).asyncQueue.verifyOperationInProgress(),Tu("RemoteStore","RemoteStore received new credentials"),i=ov(r),r._u.add(3),e.next=6,Zp(r);case 6:return i&&r.gu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r._u.delete(3),e.next=12,Xp(r);case 12:case"end":return e.stop()}}),e)}))),Pv.apply(this,arguments)}function Rv(e,t){return Ov.apply(this,arguments)}function Ov(){return Ov=Pt(Nt().mark((function e(t,n){var r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Ru(t),!n){e.next=7;break}return r._u.delete(2),e.next=5,Xp(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r._u.add(2),e.next=12,Zp(r);case 12:r.gu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),Ov.apply(this,arguments)}function Lv(e){return e.pu||(e.pu=function(e,t,n){var r=Ru(e);return r.su(),new Wp(t,r.Vo,r.authCredentials,r.appCheckCredentials,r.It,n)}(e.datastore,e.asyncQueue,{Yr:sv.bind(null,e),Zr:lv.bind(null,e),Wo:fv.bind(null,e)}),e.wu.push(function(){var t=Pt(Nt().mark((function t(n){return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.pu.Oo(),av(e)?iv(e):e.gu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.pu.stop();case 6:uv(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.pu}function Mv(e){return e.Iu||(e.Iu=function(e,t,n){var r=Ru(e);return r.su(),new Hp(t,r.Vo,r.authCredentials,r.appCheckCredentials,r.It,n)}(e.datastore,e.asyncQueue,{Yr:xv.bind(null,e),Zr:Av.bind(null,e),tu:Ev.bind(null,e),Zo:Tv.bind(null,e)}),e.wu.push(function(){var t=Pt(Nt().mark((function t(n){return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Iu.Oo(),t.next=4,gv(e);case 4:t.next=9;break;case 6:return t.next=8,e.Iu.stop();case 8:e.fu.length>0&&(Tu("RemoteStore","Stopping write stream with ".concat(e.fu.length," pending writes")),e.fu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Iu}var Fv=function(){function e(t,n,r,i,a){d(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Mu,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return v(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Lu(Ou.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function jv(e,t){if(Cu("AsyncQueue","".concat(t,": ").concat(e)),bs(e))return new Lu(Ou.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var Uv=function(){function e(t){d(this,e),this.comparator=t?function(e,n){return t(e,n)||ns.comparator(e.key,n.key)}:function(e,t){return ns.comparator(e.key,t.key)},this.keyedMap=Ql(),this.sortedSet=new Ps(this.comparator)}return v(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),Vv=function(){function e(){d(this,e),this.Tu=new Ps(ns.comparator)}return v(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Tu.get(t);n?0!==e.type&&3===n.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==n.type?this.Tu=this.Tu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Tu=this.Tu.remove(t):1===e.type&&2===n.type?this.Tu=this.Tu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):Du():this.Tu=this.Tu.insert(t,e)}},{key:"Eu",value:function(){var e=[];return this.Tu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),Kv=function(){function e(t,n,r,i,a,o,u,s){d(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s}return v(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&el(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,Uv.emptySet(n),a,r,i,!0,!1)}}]),e}(),Bv=v((function e(){d(this,e),this.Au=void 0,this.listeners=[]})),qv=v((function e(){d(this,e),this.queries=new zl((function(e){return tl(e)}),el),this.onlineState="Unknown",this.Ru=new Set}));function zv(e,t){return Wv.apply(this,arguments)}function Wv(){return Wv=Pt(Nt().mark((function e(t,n){var r,i,a,o,u;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Ru(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new Bv),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Au=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=jv(e.t0,"Initialization of query '".concat(nl(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.bu(r.onlineState),o.Au&&n.Pu(o.Au)&&Xv(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),Wv.apply(this,arguments)}function Hv(e,t){return Gv.apply(this,arguments)}function Gv(){return Gv=Pt(Nt().mark((function e(t,n){var r,i,a,o,u;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Ru(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),Gv.apply(this,arguments)}function Qv(e,t){var n,r=Ru(e),i=!1,a=Me(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=Me(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Pu(o)&&(i=!0)}}catch(h){l.e(h)}finally{l.f()}s.Au=o}}}catch(h){a.e(h)}finally{a.f()}i&&Xv(r)}function Yv(e,t,n){var r=Ru(e),i=r.queries.get(t);if(i){var a,o=Me(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function Xv(e){e.Ru.forEach((function(e){e.next()}))}var Jv=function(){function e(t,n,r){d(this,e),this.query=t,this.vu=n,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}return v(e,[{key:"Pu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=Me(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new Kv(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),a=!0):this.Cu(e,this.onlineState)&&(this.xu(e),a=!0),this.Su=e,a}},{key:"onError",value:function(e){this.vu.error(e)}},{key:"bu",value:function(e){this.onlineState=e;var t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}},{key:"Cu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Nu||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"Du",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"xu",value:function(e){e=Kv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Vu=!0,this.vu.next(e)}}]),e}(),Zv=function(){function e(t,n){d(this,e),this.payload=t,this.byteLength=n}return v(e,[{key:"ku",value:function(){return"metadata"in this.payload}}]),e}(),$v=function(){function e(t){d(this,e),this.It=t}return v(e,[{key:"Ji",value:function(e){return xh(this.It,e)}},{key:"Yi",value:function(e){return e.metadata.exists?Ah(this.It,e.document,!1):bc.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}},{key:"Xi",value:function(e){return kh(e)}}]),e}(),ey=function(){function e(t,n,r){d(this,e),this.Mu=t,this.localStore=n,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=ty(t)}return v(e,[{key:"Ou",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;var n=$u.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"Fu",value:function(e){var t,n=new Map,r=new $v(this.It),i=Me(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Ji(a.metadata.name),s=Me(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||th()).add(u);n.set(c,l)}}catch(h){s.e(h)}finally{s.f()}}}}catch(h){i.e(h)}finally{i.f()}return n}},{key:"complete",value:function(){var e=Pt(Nt().mark((function e(){var t,n,r,i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bp(this.localStore,new $v(this.It),this.documents,this.Mu.id);case 2:t=e.sent,n=this.Fu(this.documents),r=Me(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,xp(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,$u:this.collectionGroups,Bu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function ty(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var ny=v((function e(t){d(this,e),this.key=t})),ry=v((function e(t){d(this,e),this.key=t})),iy=function(){function e(t,n){d(this,e),this.query=t,this.Lu=n,this.Uu=null,this.current=!1,this.qu=th(),this.mutatedKeys=th(),this.Ku=al(t),this.Gu=new Uv(this.Ku)}return v(e,[{key:"Qu",get:function(){return this.Lu}},{key:"ju",value:function(e,t){var n=this,r=t?t.Wu:new Vv,i=t?t.Gu:this.Gu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),h=rl(n.query,t)?t:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.zu(l,h)||(r.track({type:2,doc:h}),p=!0,(s&&n.Ku(h,s)>0||c&&n.Ku(h,c)<0)&&(u=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(h?(o=o.add(h),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Gu:o,Wu:r,$i:u,mutatedKeys:a}}},{key:"zu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;var a=e.Wu.Eu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Du()}};return n(e)-n(t)}(e.type,t.type)||r.Ku(e.doc,t.doc)})),this.Hu(n);var o=t?this.Ju():[],u=0===this.qu.size&&this.current?1:0,s=u!==this.Uu;return this.Uu=u,0!==a.length||s?{snapshot:new Kv(this.query,e.Gu,i,a,e.mutatedKeys,0===u,s,!1),Yu:o}:{Yu:o}}},{key:"bu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,Wu:new Vv,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Yu:[]}}},{key:"Xu",value:function(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}},{key:"Hu",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Lu=t.Lu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Lu=t.Lu.delete(e)})),this.current=e.current)}},{key:"Ju",value:function(){var e=this;if(!this.current)return[];var t=this.qu;this.qu=th(),this.Gu.forEach((function(t){e.Xu(t.key)&&(e.qu=e.qu.add(t.key))}));var n=[];return t.forEach((function(t){e.qu.has(t)||n.push(new ry(t))})),this.qu.forEach((function(e){t.has(e)||n.push(new ny(e))})),n}},{key:"Zu",value:function(e){this.Lu=e.Hi,this.qu=th();var t=this.ju(e.documents);return this.applyChanges(t,!0)}},{key:"tc",value:function(){return Kv.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.Uu)}}]),e}(),ay=v((function e(t,n,r){d(this,e),this.query=t,this.targetId=n,this.view=r})),oy=v((function e(t){d(this,e),this.key=t,this.ec=!1})),uy=function(){function e(t,n,r,i,a,o){d(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.nc={},this.sc=new zl((function(e){return tl(e)}),el),this.ic=new Map,this.rc=new Set,this.oc=new Ps(ns.comparator),this.uc=new Map,this.cc=new Kd,this.ac={},this.hc=new Map,this.lc=gd.vn(),this.onlineState="Unknown",this.fc=void 0}return v(e,[{key:"isPrimaryClient",get:function(){return!0===this.fc}}]),e}();function sy(e,t){return cy.apply(this,arguments)}function cy(){return cy=Pt(Nt().mark((function e(t,n){var r,i,a,o,u,s;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=tg(t),!(o=r.sc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.tc(),e.next=15;break;case 6:return e.next=8,pp(r.localStore,Zc(n));case 8:return u=e.sent,r.isPrimaryClient&&ev(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,ly(r,n,i,"current"===s);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),cy.apply(this,arguments)}function ly(e,t,n,r){return hy.apply(this,arguments)}function hy(){return hy=Pt(Nt().mark((function e(t,n,r,i){var a,o,u,s,c,l;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.dc=function(e,n,r){return function(){var e=Pt(Nt().mark((function e(t,n,r,i){var a,o,u;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.ju(r),e.t0=a.$i,!e.t0){e.next=6;break}return e.next=5,gp(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.ju(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(Dy(t,n.targetId,u.Yu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,gp(t.localStore,n,!0);case 3:return a=e.sent,o=new iy(n,a.Hi),u=o.ju(a.documents),s=ah.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(u,t.isPrimaryClient,s),Dy(t,r,c.Yu),l=new ay(n,r,o),e.abrupt("return",(t.sc.set(n,l),t.ic.has(r)?t.ic.get(r).push(n):t.ic.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),hy.apply(this,arguments)}function fy(e,t){return dy.apply(this,arguments)}function dy(){return dy=Pt(Nt().mark((function e(t,n){var r,i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Ru(t),i=r.sc.get(n),!((a=r.ic.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ic.set(i.targetId,a.filter((function(e){return!el(e,n)}))),void r.sc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,vp(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),tv(r.remoteStore,i.targetId),Ay(r,i.targetId)})).catch(ps);case 9:e.next=14;break;case 11:return Ay(r,i.targetId),e.next=14,vp(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),dy.apply(this,arguments)}function py(e,t,n){return vy.apply(this,arguments)}function vy(){return vy=Pt(Nt().mark((function e(t,n,r){var i,a,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ng(t),e.prev=1,e.next=4,function(e,t){var n,r,i=Ru(e),a=Xu.now(),o=t.reduce((function(e,t){return e.add(t.key)}),th());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=Hl(),s=th();return i.Gi.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=Me(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=Nl(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new Rl(c.key,l,wc(l.value.mapValue),Il.exists(!0)))}}catch(h){s.e(h)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:Yl(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.ac[e.currentUser.toKey()];r||(r=new Ps(Gu)),r=r.insert(t,n),e.ac[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,Oy(i,a.changes);case 9:return e.next=11,gv(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=jv(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),vy.apply(this,arguments)}function yy(e,t){return gy.apply(this,arguments)}function gy(){return gy=Pt(Nt().mark((function e(t,n){var r,i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ru(t),e.prev=1,e.next=4,hp(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.uc.get(t);n&&(Pu(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.ec=!0:e.modifiedDocuments.size>0?Pu(n.ec):e.removedDocuments.size>0&&(Pu(n.ec),n.ec=!1))})),e.next=8,Oy(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,ps(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),gy.apply(this,arguments)}function my(e,t,n){var r=Ru(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.sc.forEach((function(e,n){var r=n.view.bu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Ru(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=Me(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.bu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&Xv(n)}(r.eventManager,t),i.length&&r.nc.Wo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function ky(e,t,n){return wy.apply(this,arguments)}function wy(){return wy=Pt(Nt().mark((function e(t,n,r){var i,a,o,u,s,c;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Ru(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.uc.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new Ps(ns.comparator)).insert(o,bc.newNoDocument(o,Ju.min())),s=th().add(o),c=new ih(Ju.min(),new Map,new Ls(Gu),u,s),e.next=9,yy(i,c);case 9:i.oc=i.oc.remove(o),i.uc.delete(n),Ry(i),e.next=16;break;case 14:return e.next=16,vp(i.localStore,n,!1).then((function(){return Ay(i,n,r)})).catch(ps);case 16:case"end":return e.stop()}}),e)}))),wy.apply(this,arguments)}function by(e,t){return _y.apply(this,arguments)}function _y(){return _y=Pt(Nt().mark((function e(t,n){var r,i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ru(t),i=n.batch.batchId,e.prev=1,e.next=4,cp(r.localStore,n);case 4:return a=e.sent,Cy(r,i,null),Ty(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,Oy(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,ps(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),_y.apply(this,arguments)}function xy(e,t,n){return Iy.apply(this,arguments)}function Iy(){return Iy=Pt(Nt().mark((function e(t,n,r){var i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ru(t),e.prev=1,e.next=4,function(e,t){var n=Ru(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return Pu(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,Cy(i,n,r),Ty(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,Oy(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,ps(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Iy.apply(this,arguments)}function Ey(e,t){return Sy.apply(this,arguments)}function Sy(){return Sy=Pt(Nt().mark((function e(t,n){var r,i,a,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ov((r=Ru(t)).remoteStore)||Tu("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=Ru(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.hc.get(i)||[]).push(n),r.hc.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=jv(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),Sy.apply(this,arguments)}function Ty(e,t){(e.hc.get(t)||[]).forEach((function(e){e.resolve()})),e.hc.delete(t)}function Cy(e,t,n){var r=Ru(e),i=r.ac[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.ac[r.currentUser.toKey()]=i}}function Ay(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=Me(e.ic.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.sc.delete(a),n&&e.nc._c(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ic.delete(t),e.isPrimaryClient&&e.cc.ls(t).forEach((function(t){e.cc.containsKey(t)||Ny(e,t)}))}function Ny(e,t){e.rc.delete(t.path.canonicalString());var n=e.oc.get(t);null!==n&&(tv(e.remoteStore,n),e.oc=e.oc.remove(t),e.uc.delete(n),Ry(e))}function Dy(e,t,n){var r,i=Me(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof ny?(e.cc.addReference(a.key,t),Py(e,a)):a instanceof ry?(Tu("SyncEngine","Document no longer in limbo: "+a.key),e.cc.removeReference(a.key,t),e.cc.containsKey(a.key)||Ny(e,a.key)):Du()}}catch(o){i.e(o)}finally{i.f()}}function Py(e,t){var n=t.key,r=n.path.canonicalString();e.oc.get(n)||e.rc.has(r)||(Tu("SyncEngine","New document in limbo: "+n),e.rc.add(r),Ry(e))}function Ry(e){for(;e.rc.size>0&&e.oc.size<e.maxConcurrentLimboResolutions;){var t=e.rc.values().next().value;e.rc.delete(t);var n=new ns($u.fromString(t)),r=e.lc.next();e.uc.set(r,new oy(n)),e.oc=e.oc.insert(n,r),ev(e.remoteStore,new If(Zc(Hc(n.path)),r,2,Cs.at))}}function Oy(e,t,n){return Ly.apply(this,arguments)}function Ly(){return Ly=Pt(Nt().mark((function e(t,n,r){var i,a,o,u;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Ru(t),a=[],o=[],u=[],e.t0=i.sc.isEmpty(),e.t0){e.next=9;break}return i.sc.forEach((function(e,t){u.push(i.dc(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=rp.Ci(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.nc.Wo(a),e.next=9,function(){var e=Pt(Nt().mark((function e(t,n){var r,i,a,o,u,s,c,l;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ru(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return ys.forEach(n,(function(t){return ys.forEach(t.Si,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return ys.forEach(t.Di,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),bs(e.t0)){e.next=10;break}throw e.t0;case 10:Tu("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=Me(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.Ui.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.Ui=r.Ui.insert(u,l))}catch(h){i.e(h)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),Ly.apply(this,arguments)}function My(e,t){return Fy.apply(this,arguments)}function Fy(){return Fy=Pt(Nt().mark((function e(t,n){var r,i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Ru(t)).currentUser.isEqual(n)){e.next=11;break}return Tu("SyncEngine","User change. New user:",n.toKey()),e.next=5,up(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.hc.forEach((function(e){e.forEach((function(e){e.reject(new Lu(Ou.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.hc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,Oy(r,i.ji);case 11:case"end":return e.stop()}}),e)}))),Fy.apply(this,arguments)}function jy(e,t){var n=Ru(e),r=n.uc.get(t);if(r&&r.ec)return th().add(r.key);var i=th(),a=n.ic.get(t);if(!a)return i;var o,u=Me(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.sc.get(s);i=i.unionWith(c.view.Qu)}}catch(l){u.e(l)}finally{u.f()}return i}function Uy(e,t){return Vy.apply(this,arguments)}function Vy(){return Vy=Pt(Nt().mark((function e(t,n){var r,i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ru(t),e.next=3,gp(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.Zu(i),e.abrupt("return",(r.isPrimaryClient&&Dy(r,n.targetId,a.Yu),a));case 6:case"end":return e.stop()}}),e)}))),Vy.apply(this,arguments)}function Ky(e,t){return By.apply(this,arguments)}function By(){return By=Pt(Nt().mark((function e(t,n){var r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ru(t),e.abrupt("return",kp(r.localStore,n).then((function(e){return Oy(r,e)})));case 2:case"end":return e.stop()}}),e)}))),By.apply(this,arguments)}function qy(e,t,n,r){return zy.apply(this,arguments)}function zy(){return zy=Pt(Nt().mark((function e(t,n,r,i){var a,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Ru(t),e.next=3,function(e,t){var n=Ru(e),r=Ru(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Tn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):ys.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,gv(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(Cy(a,n,i||null),Ty(a,n),function(e,t){Ru(Ru(e).mutationQueue).An(t)}(a.localStore,n)):Du();case 11:return e.next=13,Oy(a,o);case 13:e.next=16;break;case 15:Tu("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),zy.apply(this,arguments)}function Wy(e,t){return Hy.apply(this,arguments)}function Hy(){return Hy=Pt(Nt().mark((function e(t,n){var r,i,a,o,u,s,c,l;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(tg(r=Ru(t)),ng(r),!0!==n||!0===r.fc){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,Gy(r,i.toArray());case 5:return a=e.sent,r.fc=!0,e.next=9,Rv(r.remoteStore,!0);case 9:o=Me(a);try{for(o.s();!(u=o.n()).done;)s=u.value,ev(r.remoteStore,s)}catch(h){o.e(h)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.fc){e.next=25;break}return c=[],l=Promise.resolve(),r.ic.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return Ay(r,t),vp(r.localStore,t,!0)})),tv(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,Gy(r,c);case 21:return function(e){var t=Ru(e);t.uc.forEach((function(e,n){tv(t.remoteStore,n)})),t.cc.fs(),t.uc=new Map,t.oc=new Ps(ns.comparator)}(r),r.fc=!1,e.next=25,Rv(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),Hy.apply(this,arguments)}function Gy(e,t,n){return Qy.apply(this,arguments)}function Qy(){return Qy=Pt(Nt().mark((function e(t,n,r){var i,a,o,u,s,c,l,h,f,d,p,v,y,g;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Ru(t),a=[],o=[],u=Me(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(h=i.ic.get(c))||0===h.length){e.next=34;break}return e.next=11,pp(i.localStore,Zc(h[0]));case 11:l=e.sent,f=Me(h),e.prev=13,f.s();case 15:if((d=f.n()).done){e.next=24;break}return p=d.value,v=i.sc.get(p),e.next=20,Uy(i,v);case 20:(y=e.sent).snapshot&&o.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),f.e(e.t0);case 29:return e.prev=29,f.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,mp(i.localStore,c);case 36:return g=e.sent,e.next=39,pp(i.localStore,g);case 39:return l=e.sent,e.next=42,ly(i,Yy(g),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.nc.Wo(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),Qy.apply(this,arguments)}function Yy(e){return Wc(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Xy(e){var t=Ru(e);return Ru(Ru(t.localStore).persistence).vi()}function Jy(e,t,n,r){return Zy.apply(this,arguments)}function Zy(){return Zy=Pt(Nt().mark((function e(t,n,r,i){var a,o,u,s;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Ru(t)).fc){e.next=3;break}return e.abrupt("return",void Tu("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.ic.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,kp(a.localStore,il(o[0]));case 10:return u=e.sent,s=ih.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=14,Oy(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,vp(a.localStore,n,!0);case 17:return Ay(a,n,i),e.abrupt("break",20);case 19:Du();case 20:case"end":return e.stop()}}),e)}))),Zy.apply(this,arguments)}function $y(e,t,n){return eg.apply(this,arguments)}function eg(){return eg=Pt(Nt().mark((function e(t,n,r){var i,a,o,u,s,c,l,h,f;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=tg(t)).fc){e.next=45;break}a=Me(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.ic.has(u)){e.next=10;break}return Tu("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,mp(i.localStore,u);case 12:return s=e.sent,e.next=15,pp(i.localStore,s);case 15:return c=e.sent,e.next=18,ly(i,Yy(s),c.targetId,!1);case 18:ev(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=Me(r),e.prev=30,f=Nt().mark((function e(){var t;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.value,e.t0=i.ic.has(t),!e.t0){e.next=5;break}return e.next=5,vp(i.localStore,t,!1).then((function(){tv(i.remoteStore,t),Ay(i,t)})).catch(ps);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((h=l.n()).done){e.next=37;break}return e.delegateYield(f(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),eg.apply(this,arguments)}function tg(e){var t=Ru(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=yy.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=jy.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=ky.bind(null,t),t.nc.Wo=Qv.bind(null,t.eventManager),t.nc._c=Yv.bind(null,t.eventManager),t}function ng(e){var t=Ru(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=by.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=xy.bind(null,t),t}function rg(e,t,n){var r=Ru(e);(function(){var e=Pt(Nt().mark((function e(t,n,r){var i,a,o,u,s;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=Ru(e),r=kh(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ns.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(ty(i)),a=new ey(i,t.localStore,n.It),e.next=15,n.wc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Ou(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.wc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,Oy(t,s.Bu,void 0);case 31:return e.next=33,function(e,t){var n=Ru(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ns.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.$u));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(Au("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var ig=function(){function e(){d(this,e),this.synchronizeTabs=!1}return v(e,[{key:"initialize",value:function(){var e=Pt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.It=Bp(t.databaseInfo.databaseId),this.sharedClientState=this.mc(t),this.persistence=this.gc(t),e.next=5,this.persistence.start();case 5:this.localStore=this.yc(t),this.gcScheduler=this.Ic(t,this.localStore),this.indexBackfillerScheduler=this.Tc(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ic",value:function(e,t){return null}},{key:"Tc",value:function(e,t){return null}},{key:"yc",value:function(e){return op(this.persistence,new ip,e.initialUser,this.It)}},{key:"gc",value:function(e){return new Gd(Yd.Bs,this.It)}},{key:"mc",value:function(e){return new Op}},{key:"terminate",value:function(){var e=Pt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),ag=function(e){g(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).Ec=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return v(n,[{key:"initialize",value:function(){var e=Pt(Nt().mark((function e(t){var r=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ur(m(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Ec.initialize(this,t);case 4:return e.next=6,ng(this.Ec.syncEngine);case 6:return e.next=8,gv(this.Ec.remoteStore);case 8:return e.next=10,this.persistence.li((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"yc",value:function(e){return op(this.persistence,new ip,e.initialUser,this.It)}},{key:"Ic",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new Id(n,e.asyncQueue,t)}},{key:"Tc",value:function(e,t){var n=new Ts(t,this.persistence);return new Ss(e.asyncQueue,n)}},{key:"gc",value:function(e){var t=np(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?cd.withCacheSize(this.cacheSizeBytes):cd.DEFAULT;return new $d(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Vp(),Kp(),this.It,this.sharedClientState,!!this.forceOwnership)}},{key:"mc",value:function(e){return new Op}}]),n}(ig),og=function(e){g(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r,!1)).Ec=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return v(n,[{key:"initialize",value:function(){var e=Pt(Nt().mark((function e(t){var r,i=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ur(m(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Ec.syncEngine,e.t0=this.sharedClientState instanceof Rp,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Fr:qy.bind(null,r),$r:Jy.bind(null,r),Br:$y.bind(null,r),vi:Xy.bind(null,r),Or:Ky.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.li(function(){var e=Pt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wy(i.Ec.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"mc",value:function(e){var t=Vp();if(!Rp.C(t))throw new Lu(Ou.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=np(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Rp(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(ag),ug=function(){function e(){d(this,e)}return v(e,[{key:"initialize",value:function(){var e=Pt(Nt().mark((function e(t,n){var r=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return my(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=My.bind(null,this.syncEngine),e.next=12,Rv(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new qv}},{key:"createDatastore",value:function(e){var t,n=Bp(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new Up(t));return function(e,t,n,r){return new Gp(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return my(o.syncEngine,e,0)},a=Mp.C()?new Mp:new Lp,new Yp(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new uy(e,t,n,r,i,a);return o&&(u.fc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=Pt(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ru(t),Tu("RemoteStore","RemoteStore shutting down."),n._u.add(5),e.next=5,Zp(n);case 5:n.mu.shutdown(),n.gu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function sg(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return Pt(Nt().mark((function r(){var i;return Nt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return Pt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var cg=function(){function e(t){d(this,e),this.observer=t,this.muted=!1}return v(e,[{key:"next",value:function(e){this.observer.next&&this.Ac(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Ac(this.observer.error,e):Cu("Uncaught Error in snapshot listener:",e)}},{key:"Rc",value:function(){this.muted=!0}},{key:"Ac",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),lg=function(){function e(t,n){var r=this;d(this,e),this.bc=t,this.It=n,this.metadata=new Mu,this.buffer=new Uint8Array,this.Pc=new TextDecoder("utf-8"),this.vc().then((function(e){e&&e.ku()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return v(e,[{key:"close",value:function(){return this.bc.cancel()}},{key:"getMetadata",value:function(){var e=Pt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"wc",value:function(){var e=Pt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.vc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"vc",value:function(){var e=Pt(Nt().mark((function e(){var t,n,r,i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Vc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Pc.decode(t),r=Number(n),isNaN(r)&&this.Sc("length string (".concat(n,") is not valid number")),e.next=9,this.Dc(r);case 9:return i=e.sent,e.abrupt("return",new Zv(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Cc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Vc",value:function(){var e=Pt(Nt().mark((function e(){var t,n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Cc()<0)){e.next=7;break}return e.next=3,this.xc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Cc())<0&&this.Sc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Dc",value:function(){var e=Pt(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.xc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Sc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Pc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Sc",value:function(e){throw this.bc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"xc",value:function(){var e=Pt(Nt().mark((function e(){var t,n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.bc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),hg=function(){function e(t){d(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return v(e,[{key:"lookup",value:function(){var e=Pt(Nt().mark((function e(t){var n,r=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new Lu(Ou.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=Pt(Nt().mark((function e(t,n){var r,i,a,o,u,s;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ru(t),i=Sh(r.It)+"/documents",a={documents:n.map((function(e){return _h(r.It,e)}))},e.next=5,r.fo("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=Nh(r.It,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());Pu(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Ul(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=Pt(Nt().mark((function e(){var t,n=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=ns.fromPath(t);n.mutations.push(new Vl(r,n.precondition(r)))})),e.next=7,function(){var e=Pt(Nt().mark((function e(t,n){var r,i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ru(t),i=Sh(r.It)+"/documents",a={writes:n.map((function(e){return Dh(r.It,e)}))},e.next=3,r.co("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Du();t=Ju.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Lu(Ou.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ju.min())?Il.exists(!1):Il.updateTime(t):Il.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ju.min()))throw new Lu(Ou.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Il.updateTime(t)}return Il.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),fg=function(){function e(t,n,r,i,a){d(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Nc=r.maxAttempts,this.xo=new qp(this.asyncQueue,"transaction_retry")}return v(e,[{key:"run",value:function(){this.Nc-=1,this.kc()}},{key:"kc",value:function(){var e=this;this.xo.Ao(Pt(Nt().mark((function t(){var n,r;return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new hg(e.datastore),(r=e.Mc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Oc(t)}))}))})).catch((function(t){e.Oc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Mc",value:function(e){try{var t=this.updateFunction(e);return!Ys(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Oc",value:function(e){var t=this;this.Nc>0&&this.Fc(e)?(this.Nc-=1,this.asyncQueue.enqueueAndForget((function(){return t.kc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Fc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!Bl(t)}return!1}}]),e}(),dg=function(){function e(t,n,r,i){var a=this;d(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=xu.UNAUTHENTICATED,this.clientId=Hu.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=Pt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Tu("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Tu("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return v(e,[{key:"getConfiguration",value:function(){var e=Pt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Lu(Ou.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Mu;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(Pt(Nt().mark((function n(){var r;return Nt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=jv(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function pg(e,t){return vg.apply(this,arguments)}function vg(){return vg=Pt(Nt().mark((function e(t,n){var r,i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Tu("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=Pt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,up(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),vg.apply(this,arguments)}function yg(e,t){return gg.apply(this,arguments)}function gg(){return gg=Pt(Nt().mark((function e(t,n){var r,i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,mg(t);case 3:return r=e.sent,Tu("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return Dv(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Dv(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),gg.apply(this,arguments)}function mg(e){return kg.apply(this,arguments)}function kg(){return kg=Pt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return Tu("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,pg(t,new ig);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),kg.apply(this,arguments)}function wg(e){return bg.apply(this,arguments)}function bg(){return bg=Pt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return Tu("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,yg(t,new ug);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),bg.apply(this,arguments)}function _g(e){return mg(e).then((function(e){return e.persistence}))}function xg(e){return mg(e).then((function(e){return e.localStore}))}function Ig(e){return wg(e).then((function(e){return e.remoteStore}))}function Eg(e){return wg(e).then((function(e){return e.syncEngine}))}function Sg(e){return Tg.apply(this,arguments)}function Tg(){return Tg=Pt(Nt().mark((function e(t){var n,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wg(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=sy.bind(null,n.syncEngine),r.onUnlisten=fy.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),Tg.apply(this,arguments)}function Cg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Mu;return e.asyncQueue.enqueueAndForget(Pt(Nt().mark((function i(){return Nt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new cg({next:function(a){t.enqueueAndForget((function(){return Hv(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new Lu(Ou.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new Lu(Ou.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new Jv(Hc(n.path),a,{includeMetadataChanges:!0,Nu:!0});return zv(e,o)},i.next=3,Sg(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function Ag(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Mu;return e.asyncQueue.enqueueAndForget(Pt(Nt().mark((function i(){return Nt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new cg({next:function(n){t.enqueueAndForget((function(){return Hv(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Lu(Ou.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new Jv(n,a,{includeMetadataChanges:!0,Nu:!0});return zv(e,o)},i.next=3,Sg(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var Ng=new Map;function Dg(e,t,n){if(!n)throw new Lu(Ou.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Pg(e,t,n,r){if(!0===t&&!0===r)throw new Lu(Ou.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Rg(e){if(!ns.isDocumentKey(e))throw new Lu(Ou.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Og(e){if(ns.isDocumentKey(e))throw new Lu(Ou.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Lg(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Du()}function Mg(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Lu(Ou.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Lg(e);throw new Lu(Ou.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function Fg(e,t){if(t<=0)throw new Lu(Ou.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var jg=function(){function e(t){var n;if(d(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Lu(Ou.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Lu(Ou.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Pg("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return v(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),Ug=function(){function e(t,n,r,i){d(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new jg({}),this._settingsFrozen=!1}return v(e,[{key:"app",get:function(){if(!this._app)throw new Lu(Ou.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Lu(Ou.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new jg(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new ju;switch(e.type){case"gapi":var t=e.client;return new Bu(t,e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Lu(Ou.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=Ng.get(e);t&&(Tu("ComponentProvider","Removing Datastore"),Ng.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function Vg(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=Mg(e,Ug))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&Au("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=xu.MOCK_USER;else{o=Ye(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new Lu(Ou.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new xu(s)}e._authCredentials=new Uu(new Fu(o,u))}}var Kg=function(){function e(t,n,r){d(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return v(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new qg(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),Bg=function(){function e(t,n,r){d(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return v(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),qg=function(e){g(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,e,r,Hc(i)))._path=i,a.type="collection",a}return v(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new Kg(this.firestore,null,new ns(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(Bg);function zg(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=At(e),Dg("collection","path",t),e instanceof Ug){var a=$u.fromString.apply($u,[t].concat(r));return Og(a),new qg(e,null,a)}if(!(e instanceof Kg||e instanceof qg))throw new Lu(Ou.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child($u.fromString.apply($u,[t].concat(r)));return Og(o),new qg(e.firestore,null,o)}function Wg(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=At(e),1===arguments.length&&(t=Hu.R()),Dg("doc","path",t),e instanceof Ug){var a=$u.fromString.apply($u,[t].concat(r));return Rg(a),new Kg(e,null,new ns(a))}if(!(e instanceof Kg||e instanceof qg))throw new Lu(Ou.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child($u.fromString.apply($u,[t].concat(r)));return Rg(o),new Kg(e.firestore,e instanceof qg?e.converter:null,new ns(o))}function Hg(e,t){return e=At(e),t=At(t),(e instanceof Kg||e instanceof qg)&&(t instanceof Kg||t instanceof qg)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Gg(e,t){return e=At(e),t=At(t),e instanceof Bg&&t instanceof Bg&&e.firestore===t.firestore&&el(e._query,t._query)&&e.converter===t.converter}var Qg=function(){function e(){var t=this;d(this,e),this.$c=Promise.resolve(),this.Bc=[],this.Lc=!1,this.Uc=[],this.qc=null,this.Kc=!1,this.Gc=!1,this.Qc=[],this.xo=new qp(this,"async_queue_retry"),this.jc=function(){var e=Kp();e&&Tu("AsyncQueue","Visibility state changed to "+e.visibilityState),t.xo.bo()};var n=Kp();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.jc)}return v(e,[{key:"isShuttingDown",get:function(){return this.Lc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Wc(),this.zc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Lc){this.Lc=!0,this.Gc=e||!1;var t=Kp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.jc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Wc(),this.Lc)return new Promise((function(){}));var n=new Mu;return this.zc((function(){return t.Lc&&t.Gc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Bc.push(e),t.Hc()}))}},{key:"Hc",value:function(){var e=Pt(Nt().mark((function e(){var t=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Bc.length){e.next=14;break}return e.prev=1,e.next=4,this.Bc[0]();case 4:this.Bc.shift(),this.xo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),bs(e.t0)){e.next=12;break}throw e.t0;case 12:Tu("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Bc.length>0&&this.xo.Ao((function(){return t.Hc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"zc",value:function(e){var t=this,n=this.$c.then((function(){return t.Kc=!0,e().catch((function(e){t.qc=e,t.Kc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Cu("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Kc=!1,e}))}));return this.$c=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Wc(),this.Qc.indexOf(e)>-1&&(t=0);var i=Fv.createAndSchedule(this,e,t,n,(function(e){return r.Jc(e)}));return this.Uc.push(i),i}},{key:"Wc",value:function(){this.qc&&Du()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Yc",value:function(){var e=Pt(Nt().mark((function e(){var t;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.$c,e.next=3,t;case 3:if(t!==this.$c){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Xc",value:function(e){var t,n=Me(this.Uc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Zc",value:function(e){var t=this;return this.Yc().then((function(){t.Uc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=Me(t.Uc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Yc()}))}},{key:"ta",value:function(e){this.Qc.push(e)}},{key:"Jc",value:function(e){var t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}]),e}();function Yg(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=Me(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var Xg=function(){function e(){d(this,e),this._progressObserver={},this._taskCompletionResolver=new Mu,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return v(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),Jg=function(e){g(n,e);var t=x(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new Qg,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return v(n,[{key:"_terminate",value:function(){return this._firestoreClient||$g(this),this._firestoreClient.terminate()}}]),n}(Ug);function Zg(e){return e._firestoreClient||$g(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function $g(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new Gs(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new dg(e._authCredentials,e._appCheckCredentials,e._queue,r)}function em(e,t,n){var r=new Mu;return e.asyncQueue.enqueue(Pt(Nt().mark((function i(){var a;return Nt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,pg(e,n);case 3:return i.next=5,yg(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===Ou.FAILED_PRECONDITION||e.code===Ou.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(a=i.t0)){i.next=13;break}throw a;case 13:Au("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function tm(e){return function(e){return e.asyncQueue.enqueue(Pt(Nt().mark((function t(){var n,r;return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_g(e);case 2:return n=t.sent,t.next=5,Ig(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=Ru(e);return t._u.delete(0),Xp(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(Zg(e=Mg(e,Jg)))}function nm(e){return function(e){return e.asyncQueue.enqueue(Pt(Nt().mark((function t(){var n,r;return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_g(e);case 2:return n=t.sent,t.next=5,Ig(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=Pt(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Ru(t))._u.add(0),e.next=4,Zp(n);case 4:n.gu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(Zg(e=Mg(e,Jg)))}function rm(e,t){var n=Zg(e=Mg(e,Jg)),r=new Xg;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new lg(e,t)}(function(e,t){if(e instanceof Uint8Array)return sg(e,t);if(e instanceof ArrayBuffer)return sg(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,Bp(t));e.asyncQueue.enqueueAndForget(Pt(Nt().mark((function t(){return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=rg,t.next=3,Eg(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function im(e,t){return function(e,t){return e.asyncQueue.enqueue(Pt(Nt().mark((function n(){return Nt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=Ru(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ns.getNamedQuery(e,t)}))},n.next=3,xg(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(Zg(e=Mg(e,Jg)),t).then((function(t){return t?new Bg(e,null,t.query):null}))}function am(e){if(e._initialized||e._terminated)throw new Lu(Ou.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var om=function(){function e(){d(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Lu(Ou.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ts(n)}return v(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var um=function(){function e(t){d(this,e),this._byteString=t}return v(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Us.fromBase64String(t))}catch(t){throw new Lu(Ou.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Us.fromUint8Array(t))}}]),e}(),sm=v((function e(t){d(this,e),this._methodName=t})),cm=function(){function e(t,n){if(d(this,e),!isFinite(t)||t<-90||t>90)throw new Lu(Ou.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Lu(Ou.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return v(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Gu(this._lat,e._lat)||Gu(this._long,e._long)}}]),e}(),lm=/^__.*__$/,hm=function(){function e(t,n,r){d(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return v(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Rl(e,this.data,this.fieldMask,t,this.fieldTransforms):new Pl(e,this.data,t,this.fieldTransforms)}}]),e}(),fm=function(){function e(t,n,r){d(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return v(e,[{key:"toMutation",value:function(e,t){return new Rl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function dm(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Du()}}var pm=function(){function e(t,n,r,i,a,o){d(this,e),this.settings=t,this.databaseId=n,this.It=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ea(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return v(e,[{key:"path",get:function(){return this.settings.path}},{key:"na",get:function(){return this.settings.na}},{key:"sa",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ia",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.sa({path:n,ra:!1});return r.oa(e),r}},{key:"ua",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.sa({path:n,ra:!1});return r.ea(),r}},{key:"ca",value:function(e){return this.sa({path:void 0,ra:!0})}},{key:"aa",value:function(e){return Om(e,this.settings.methodName,this.settings.ha||!1,this.path,this.settings.la)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"ea",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.oa(this.path.get(e))}},{key:"oa",value:function(e){if(0===e.length)throw this.aa("Document fields must not be empty");if(dm(this.na)&&lm.test(e))throw this.aa('Document fields cannot begin and end with "__"')}}]),e}(),vm=function(){function e(t,n,r){d(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.It=r||Bp(t)}return v(e,[{key:"fa",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new pm({na:e,methodName:t,la:n,path:ts.emptyPath(),ra:!1,ha:r},this.databaseId,this.It,this.ignoreUndefinedProperties)}}]),e}();function ym(e){var t=e._freezeSettings(),n=Bp(e._databaseId);return new vm(e._databaseId,!!t.ignoreUndefinedProperties,n)}function gm(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.fa(a.merge||a.mergeFields?2:0,t,n,i);Nm("Data must be an object, but it was:",o,r);var u,s,c=Cm(r,o);if(a.merge)u=new js(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,h=[],f=Me(a.mergeFields);try{for(f.s();!(l=f.n()).done;){var d=l.value,p=Dm(t,d,n);if(!o.contains(p))throw new Lu(Ou.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));Lm(h,p)||h.push(p)}}catch(v){f.e(v)}finally{f.f()}u=new js(h),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new hm(new kc(c),u,s)}var mm=function(e){g(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.na)throw 1===e.na?e.aa("".concat(this._methodName,"() can only appear at the top level of your update data")):e.aa("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(sm);function km(e,t,n){return new pm({na:3,la:t.settings.la,methodName:e._methodName,ra:n},t.databaseId,t.It,t.ignoreUndefinedProperties)}var wm=function(e){g(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"_toFieldTransform",value:function(e){return new _l(e.path,new pl)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(sm),bm=function(e){g(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).da=r,i}return v(n,[{key:"_toFieldTransform",value:function(e){var t=km(this,e,!0),n=this.da.map((function(e){return Tm(e,t)})),r=new vl(n);return new _l(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(sm),_m=function(e){g(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).da=r,i}return v(n,[{key:"_toFieldTransform",value:function(e){var t=km(this,e,!0),n=this.da.map((function(e){return Tm(e,t)})),r=new gl(n);return new _l(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(sm),xm=function(e){g(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e))._a=r,i}return v(n,[{key:"_toFieldTransform",value:function(e){var t=new kl(e.It,cl(e.It,this._a));return new _l(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(sm);function Im(e,t,n,r){var i=e.fa(1,t,n);Nm("Data must be an object, but it was:",i,r);var a=[],o=kc.empty();Ns(r,(function(e,r){var u=Rm(t,e,n);r=At(r);var s=i.ua(u);if(r instanceof mm)a.push(u);else{var c=Tm(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new js(a);return new fm(o,u,i.fieldTransforms)}function Em(e,t,n,r,i,a){var o=e.fa(1,t,n),u=[Dm(t,r,n)],s=[i];if(a.length%2!=0)throw new Lu(Ou.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(Dm(t,a[c])),s.push(a[c+1]);for(var l=[],h=kc.empty(),f=u.length-1;f>=0;--f)if(!Lm(l,u[f])){var d=u[f],p=s[f];p=At(p);var v=o.ua(d);if(p instanceof mm)l.push(d);else{var y=Tm(p,v);null!=y&&(l.push(d),h.set(d,y))}}var g=new js(l);return new fm(h,g,o.fieldTransforms)}function Sm(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Tm(n,e.fa(r?4:3,t))}function Tm(e,t){if(Am(e=At(e)))return Nm("Unsupported field value:",t,e),Cm(e,t);if(e instanceof sm)return function(e,t){if(!dm(t.na))throw t.aa("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.aa("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ra&&4!==t.na)throw t.aa("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=Me(e);try{for(a.s();!(n=a.n()).done;){var o=Tm(n.value,t.ca(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=At(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return cl(t.It,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Xu.fromDate(e);return{timestampValue:yh(t.It,n)}}if(e instanceof Xu){var r=new Xu(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:yh(t.It,r)}}if(e instanceof cm)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof um)return{bytesValue:gh(t.It,e._byteString)};if(e instanceof Kg){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.aa("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:wh(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.aa("Unsupported field value: ".concat(Lg(e)))}(e,t)}function Cm(e,t){var n={};return Ds(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ns(e,(function(e,r){var i=Tm(r,t.ia(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Am(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Xu||e instanceof cm||e instanceof um||e instanceof Kg||e instanceof sm)}function Nm(e,t,n){if(!Am(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=Lg(n);throw"an object"===r?t.aa(e+" a custom object"):t.aa(e+" "+r)}}function Dm(e,t,n){if((t=At(t))instanceof om)return t._internalPath;if("string"==typeof t)return Rm(e,t);throw Om("Field path arguments must be of type string or ",e,!1,void 0,n)}var Pm=new RegExp("[~\\*/\\[\\]]");function Rm(e,t,n){if(t.search(Pm)>=0)throw Om("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return I(om,f(t.split(".")))._internalPath}catch(r){throw Om("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Om(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new Lu(Ou.INVALID_ARGUMENT,u+e+s)}function Lm(e,t){return e.some((function(e){return e.isEqual(t)}))}var Mm=function(){function e(t,n,r,i,a){d(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return v(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new Kg(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new Fm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(jm("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),Fm=function(e){g(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"data",value:function(){return ur(m(n.prototype),"data",this).call(this)}}]),n}(Mm);function jm(e,t){return"string"==typeof t?Rm(e,t):t instanceof om?t._internalPath:t._delegate._internalPath}var Um=function(){function e(t,n){d(this,e),this.hasPendingWrites=t,this.fromCache=n}return v(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),Vm=function(e){g(n,e);var t=x(n);function n(e,r,i,a,o,u){var s;return d(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return v(n,[{key:"exists",value:function(){return ur(m(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new Km(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(jm("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(Mm),Km=function(e){g(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ur(m(n.prototype),"data",this).call(this,e)}}]),n}(Vm),Bm=function(){function e(t,n,r,i){d(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new Um(i.hasPendingWrites,i.fromCache),this.query=r}return v(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new Km(n._firestore,n._userDataWriter,r.key,r,new Um(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Lu(Ou.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new Km(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Um(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new Km(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Um(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:qm(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function qm(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Du()}}function zm(e,t){return e instanceof Vm&&t instanceof Vm?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Bm&&t instanceof Bm&&e._firestore===t._firestore&&Gg(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function Wm(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Lu(Ou.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Hm=v((function e(){d(this,e)}));function Gm(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var Qm=function(e){g(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).wa=e,a.ma=r,a.ga=i,a.type="where",a}return v(n,[{key:"_apply",value:function(e){var t=ym(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Lu(Ou.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){ak(o,a);var s,c=[],l=Me(o);try{for(l.s();!(s=l.n()).done;){var h=s.value;c.push(ik(r,e,h))}}catch(d){l.e(d)}finally{l.f()}u={arrayValue:{values:c}}}else u=ik(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||ak(o,a),u=Sm(n,"where",o,"in"===a||"not-in"===a);var f=Nc.create(i,a,u);return function(e,t){if(t.dt()){var n=Yc(e);if(null!==n&&!n.isEqual(t.field))throw new Lu(Ou.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=Qc(e);null!==r&&ok(e,t.field,r)}var i=function(e,t){var n,r=Me(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new Lu(Ou.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Lu(Ou.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,f),f}(e._query,0,t,e.firestore._databaseId,this.wa,this.ma,this.ga);return new Bg(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new zc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(Hm);var Ym=function(e){g(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).wa=e,i.ya=r,i.type="orderBy",i}return v(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Lu(Ou.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Lu(Ou.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Vc(t,n);return function(e,t){if(null===Qc(e)){var n=Yc(e);null!==n&&ok(e,n,t.field)}}(e,r),r}(e._query,this.wa,this.ya);return new Bg(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new zc(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(Hm);var Xm=function(e){g(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).type=e,a.pa=r,a.Ia=i,a}return v(n,[{key:"_apply",value:function(e){return new Bg(e.firestore,e.converter,$c(e._query,this.pa,this.Ia))}}]),n}(Hm);var Jm=function(e){g(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).type=e,a.Ta=r,a.Ea=i,a}return v(n,[{key:"_apply",value:function(e){var t=rk(e,this.type,this.Ta,this.Ea);return new Bg(e.firestore,e.converter,function(e,t){return new zc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(Hm);function Zm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Jm("startAt",t,!0)}function $m(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Jm("startAfter",t,!1)}var ek=function(e){g(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).type=e,a.Ta=r,a.Ea=i,a}return v(n,[{key:"_apply",value:function(e){var t=rk(e,this.type,this.Ta,this.Ea);return new Bg(e.firestore,e.converter,function(e,t){return new zc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(Hm);function tk(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new ek("endBefore",t,!1)}function nk(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new ek("endAt",t,!0)}function rk(e,t,n,r){if(n[0]=At(n[0]),n[0]instanceof Mm)return function(e,t,n,r,i){if(!r)throw new Lu(Ou.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=Me(Jc(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(uc(t,r.key));else{var c=r.data.field(s.field);if(zs(c))throw new Lu(Ou.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new Lu(Ou.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(h){u.e(h)}finally{u.f()}return new Uc(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=ym(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new Lu(Ou.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new Lu(Ou.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!Xc(e)&&-1!==c.indexOf("/"))throw new Lu(Ou.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child($u.fromString(c));if(!ns.isDocumentKey(l))throw new Lu(Ou.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var h=new ns(l);u.push(uc(t,h))}else{var f=Sm(n,r,c);u.push(f)}}return new Uc(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function ik(e,t,n){if("string"==typeof(n=At(n))){if(""===n)throw new Lu(Ou.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Xc(t)&&-1!==n.indexOf("/"))throw new Lu(Ou.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child($u.fromString(n));if(!ns.isDocumentKey(r))throw new Lu(Ou.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return uc(e,new ns(r))}if(n instanceof Kg)return uc(e,n._key);throw new Lu(Ou.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Lg(n),"."))}function ak(e,t){if(!Array.isArray(e)||0===e.length)throw new Lu(Ou.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new Lu(Ou.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function ok(e,t,n){if(!n.isEqual(t))throw new Lu(Ou.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var uk={maxAttempts:5},sk=function(){function e(){d(this,e)}return v(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(ec(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Bs(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(qs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Du()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Ns(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new cm(Bs(e.latitude),Bs(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Ws(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Hs(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Ks(e);return new Xu(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=$u.fromString(e);Pu(zh(n));var r=new Qs(n.get(1),n.get(3)),i=new ns(n.popFirst(5));return r.isEqual(t)||Cu("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function ck(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var lk=function(e){g(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return v(n,[{key:"convertBytes",value:function(e){return new um(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Kg(this.firestore,null,t)}}]),n}(sk),hk=function(){function e(t,n){d(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ym(t)}return v(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=fk(e,this._firestore),i=ck(r.converter,t,n),a=gm(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Il.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=fk(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=At(t))||t instanceof om?Em(this._dataReader,"WriteBatch.update",i._key,t,n,o):Im(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Il.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=fk(e,this._firestore);return this._mutations=this._mutations.concat(new Ul(t._key,Il.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Lu(Ou.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function fk(e,t){if((e=At(e)).firestore!==t)throw new Lu(Ou.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var dk=function(e){g(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return v(n,[{key:"convertBytes",value:function(e){return new um(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Kg(this.firestore,null,t)}}]),n}(sk);function pk(e){e=Mg(e,Kg);var t=Mg(e.firestore,Jg),n=Zg(t),r=new dk(t);return function(e,t){var n=new Mu;return e.asyncQueue.enqueueAndForget(Pt(Nt().mark((function r(){return Nt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Pt(Nt().mark((function e(t,n,r){var i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=Ru(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new Lu(Ou.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=jv(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,xg(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new Vm(t,r,e._key,n,new Um(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function vk(e){e=Mg(e,Bg);var t=Mg(e.firestore,Jg),n=Zg(t),r=new dk(t);return function(e,t){var n=new Mu;return e.asyncQueue.enqueueAndForget(Pt(Nt().mark((function r(){return Nt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Pt(Nt().mark((function e(t,n,r){var i,a,o,u,s;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,gp(t,n,!0);case 3:i=e.sent,a=new iy(n,i.Hi),o=a.ju(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=jv(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,xg(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new Bm(t,r,e,n)}))}function yk(e,t,n){e=Mg(e,Kg);var r=Mg(e.firestore,Jg),i=ck(e.converter,t,n);return wk(r,[gm(ym(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Il.none())])}function gk(e,t,n){e=Mg(e,Kg);for(var r=Mg(e.firestore,Jg),i=ym(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return wk(r,[("string"==typeof(t=At(t))||t instanceof om?Em(i,"updateDoc",e._key,t,n,o):Im(i,"updateDoc",e._key,t)).toMutation(e._key,Il.exists(!0))])}function mk(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=At(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||Yg(n[s])||(u=n[s],s++);var c,l,h,f={includeMetadataChanges:u.includeMetadataChanges};if(Yg(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof Kg)l=Mg(e.firestore,Jg),h=Hc(e._key.path),c={next:function(t){n[s]&&n[s](bk(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=Mg(e,Bg);l=Mg(p.firestore,Jg),h=p._query;var v=new dk(l);c={next:function(e){n[s]&&n[s](new Bm(l,v,p,e))},error:n[s+1],complete:n[s+2]},Wm(e._query)}return function(e,t,n,r){var i=new cg(r),a=new Jv(t,i,n);return e.asyncQueue.enqueueAndForget(Pt(Nt().mark((function t(){return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=zv,t.next=3,Sg(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Rc(),e.asyncQueue.enqueueAndForget(Pt(Nt().mark((function t(){return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Hv,t.next=3,Sg(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Zg(l),h,f,c)}function kk(e,t){return function(e,t){var n=new cg(t);return e.asyncQueue.enqueueAndForget(Pt(Nt().mark((function t(){return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Ru(e).Ru.add(t),t.next()},t.next=3,Sg(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Rc(),e.asyncQueue.enqueueAndForget(Pt(Nt().mark((function t(){return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Ru(e).Ru.delete(t)},t.next=3,Sg(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Zg(e=Mg(e,Jg)),Yg(t)?t:{next:t})}function wk(e,t){return function(e,t){var n=new Mu;return e.asyncQueue.enqueueAndForget(Pt(Nt().mark((function r(){return Nt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=py,r.next=3,Eg(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(Zg(e),t)}function bk(e,t,n){var r=n.docs.get(t._key),i=new dk(e);return new Vm(e,i,t._key,r,new Um(n.hasPendingWrites,n.fromCache),t.converter)}var _k=function(e){g(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r))._firestore=e,i}return v(n,[{key:"get",value:function(e){var t=this,r=fk(e,this._firestore),i=new dk(this._firestore);return ur(m(n.prototype),"get",this).call(this,e).then((function(e){return new Vm(t._firestore,i,r._key,e._document,new Um(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){d(this,e),this._firestore=t,this._transaction=n,this._dataReader=ym(t)}return v(e,[{key:"get",value:function(e){var t=this,n=fk(e,this._firestore),r=new lk(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Du();var i=e[0];if(i.isFoundDocument())return new Mm(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Mm(t._firestore,r,n._key,null,n.converter);throw Du()}))}},{key:"set",value:function(e,t,n){var r=fk(e,this._firestore),i=ck(r.converter,t,n),a=gm(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=fk(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=At(t))||t instanceof om?Em(this._dataReader,"Transaction.update",i._key,t,n,o):Im(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=fk(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function xk(e,t,n){e=Mg(e,Jg);var r=Object.assign(Object.assign({},uk),n);return function(e){if(e.maxAttempts<1)throw new Lu(Ou.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new Mu;return e.asyncQueue.enqueueAndForget(Pt(Nt().mark((function i(){var a;return Nt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,function(e){return wg(e).then((function(e){return e.datastore}))}(e);case 2:a=i.sent,new fg(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(Zg(e),(function(n){return t(new _k(e,n))}),r)}function Ik(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new bm("arrayUnion",t)}function Ek(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new _m("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Iu=e}(An),_n(new Rt("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new Jg(new Vu(e.getProvider("auth-internal")),new zu(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Lu(Ou.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qs(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Ln(_u,"3.4.15",e),Ln(_u,"3.4.15","esm2017")}();function Sk(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Lu("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function Tk(){if("undefined"===typeof Uint8Array)throw new Lu("unimplemented","Uint8Arrays are not available in this environment.")}function Ck(){if("undefined"==typeof atob)throw new Lu("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Ak=function(){function e(t){d(this,e),this._delegate=t}return v(e,[{key:"toBase64",value:function(){return Ck(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return Tk(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return Ck(),new e(um.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return Tk(),new e(um.fromUint8Array(t))}}]),e}();function Nk(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=Me(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var Dk=function(){function e(){d(this,e)}return v(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){am(e=Mg(e,Jg));var n=Zg(e),r=e._freezeSettings(),i=new ug;return em(n,i,new ag(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){am(e=Mg(e,Jg));var t=Zg(e),n=e._freezeSettings(),r=new ug;return em(t,r,new og(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new Lu(Ou.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Mu;return e._queue.enqueueAndForgetEvenWhileRestricted(Pt(Nt().mark((function n(){return Nt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=Pt(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ms.C()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,ms.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(np(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),Pk=function(){function e(t,n,r){var i=this;d(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Qs||(this._appCompat=t)}return v(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Au("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Vg(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return tm(this._delegate)}},{key:"disableNetwork",value:function(){return nm(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&Pg("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new Mu;return e.asyncQueue.enqueueAndForget(Pt(Nt().mark((function n(){return Nt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=Ey,n.next=3,Eg(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(Zg(e=Mg(e,Jg)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return kk(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new Lu("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new Hk(this,zg(this._delegate,e))}catch(t){throw jk(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new Fk(this,Wg(this._delegate,e))}catch(t){throw jk(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new qk(this,function(e,t){if(e=Mg(e,Ug),Dg("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Lu(Ou.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new Bg(e,null,function(e){return new zc($u.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw jk(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return xk(this._delegate,(function(n){return e(new Ok(t,n))}))}},{key:"batch",value:function(){var e=this;return Zg(this._delegate),new Lk(new hk(this._delegate,(function(t){return wk(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return rm(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return im(this._delegate,e).then((function(e){return e?new qk(t,e):null}))}}]),e}(),Rk=function(e){g(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return v(n,[{key:"convertBytes",value:function(e){return new Ak(new um(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return Fk.forKey(t,this.firestore,null)}}]),n}(sk);var Ok=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new Rk(t)}return v(e,[{key:"get",value:function(e){var t=this,n=Gk(e);return this._delegate.get(n).then((function(e){return new Kk(t._firestore,new Vm(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=Gk(e);return n?(Sk("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=Gk(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=Gk(e);return this._delegate.delete(t),this}}]),e}(),Lk=function(){function e(t){d(this,e),this._delegate=t}return v(e,[{key:"set",value:function(e,t,n){var r=Gk(e);return n?(Sk("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=Gk(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=Gk(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),Mk=function(){function e(t,n,r){d(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return v(e,[{key:"fromFirestore",value:function(e,t){var n=new Km(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Bk(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new Rk(t),n),i.set(n,a)),a}}]),e}();Mk.INSTANCES=new WeakMap;var Fk=function(){function e(t,n){d(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Rk(t)}return v(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new Hk(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new Hk(this.firestore,zg(this._delegate,e))}catch(t){throw jk(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=At(e))instanceof Kg&&Hg(this._delegate,e)}},{key:"set",value:function(e,t){t=Sk("DocumentReference.set",t);try{return t?yk(this._delegate,e,t):yk(this._delegate,e)}catch(n){throw jk(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?gk(this._delegate,e):gk.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw jk(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return wk(Mg(e.firestore,Jg),[new Ul(e._key,Il.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Uk(n),a=Vk(n,(function(t){return new Kk(e.firestore,new Vm(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return mk(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?pk(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Mg(e,Kg);var t=Mg(e.firestore,Jg);return Cg(Zg(t),e._key,{source:"server"}).then((function(n){return bk(t,e,n)}))}(this._delegate):function(e){e=Mg(e,Kg);var t=Mg(e.firestore,Jg);return Cg(Zg(t),e._key).then((function(n){return bk(t,e,n)}))}(this._delegate),t.then((function(e){return new Kk(n.firestore,new Vm(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(Mk.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new Lu("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new Kg(n._delegate,r,new ns(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new Kg(n._delegate,r,t))}}]),e}();function jk(e,t,n){return e.message=e.message.replace(t,n),e}function Uk(e){var t,n=Me(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!Nk(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function Vk(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=Nk(e[0])?e[0]:Nk(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Kk=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return v(e,[{key:"ref",get:function(){return new Fk(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return zm(this._delegate,e._delegate)}}]),e}(),Bk=function(e){g(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||Du()}(void 0!==t),t}}]),n}(Kk),qk=function(){function e(t,n){d(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Rk(t)}return v(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,Gm(this._delegate,function(e,t,n){var r=t,i=jm("where",e);return new Qm(i,r,n)}(t,n,r)))}catch(i){throw jk(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,Gm(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=jm("orderBy",e);return new Ym(n,t)}(t,n)))}catch(r){throw jk(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,Gm(this._delegate,function(e){return Fg("limit",e),new Xm("limit",e,"F")}(t)))}catch(n){throw jk(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,Gm(this._delegate,function(e){return Fg("limitToLast",e),new Xm("limitToLast",e,"L")}(t)))}catch(n){throw jk(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,Gm(this._delegate,Zm.apply(void 0,arguments)))}catch(t){throw jk(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,Gm(this._delegate,$m.apply(void 0,arguments)))}catch(t){throw jk(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,Gm(this._delegate,tk.apply(void 0,arguments)))}catch(t){throw jk(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,Gm(this._delegate,nk.apply(void 0,arguments)))}catch(t){throw jk(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return Gg(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?vk(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Mg(e,Bg);var t=Mg(e.firestore,Jg),n=Zg(t),r=new dk(t);return Ag(n,e._query,{source:"server"}).then((function(n){return new Bm(t,r,e,n)}))}(this._delegate):function(e){e=Mg(e,Bg);var t=Mg(e.firestore,Jg),n=Zg(t),r=new dk(t);return Wm(e._query),Ag(n,e._query).then((function(n){return new Bm(t,r,e,n)}))}(this._delegate),t.then((function(e){return new Wk(n.firestore,new Bm(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Uk(n),a=Vk(n,(function(t){return new Wk(e.firestore,new Bm(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return mk(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(Mk.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),zk=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return v(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new Bk(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),Wk=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return v(e,[{key:"query",get:function(){return new qk(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new Bk(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new zk(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new Bk(n._firestore,r))}))}},{key:"isEqual",value:function(e){return zm(this._delegate,e._delegate)}}]),e}(),Hk=function(e){g(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return v(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new Fk(this.firestore,e):null}},{key:"doc",value:function(e){try{return new Fk(this.firestore,void 0===e?Wg(this._delegate):Wg(this._delegate,e))}catch(t){throw jk(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=Mg(e.firestore,Jg),r=Wg(e),i=ck(e.converter,t);return wk(n,[gm(ym(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Il.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new Fk(t.firestore,e)}))}},{key:"isEqual",value:function(e){return Hg(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(Mk.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(qk);function Gk(e){return Mg(e,Kg)}var Qk,Yk=function(){function e(){d(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=I(om,n)}return v(e,[{key:"isEqual",value:function(e){return(e=At(e))instanceof om&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(ts.keyField().canonicalString())}}]),e}(),Xk=function(){function e(t){d(this,e),this._delegate=t}return v(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new wm("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new mm("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=Ik.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=Ek.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new xm("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),Jk={Firestore:Pk,GeoPoint:cm,Timestamp:Xu,Blob:Ak,Transaction:Ok,WriteBatch:Lk,DocumentReference:Fk,DocumentSnapshot:Kk,Query:qk,QueryDocumentSnapshot:Bk,QuerySnapshot:Wk,CollectionReference:Hk,FieldPath:Yk,FieldValue:Xk,setLogLevel:function(e){!function(e){Eu.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};(function(e,t){e.INTERNAL.registerComponent(new Rt("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},Jk)))})(Qk=ar,(function(e,t){return new Pk(e,t,new Dk)})),Qk.registerVersion("@firebase/firestore-compat","0.1.24");var Zk=ar.initializeApp({apiKey:"AIzaSyDt_KICb8jM4LODy7lLJZ9y5PZeRni3UZ0",authDomain:"mealeasy-7c600.firebaseapp.com",databaseURL:"https://mealeasy-7c600-default-rtdb.europe-west1.firebasedatabase.app",projectId:"mealeasy-7c600",storageBucket:"mealeasy-7c600.appspot.com",messagingSenderId:"277026662201",appId:"1:277026662201:web:fd8b2f11746087fc816ae8",measurementId:"G-6XKQKQRG0L"}).firestore();function $k(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var ew=n(694),tw=n.n(ew),nw=n(184),rw=["xxl","xl","lg","md","sm","xs"],iw=r.createContext({prefixes:{},breakpoints:rw,minBreakpoint:"xs"});iw.Consumer,iw.Provider;function aw(e,t){var n=(0,r.useContext)(iw).prefixes;return e||n[t]||t}function ow(){return(0,r.useContext)(iw).breakpoints}function uw(){return(0,r.useContext)(iw).minBreakpoint}var sw=["bsPrefix","fluid","as","className"],cw=r.forwardRef((function(e,t){var n=e.bsPrefix,r=e.fluid,i=e.as,a=void 0===i?"div":i,o=e.className,u=$k(e,sw),s=aw(n,"container"),c="string"===typeof r?"-".concat(r):"-fluid";return(0,nw.jsx)(a,Ht(Ht({ref:t},u),{},{className:tw()(o,r?"".concat(s).concat(c):s)}))}));cw.displayName="Container",cw.defaultProps={fluid:!1};var lw=cw,hw=["bsPrefix","className","as"],fw=r.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.as,a=void 0===i?"div":i,o=$k(e,hw),u=aw(n,"row"),s=ow(),c=uw(),l="".concat(u,"-cols"),h=[];return s.forEach((function(e){var t,n=o[e];delete o[e],t=null!=n&&"object"===typeof n?n.cols:n;var r=e!==c?"-".concat(e):"";null!=t&&h.push("".concat(l).concat(r,"-").concat(t))})),(0,nw.jsx)(a,Ht(Ht({ref:t},o),{},{className:tw().apply(void 0,[r,u].concat(h))}))}));fw.displayName="Row";var dw=fw,pw=["as","bsPrefix","className"],vw=["className"];var yw=r.forwardRef((function(e,t){var n=function(e){var t=e.as,n=e.bsPrefix,r=e.className,i=$k(e,pw);n=aw(n,"col");var a=ow(),o=uw(),u=[],s=[];return a.forEach((function(e){var t,r,a,c=i[e];delete i[e],"object"===typeof c&&null!=c?(t=c.span,r=c.offset,a=c.order):t=c;var l=e!==o?"-".concat(e):"";t&&u.push(!0===t?"".concat(n).concat(l):"".concat(n).concat(l,"-").concat(t)),null!=a&&s.push("order".concat(l,"-").concat(a)),null!=r&&s.push("offset".concat(l,"-").concat(r))})),[Ht(Ht({},i),{},{className:tw().apply(void 0,[r].concat(u,s))}),{as:t,bsPrefix:n,spans:u}]}(e),r=l(n,2),i=r[0],a=i.className,o=$k(i,vw),u=r[1],s=u.as,c=void 0===s?"div":s,h=u.bsPrefix,f=u.spans;return(0,nw.jsx)(c,Ht(Ht({},o),{},{ref:t,className:tw()(a,!f.length&&h)}))}));yw.displayName="Col";var gw=yw;var mw=function(){return(0,r.useEffect)((function(){})),(0,nw.jsxs)(lw,{className:"home-page",style:{height:"100vh"},children:[(0,nw.jsx)(dw,{children:(0,nw.jsx)("div",{style:{margin:"auto"},children:(0,nw.jsx)("h1",{style:{color:"#FF9F33"},children:"Chef Easy"})})}),(0,nw.jsxs)(dw,{xl:2,lg:2,md:2,sm:2,xs:2,style:{height:"100%"},children:[(0,nw.jsx)(Oe,{to:"/demo",children:(0,nw.jsx)(gw,{style:{height:"90%",backgroundColor:"#FEC76D"},children:(0,nw.jsx)("div",{style:{textAlign:"center"},children:(0,nw.jsx)("h1",{style:{color:"white",textAlign:"center"},children:"Demo"})})})}),(0,nw.jsx)(Oe,{style:{},to:"/actual",children:(0,nw.jsx)(gw,{style:{height:"90%",backgroundColor:"#FF9F33"},children:(0,nw.jsx)("div",{children:(0,nw.jsx)("h1",{style:{color:"white"},children:"Actual"})})})})]})]})},kw="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAASABIAAD/4QCMRXhpZgAATU0AKgAAAAgABQESAAMAAAABAAEAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAIdpAAQAAAABAAAAWgAAAAAAAABIAAAAAQAAAEgAAAABAAOgAQADAAAAAQABAACgAgAEAAAAAQAAAV+gAwAEAAAAAQAAAV8AAAAA/+0AOFBob3Rvc2hvcCAzLjAAOEJJTQQEAAAAAAAAOEJJTQQlAAAAAAAQ1B2M2Y8AsgTpgAmY7PhCfv/AABEIAV8BXwMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2wBDAAICAgICAgMCAgMFAwMDBQYFBQUFBggGBgYGBggKCAgICAgICgoKCgoKCgoMDAwMDAwODg4ODg8PDw8PDw8PDw//2wBDAQICAgQEBAcEBAcQCwkLEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBD/3QAEABb/2gAMAwEAAhEDEQA/AP38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//Q/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9H9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/0v38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//T/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9T9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/1f38ooooAKKKKACiiigAooooAKKazKgyxCj3rMudc0i0z593GpHbOT+lAGrRXHT+OdCiyI3eUj+6h/mcVzt98UtLtB8sPPbe4X9Bk1PMh8rPU6K+e9R+Nn2cYggQn2Bb9SRXHXnxu8STcWkKxj3wP6f1o5w5T61or4qPxQ8bXsojk1BbcN02qPyyax5vGfiy4kMd3rVwuOysF/kKOYLH3U0saffcLj1NU31TTkzvuY1x6sK+KYry0kbdqOs3MgIz/rW/I816RpOq/CLTbFtQ1y+EcadXuJDt/HJouwsfQza9oy/evIh/wIVA3ijw8pw2oQg/74ryaPxZ8Er+0M0E1tNGB/CDmvkb4q/tKfs+eELx7BdNuprhM58mPcD9CXAok2gVj9DT4v8ADK9dSg/7+Cj/AIS7wx/0E4P+/gr81fDPi7UPiJo1v4k8FeAtXu9MuyRFOIo1RsHBwTJ2rpP7C+Ir4J8C3sYH9+W2XH5yVyPGxXU6VhJvofoQPFnhtuBqUH/fwVKPEvh9umowH/gYr85Na1DXPB+iX3iPxB4NvBY6bE007JLbOVRerbVlyce1eW6J+2N8A5HUahYX0QOOtvnH5Oa0pYiM/hZlVoyh8SP10XXdGf7t7Cf+BirKajYSHCXEbfRhXwJ4U/af/ZW1QpHLPLbSN086CQD9K+nfDWq/BvxlZi88O3Vvcxt3R2Vh+BINdKMro9nWWNvusD9DT68D8SaX4OsMva6lc2zjtHK2K8pu9bvrRy2leJrrA7MwP881LbQz7Sor4iT4k+ObA/u9b88DtJGD/LFaEPx08aWhxcJBcj2G0/1pc4WPs2ivlix/aGmAH9oafj1K4I/mK7XTvjl4fvQPNTyif7xK/wAxT50Fj3KiuIs/H2hXiB1cgHuMMP0rfg1/R7n/AFd0mfQnB/WmpILGxRUaTRSDMbhh7HNSUxBRRRQAUUUUAFFFFABRRRQB/9b9/KKKKACiiigApkjxxoXlYIo6knArmPEXie30NfKUeZcsMhPT3NeSX+tanrD5uZSR1Cg4UfhSbGkerah400exysbG4cdl6fma4u88b6zecWSLbRnv1P5n/CuMLW1uN88iqRz8xH9ax7vxV4etDi51GFD/ALTjNYyqGkYHTT3t9dfNeXTyH0B4rKmuEjztUD36n9ay4Nd0+/Utp1xHcj1Rw38qhumlIPTIrPmuacpV1q/kjjwHIdl3CvKdR1Jrht0n317+tei60m6O3nJ6pj8uK8y1GLbMQOmf51bZBV+1k4HXNOFyd+wKfY9qz+QuM4wcVKkqkgKwJHOKCRt48gOQcZ5FVbiaZ4llJ+YcVbvlJRT6VnKxkiKY5681dwKUk0p6ufXrXz58edUvrTwgHhY4SXueAQpIP6V75LvBPymvAvjtBLN4Fv2jX5oWVgT/ALQZD/OhsLaHFeH/ABXdxaV5bTERN15OM9ulfLnxM1aK41KZmAZmUgEsePoO9e2+G76e88PqfMUb40IzjoRng18y+P7a5iv3lMisfm74qWSz7H/ZZ8Ya7Z6dpOjQapKLSSWZfIDtsHORgZx+Nfdvi3ULlPC11MlyyOqD5sn1r4R/ZY0i7OhaTeJah18yZmdmwBnp0HXt1r7q8X2Etz4Su4IVDyso+UfWvzjM5r27SPvsDD9zFs+GfHfiDUp9A1q1e/aXdbuuzeeQwHBr4O8m+VsmJh7d/wAq+sPHTXFs/ieGeDatpBk8khRwO9fHUE26TfLKUxz619NkK92Vj57PX78bnd6TdX9u6Fgycfxcfzr7W/Z38R61b67ZRJLJskLhueCoQk96+EdM1K43bPNZo8dDzxX2T8B43udVtMcokU0hIOMfLt/ma+qobM+bqbo/Q3WteurmxjaSQklf6mvOnv5y3Dn86vXEZgsIYjI5IQH5jn73OPwzXPAPuPPWsTdm0l5cY+9mpTeS44OfrVJM7M0NJtI+Un6UpAi39rmI64x6Cp4ros3zEt9TWfLKEULtOTyfap4toHPU1AzqdM1m9sZVeCUpjsDXtfhzxRNqKCKTmXsOze31/nXz5BGSM969H8HRv/aFuB0Vwx+i/Mf0FNDPdLPU84eJ2iJ/usRXT2viTWLcjy7nzVHZxn9a8qs5XBJHcmumguBtANTzW2Lsj1S08cAEJqEBX/aWuts9a02+A8iYZPY8GvDo5c8/zp65Db4W2H9K0jUIcOx9B0V49pvirULBhFKfNQfwt/Q16VpWtWerJmBsOPvKeorRMzaNeiiimAUUUUAf/9f9/KKKKACmsdqlvQZp1IRkEHvQB8w6hqcl9qlzPOSXZ269gDgCuf8AE2uLoekrcsdokbaT05x612XxA8OT6DfNq8K/6BO2WYDiNz2b0B7Hp29K4XULOw8Q6XPo+oAtDOuCRwynsyn1FZyvYtHz5qvxPsmu0tbo+VFcsUWUE4Vu270rybxrPPFqRmEm+OQAjnjB/wDr1T+J3wy8ZeEmnuHgOp6Q/wB27gUnYQcqZkHKEdM/dPrXB6JriajpKaPfSf6RbEiIk8sh5AB9jnH1rmcLGil0Ow0vxNf6NOl5ZTNHIhzwf6V9D+GvjCLuOOHxBF5YYDEseSPqV/wr5M3YUg+laOlXbxNGTyBwfwNSmXE/QRbq01fRIbuxlE0XmFdw9xkfqK4TV7cBuuOP5Vm/DO+2PNpKti2vYhLGCcjzU5wPqMiuh1+IKc+h7+9bXvG5ElZnHeVHvYgcsBzSCMZ3IME8Zx2pnnqGXnPUcVNBKWbAFRzCcSaeMtACRzWdbQKdxbk81tShvIwx7Vm2wYuRwcg4rW5JmNbBhn1rzj4ieHJNc8G61Yqm9nt3KjuXQb1/Va9R/fEcDgVUutLuNTs7yyQlWmiZM46bgVz+tF9APgz4feGr660aK3jARYYwpAYAkKMdz7V5b8Z/DK6aYzwXOckYz06cYr7A+H/gfWdF1CXQ7qNWZGZDweeTgj2I6V5H+0n4Tl0oRiZiCpOM5xz+Fb1UrKxhBu9mfUX7KX7Q3hDQfhDpPhe88Kw3FzYtIruijDHP3iTnBNfVkfx9+HDW8smpeEp44VQvmNd2QAT7fhX4tfC/xhc+G/D8dtbsvErvyOTk16/rnx817T/DV6luwVmhdFLKDjeMccZ718hXhVU3GFrei/yPqqVSk6alO9/V/wCZZ8d/Fr4W+M/CPxkm0jRry3u9RW0XTjKwIhRZsybiPU+vbj3r880jZmwBn6V22neJb+30bX7LeGXU4kjkyOT84bP6VzVukhZSOCK9fAYVUk4o8bHYp1WpM3tCsGnmGEJJ4/Ov1P8A2b/hzdf2NJqs9vs84CJWIAO1fmY/TpX56+C7y7WaCE28Mh3DG5ACc+pXGfxNfsP8GdL1eDwNa3VwVt90bSBU5G1htXrnrjP0r3aatTZ5b+NGf4jszHK4RcKScD27Vx4gwS2K63XmvBPtZ92M9q52MzZw6g4rmOiwixZjPHSpIlyoPpUyZ2MxGDjp9aiwwz6VDYxJEHmetLbxdm61GXG6rcXUH2pDRpWsPIA7V6f4Vh8pLi5P/LOMqP8Aek4/lmuCsYyzfiK6HxZrc/hHwV9ptQBeXsn7skZAA+UN/Mihaagjotb8aeHvCVuZNWuQsu3csK8yMPYf4183+NPjzr+o3RtvDr/2dZ4yCP8AWn6nt9BXjWu6rcXdy81zM00rHLOxyTXIGRnJLnOeazSLkz23wl8QvGdzrUEbanPN5rDcGcnjv3r6g0f4kCB0s7/UA05APlkb3CnoTjkZr4d0jXrTwvZ3GtXQDz7THbx93dxyfoo6n6VD4MvfEWsa0kemwS6hq+qyFmWIFmESnn2VSe5wAAaOXsTfQ/UHTNah1aPKsGYcgjj866TTNRl0++iuYmwVPI9R3FeZeB/D1z4Z0cLqkwkvZQPM2nKRj+6D39z+XFd1pVpc6zqUVhZjJY7mbsqDqf8APeuiJLR9JRuJEWQdGAP50+mRoIo1jXooAH4U+tCAooooA//Q/fyiiigAooooAjmhiuIngnRZI3BVlYAqQeoIPBFeLa/8I9pe78HXQs3PP2WfL25PorD54/wyB6V7bRQ0CZ8W6tqOteEZhb+LdOl0zd8olOJbaT12zJx+DBT6ivLte+F/wv8AGx+3xW4069Y7hcWJEeWHIJQZQ8+1ffPjLTl1LQbmMrvMY3YPOcdf0r4p1jwrpYuHks0axlz9+3byzn6D5f0qHEpPueL63+z/AK7E7zeHr+DUIzz5cv7mT8Dyp/MV5Rqfgjxh4caRdX0i5gQEESbC8fv865X9a+p4h4s0xv8ARNSS7QdFuEwf++k/wrYtvHfiCxBXUdMdl7tA4kH5HBrB00a8x4t8I9f1b+27bSrazjvHZ02JLkYXPzYI5yK+tPija6St0lrpUITy4wJCuSC/fBPXFefW3jjwcb6O+uLWO0vIzlZHh8twf94Cuo/tvw1rSKi3KORnlZBnk55ojC10VKV7Hjv2Yb29jmtGCJBzXoTeEtPnYyW18QD2ZQR+YxVb/hDb6NiYriKQdskqf1FOMSHc5Ro/3fA5wapWkGLoAjhuK7NvDOsIOIA/+6ymqUWiapDcxvLZyBQeTtJ/lVpE3Ofis2MhjHUE/wA66nQtHZtQ2nnepAHv2qMWU8VzKzxMqj1U+teqeHrAPdRlVAPBq0I891n4Wz3ms2WsaYjLICN/bIz1yfQ8V8o/tXeB/Ey3kflWMstqkf3vLLAsfcDFfr5Z2kDWsJkjBYAN06HvXO+MNHtb2xd5oldcYIKgj8RWnN7trGfLrc/mQGj6np7CN7BkbJwCjKT+FJq3hPxRqViRHpNw0b9WAwMDnoa/a7xT4O8NrM7SabCSDn5eK84l8OeHGkANoQB0GcivNnh3e6R3xrRtZs/HOy+F3iu8VorXSrpy5HRcdK6ux+BHxKe4S3TQ7p92OQFI5981+yuh6NpdugjtLdUB9AMn9K9s8KeHLCaRWkgBA9RXVCEupzS5eh+V3wo/ZZ8bXOrWZ1ix+zwGRC4dgTsz82AB1A96/V6fwtD4e8MR2MEJjCKq7f7qoMKPyFe1aR4fs7MLP5Ko2OBjGPrVXxjYJcaTIwGNo5rrc7xsYKCTuj4O1m28y6bjvWDNaFDgcZOa9T1nTF85nwOpxXG3Vm2/CoT9KwaLOZji3GQDljyBVSRMMRXVW+k30khWK3lYkdkJ706bwj4juLkvb6bMynoduB+uKjlHc4TysSfT1rSgiPmYz1rsofhz4rlbc1skI9ZJVH6Ak10dl8M9QRg15ewRgf3dzn+QpWKMKwiWC0e5k+6gLHjJ49K82+LnjBb94rAwLDbw48rJ3OVAwOnAz14z9a+mYvDOl2lq9tPeE742jJAC8MMEjOecGuSuPB3wqtWSTUYI7xohgGeUv+gIpS1HHQ/P6eKS8d1t42lduFVQWYknsBk13Ph74L/EXxDte30eS0gbH727/cLjuQG+Y/gpr7Ys/EXhbR18nw3pioP+na3Cfm2B/Okm8S69eHMFslsp7yvvb/vleP1pJAzwrSP2WNKkvo9Q8baw92sSgLa2o8tAOpzI2WOT6AV9BaPZeD/BFqNJ8OWcOnrJgFIl3TSkdNxGXc+mc+1Zsdpfag4N9eyOD1WP92v6c/rX0X8LfCWn6VZvqyWqRzTfKrYy+3udxyefrWsYkNnF6L4N8WeI2Wa5gOj2R/jnGZ2H+zF/D9XOf9mvdNB8O6Z4dtfs2nodzcySMcySH1Y/yHQdhW7RVpCbCiiimIKKKKAP/9H9/KKKKACiiigAooooAayK6sjDKsCCPrXyB4y05tK1m6tP4Uc7fcHkfpX2DXh/xa0TeItWiX7w2OR6jpQB87Pgmq0ie1OnYxuRTkfeMispItFNoI5V2SKGHoRmsubQNKlO5rVM+qjB/Suh70bcioLuc6mixwjNpPPB/uStj8qtp/b0H+o1eU47SAN/hWuEzThEMilYLla31rxbA2DcRzAf3l25/HDV01l4svAQL5JE6ZMSo/6FkrGEftSNHzxzS1KR6RB4m0WRPn1B4yO0lq//ALI71KfFGlwgNDqMJPvHcIf/AEUa8w2Y7YxTtg7c0czFY9RX4lvYnCXgcDpsdyPyZBVe7+MUEiNFcyzMh6gAkGvMwgH0pQq+tHMw5TeufiP4JlH+lwsx/wBqI1kv46+GbHLWy/8AflqreUOaFixxilzvuHKjRg+Ifw8jYLbJhj0Aif8AwrorX4q6JZFWtfOjI5G2M1xojx06U7yx/dpc8u40o9j0ZvjoiLuMtyR0/wBUT/Ss65+NCXqlH+1yKexibB/SuMVcc4qYRggZGKalLuDsdPB42sLkg/Z1QHvIjg/kENbieItK2bmvoY/ZYJmP/ota89Majio3UY2+tNtk2OxuvGSoSLRpbgeqw7B/49ID+lc7N4r8STORbwxovq78/iAD/OqkcQ7dKeqgHGKSbG7ET6r4ql5kvEi9kTP88VUc6xOcXGpTMD2XC/yGa02U4wRzTPJY9qfoJIxzpNvL81wZJj/00dm/rViOwtIf9XEi/RRWkYuMZxSJGB15oYaEZRSOmatwQbuvQihFHXGMVKsgzsFXFEtnR6JYm9vreyhGWlYL+dfWdpbR2VtFaQjCRKFH4V4n8K9HM11LrEy/JANiZ7s3U/gK91FbozCiiigAooooAKKKKAP/0v38ooooAKKKKACiiigArG17S49Z0qewkAy6nafRu1bNJ3oA+EPEFjJYXclvMNrIxBHuK5mO6MZw3Q19I/F/wtkf2zbp8knEmOzetfLdyHgJU5bHr1qJFROoSVXGRU+UIxXM2d6mcE4+tbaSKw61kUXVx61MvtWepYcipFkI4NA7F/OD0pcjpVM3GOtSrMh4zQNE+AfoadtQ+gqNXTHWn7waBXGmNSeaQwrjNSgrSFh0osFysUToO1N8sd+KmDjcQV49acSpFQyyAADq3H1p+ARwTSgITgjNPAQdTipSARYsk1PsA75qISBelSb09atCAKO/NAQFhgZp4K96XzUHSmhDjtUYHBpobj5hzTPNUdetHmDORU3HYlJaThcjFN2Nu3MckdKZ5vYU1pW6A1SJsS49OaczBevFVGkABOfrWXc3agfK1MRoS3Y3bVrQ02J7mZVUZLEAD3NcpC7SONvc1778K/DZvb4ancL+5tuee79h/WtIomTPcvDOkro2i29ljDhdz/7zcmt+iitCQooooAKKKKACiiigD//T/fyiiigAooooAKKKKACjOKKKAKWoWFtqllLY3S7opQVIr4Y+IXhe68NarJbTKdhO6NuzKehr7wLbDz0rivHfg+08YaO9q+EuYwTDJ6H0PsaLAfnXcXTRNuHrW3YaqDtDGs/xJpN7omoT2F7GY5YiVZT7VzFvd+U22sGjRM9cjuN4GKlEvHPWuFsNVBG1jzXRxXiuOam5djbDxuOaAi5ypxVBJw9TBwfcUrgkXBMyttYZq0pJrL3N1B/CnpMyn5jikmOxq7jQSDx3qsJeAPWneb+NVzE2ZKajL+nFQNNj2qPzhUNlWLAbvRuyarC4U96XzVzn1qbjsWQxB608P2qmZOcilEpyM0XCxe3HFNyfSoPMPrURk9W/WnzCLffNP3Y5OKoCQZ65pGmHY0JgaBmUdxUL3SqC1Zc12EHJ5rBu9T64b8KbmHKa95qBI8sHC96xmuDI/wB7IrIe7LHg8Vd06Ce+nSOIFixAwKcbtkyZ6D4T0i51q/htbZCzO2OO3ua+3tA0eDQ9Lh0+EfcHzH1bua4L4Y+CF8Oact7eJ/pc4zyPug9q9XrpitDJsKKKKoQUUUUAFFFFABRRRQB//9T9/KKKKACiiigAooooAKTIpN1NoAa4zUAcxttbketWDyKhkTIxQB4r8X/h1F4o01tV05Auo269v+Wijsff0r4D1S0ntJXjkUo6Egg9iK/V4Dcpjb/9Yr5b+M/wyW6WTX9IixJyZUUdfcD1qZDTPi+DUHjbDHBFdPp2tYYKzfhXI6hAbaRo5F2kH8qzVuDGeTxWEomqke1W+oBhuJB+laUd6Gxg5ryGx1lo+N2RXT22qB8EmsmzTc9EE+Oaa8m8Y3c1y8d9kdaspeA47mpchqJuRTTRnnkVbFxmsBbrnAarHnAjOalSBo2WuBj0pguPU8VitNlsGkFwvI6VLqXDlNszDOeOKQXAz14rF+0L6809ZlfgnFLnZVjaNwG6c0x7pVxWUX/ut0qMz7Thhk03MRsecG5NM89B6VivfALkYrMl1RBwDRzjSOoe82ghSBms+XU0jyd1chc6u3ROtYs+oOTkNj8aaYrHU3WqmTODxWQ91ufJNc+boyHG7NaunWsl1IqRgsxOOK1jFsicrG1ZQtdOFxmvr/4RfDM2qx+INYj2twYo2GMf7R/pWX8JvhRGscWua6mQOY4z6+pr6hRQoCqMKvAArqhCxztk4wBgUtR5xTga0EOopBnvS0AFFFFABRRRQAUUUUAf/9X9/KKKKAEJxQfypaQ0AITSZpKKACiiigBDUZ5p7U2gCFhg1Su7dLiJo5BuVhgg1otUTDNAHwz8aPhHNH5+s6N8p5baB+hr4avPEiabevp2sKbWdTj5vuk/XtX7a6jp0F9E0M6hlbjBr4b+Of7M0PiSGfVdCTF0QTtAGDWMrotWZ8eRaojKJLeQMOowa3LHXWU7ZOK+YPF3hXx98Pb54o/MiCH7j52n6ZrlrP42ahpUgh121KY4LEcfmOKz0ZpsfetpriOAN9dDb6gjgc18V6X8aPDt2AfOMZPvkV6Bp3xN0yXBhvUYehODUOmWmfUqXUZbIb9auLcqP4v614HY/EDT5MB5l/MV01t4x06UZFwv51DgVc9YNznvURnz14rhI/ElnJ9yVSP94VN/bkBPDg/jWbgNM7UTgUovFAweK4dtehH8YP5VRn8RxjO1h+dLksO56G1/szg8VSl1RQOWrzWXxPEox5g/OsW48VQAHMgp8pNz0y51UY+9WJPqgIIBry+58YWsakyTqo9yK5XUPiZ4eswxnvUyOwOf5VSpicj2aXUVODmqxvMnk1813fxt015PI0iB7uU9MDArofClr8SPiJfR21nbSQxyH/Vxg9Pdq15UtzNyue722pWnnLArebMx4ROTX2P8Gfhrc3/l6zq8XlxggqhHWs74Mfs12vh+KHU/ES+dcEBtp7H3r7TsbG3soFggQKijAAraEWZNlq3gSCJYoxtVRgAVbXpUS1ItbkjqKKKAFyaX3pv0pw96AHUUh6UtABRRRQAUUUUAf//W/fyiiigAoxmiigBDmk206igCPFFPIzRigBlMPWpSKbgUAREZplTkelN20AVyKrSwq6kMMir+ymlPagDyLxp8JvCHjW2kh1iwjkZgRv2jIz718GfEn9hGzuoZJ/DM288ny3HX6V+pxiqMwA9azlTTKUmfzcePP2PvGnh6WSb+zZ4lUnDxA4z+FfO+pfDf4gaEzCKWUbf4ZVOfz4Nf1f3WjWl2pWaJZAeoIzXneu/BvwN4g3HUtIglZuCdgB/So9k1sylM/lla++I2l8SQmQDurH+Rpy/EfxjZ8T2s4x6c/wBa/ow1v9jr4XaozOlh5JbJIXgZryPV/wBgTwfdYaznMZycg8g/4VDhLsPnPwyT4zeIoPvCdP8AgLVdj+POux8edKv4NX6/3v8AwTptH3G31BMnpuTgVhzf8E32ZgYtRhwTzlOlS4vsVz+Z+Un/AA0FroAxPKf+AtTG+PviSXhHmb6If8K/V+D/AIJuAD99qMOc9kOMV0Vh/wAE5dIiINzqi57hYqfI+wc/mfj4fjD40u/9TDcNn/ZIpo8W/EvVDiGCRc92bH8q/cfR/wBgPwDZlTeXUtwe+FCd/wAa9W0L9j34S6MQw0v7Qw7ysW4+nShU5diXM/n5sPCvxL191SWZ13HGEUsefrXv/gT9kT4h+LJUkbT7mdGwd82UTnvzX73aJ8IPBOhBBp2kW8OzGMRrxivQrXSLW1G2GMKB2AFWqL6sTmfmj8K/2ErbSmhu/Fs0e1cEwxDP5mvvjwf8M/Cngq1S10SxSLb/ABYy3516MIgKl8vFaRppENkKRhQAvSpgMCnbadgVoIAMU4DnNGDT6ACilwaSgAFPwKMCloAKKKKACiiigAooooA//9f9/KKKKACiiigAooooAKKKKACkpaKAEIzTcU+g0AR0UuPypdvNADaKXBoIwaAEpCKdjjNAx3oAZtFJsFSAZpdtAEWwUeWtSY9aDjtQBF5anqKPKX0/GpcZpccc0AQ+UtLsFScUuOmKAI9tG2pMHFA4oAj204qBTyM0Ed6AG444pccdKcKKAEwKXAoooAKKKKACiiigAooooAKKKKACiiigD//Q/fyiiigAooooAKKKKACiiigAooooAKKKKAEHAoxS0UAJnse9GBS0nSgAwMU0jFOHrRigA6UmTnFKetLQAgPakI9KdSGgA6UYoFLQA3AHWlwe9LRQAYpMc0tFACc0tFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQB//0f38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//S/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9P9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/1P38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//Z",ww=n.p+"static/media/Black_Circle.d90d1f69e27b26a272b3.jpeg",bw=n.p+"static/media/NotificationSound.909cf186e48ddef5b128.mp3",_w=["as","disabled"];function xw(e){var t=e.tagName,n=e.disabled,r=e.href,i=e.target,a=e.rel,o=e.role,u=e.onClick,s=e.tabIndex,c=void 0===s?0:s,l=e.type;t||(t=null!=r||null!=i||null!=a?"a":"button");var h={tagName:t};if("button"===t)return[{type:l||"button",disabled:n},h];var f=function(e){(n||"a"===t&&function(e){return!e||"#"===e.trim()}(r))&&e.preventDefault(),n?e.stopPropagation():null==u||u(e)};return"a"===t&&(r||(r="#"),n&&(r=void 0)),[{role:null!=o?o:"button",disabled:void 0,tabIndex:n?void 0:c,href:r,target:"a"===t?i:void 0,"aria-disabled":n||void 0,rel:"a"===t?a:void 0,onClick:f,onKeyDown:function(e){" "===e.key&&(e.preventDefault(),f(e))}},h]}var Iw=r.forwardRef((function(e,t){var n=e.as,r=e.disabled,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,_w),a=l(xw(Object.assign({tagName:n,disabled:r},i)),2),o=a[0],u=a[1].tagName;return(0,nw.jsx)(u,Object.assign({},i,o,{ref:t}))}));Iw.displayName="Button";var Ew=["as","bsPrefix","variant","size","active","className"],Sw=r.forwardRef((function(e,t){var n=e.as,r=e.bsPrefix,i=e.variant,a=e.size,o=e.active,u=e.className,s=$k(e,Ew),c=aw(r,"btn"),h=l(xw(Ht({tagName:n},s)),2),f=h[0],d=h[1].tagName;return(0,nw.jsx)(d,Ht(Ht(Ht({},f),s),{},{ref:t,className:tw()(u,c,o&&"active",i&&"".concat(c,"-").concat(i),a&&"".concat(c,"-").concat(a),s.href&&s.disabled&&"disabled")}))}));Sw.displayName="Button",Sw.defaultProps={variant:"primary",active:!1,disabled:!1};var Tw=Sw,Cw=["bsPrefix","variant","animation","size","as","className"],Aw=r.forwardRef((function(e,t){var n=e.bsPrefix,r=e.variant,i=e.animation,a=e.size,o=e.as,u=void 0===o?"div":o,s=e.className,c=$k(e,Cw);n=aw(n,"spinner");var l="".concat(n,"-").concat(i);return(0,nw.jsx)(u,Ht(Ht({ref:t},c),{},{className:tw()(s,l,a&&"".concat(l,"-").concat(a),r&&"text-".concat(r))}))}));Aw.displayName="Spinner";var Nw=Aw;function Dw(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var Pw;Object.create;var Rw="facebook.com",Ow="github.com",Lw="google.com",Mw="password",Fw="twitter.com",jw="EMAIL_SIGNIN",Uw="PASSWORD_RESET",Vw="RECOVER_EMAIL",Kw="REVERT_SECOND_FACTOR_ADDITION",Bw="VERIFY_AND_CHANGE_EMAIL",qw="VERIFY_EMAIL";function zw(){return Le({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Ww=function(){var e;return Le(e={},"admin-restricted-operation","This operation is restricted to administrators only."),Le(e,"argument-error",""),Le(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),Le(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),Le(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),Le(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),Le(e,"cordova-not-ready","Cordova framework is not ready."),Le(e,"cors-unsupported","This browser is not supported."),Le(e,"credential-already-in-use","This credential is already associated with a different user account."),Le(e,"custom-token-mismatch","The custom token corresponds to a different audience."),Le(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),Le(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),Le(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),Le(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),Le(e,"email-already-in-use","The email address is already in use by another account."),Le(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),Le(e,"expired-action-code","The action code has expired."),Le(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),Le(e,"internal-error","An internal AuthError has occurred."),Le(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),Le(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),Le(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),Le(e,"invalid-auth-event","An internal AuthError has occurred."),Le(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),Le(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),Le(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),Le(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),Le(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),Le(e,"invalid-email","The email address is badly formatted."),Le(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),Le(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),Le(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),Le(e,"invalid-credential","The supplied auth credential is malformed or has expired."),Le(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),Le(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),Le(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),Le(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),Le(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),Le(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),Le(e,"wrong-password","The password is invalid or the user does not have a password."),Le(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),Le(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),Le(e,"invalid-provider-id","The specified provider ID is invalid."),Le(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),Le(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),Le(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),Le(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),Le(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),Le(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),Le(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),Le(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),Le(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),Le(e,"missing-continue-uri","A continue URL must be provided in the request."),Le(e,"missing-iframe-start","An internal AuthError has occurred."),Le(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),Le(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),Le(e,"missing-multi-factor-info","No second factor identifier is provided."),Le(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),Le(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),Le(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),Le(e,"app-deleted","This instance of FirebaseApp has been deleted."),Le(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),Le(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),Le(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),Le(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),Le(e,"no-auth-event","An internal AuthError has occurred."),Le(e,"no-such-provider","User was not linked to an account with the given provider."),Le(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),Le(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),Le(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),Le(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),Le(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),Le(e,"provider-already-linked","User can only be linked to one identity for the given provider."),Le(e,"quota-exceeded","The project's quota for this operation has been exceeded."),Le(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),Le(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),Le(e,"rejected-credential","The request contains malformed or mismatching credentials."),Le(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),Le(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),Le(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),Le(e,"timeout","The operation has timed out."),Le(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),Le(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),Le(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),Le(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),Le(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),Le(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),Le(e,"unverified-email","The operation requires a verified email."),Le(e,"user-cancelled","The user did not grant your application the permissions it requested."),Le(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),Le(e,"user-disabled","The user account has been disabled by an administrator."),Le(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),Le(e,"user-signed-out",""),Le(e,"weak-password","The password must be 6 characters long or more."),Le(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),Le(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},Hw=zw,Gw=new at("auth","Firebase",zw()),Qw=new zt("@firebase/auth");function Yw(e){if(Qw.logLevel<=Ft.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Qw.error.apply(Qw,["Auth (".concat(An,"): ").concat(e)].concat(n))}}function Xw(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw eb.apply(void 0,[e].concat(n))}function Jw(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return eb.apply(void 0,[e].concat(n))}function Zw(e,t,n){var r=Object.assign(Object.assign({},Hw()),Le({},t,n));return new at("auth","Firebase",r).create(t,{appName:e.name})}function $w(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Xw(e,"argument-error"),Zw(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function eb(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=f(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(f(o)))}return Gw.create.apply(Gw,[e].concat(n))}function tb(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw eb.apply(void 0,[t].concat(r))}}function nb(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Yw(t),new Error(t)}function rb(e,t){e||nb(t)}var ib=new Map;function ab(e){rb(e instanceof Function,"Expected a class definition");var t=ib.get(e);return t?(rb(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,ib.set(e,t),t)}function ob(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function ub(){return"http:"===sb()||"https:"===sb()}function sb(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var cb=function(){function e(t,n){d(this,e),this.shortDelay=t,this.longDelay=n,rb(n>t,"Short delay should be less than long delay!"),this.isMobile=Je()||et()}return v(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(ub()||$e()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function lb(e,t){rb(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var hb=function(){function e(){d(this,e)}return v(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void nb("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void nb("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void nb("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),fb=(Le(Pw={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),Le(Pw,"MISSING_CUSTOM_TOKEN","internal-error"),Le(Pw,"INVALID_IDENTIFIER","invalid-email"),Le(Pw,"MISSING_CONTINUE_URI","internal-error"),Le(Pw,"INVALID_PASSWORD","wrong-password"),Le(Pw,"MISSING_PASSWORD","internal-error"),Le(Pw,"EMAIL_EXISTS","email-already-in-use"),Le(Pw,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),Le(Pw,"INVALID_IDP_RESPONSE","invalid-credential"),Le(Pw,"INVALID_PENDING_TOKEN","invalid-credential"),Le(Pw,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),Le(Pw,"MISSING_REQ_TYPE","internal-error"),Le(Pw,"EMAIL_NOT_FOUND","user-not-found"),Le(Pw,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),Le(Pw,"EXPIRED_OOB_CODE","expired-action-code"),Le(Pw,"INVALID_OOB_CODE","invalid-action-code"),Le(Pw,"MISSING_OOB_CODE","internal-error"),Le(Pw,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),Le(Pw,"INVALID_ID_TOKEN","invalid-user-token"),Le(Pw,"TOKEN_EXPIRED","user-token-expired"),Le(Pw,"USER_NOT_FOUND","user-token-expired"),Le(Pw,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),Le(Pw,"INVALID_CODE","invalid-verification-code"),Le(Pw,"INVALID_SESSION_INFO","invalid-verification-id"),Le(Pw,"INVALID_TEMPORARY_PROOF","invalid-credential"),Le(Pw,"MISSING_SESSION_INFO","missing-verification-id"),Le(Pw,"SESSION_EXPIRED","code-expired"),Le(Pw,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),Le(Pw,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),Le(Pw,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),Le(Pw,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),Le(Pw,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),Le(Pw,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),Le(Pw,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),Le(Pw,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),Le(Pw,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),Le(Pw,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),Le(Pw,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Pw),db=new cb(3e4,6e4);function pb(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function vb(e,t,n,r){return yb.apply(this,arguments)}function yb(){return yb=Pt(Nt().mark((function e(t,n,r,i){var a,o=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",gb(t,a,Pt(Nt().mark((function e(){var a,o,u,s;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=gt(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",hb.fetch()(bb(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),yb.apply(this,arguments)}function gb(e,t,n){return mb.apply(this,arguments)}function mb(){return mb=Pt(Nt().mark((function e(t,n,r){var i,a,o,u,s,c,h,f,d,p;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},fb),n),e.prev=2,a=new _b(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw xb(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,c=s.split(" : "),h=l(c,2),f=h[0],d=h[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=23;break}throw xb(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==f){e.next=27;break}throw xb(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==f){e.next=29;break}throw xb(t,"user-disabled",u);case 29:if(p=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=34;break}throw Zw(t,p,d);case 34:Xw(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof it)){e.next=41;break}throw e.t0;case 41:Xw(t,"network-request-failed");case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),mb.apply(this,arguments)}function kb(e,t,n,r){return wb.apply(this,arguments)}function wb(){return wb=Pt(Nt().mark((function e(t,n,r,i){var a,o,u=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,vb(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&Xw(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),wb.apply(this,arguments)}function bb(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?lb(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var _b=function(){function e(t){var n=this;d(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Jw(n.auth,"network-request-failed"))}),db.get())}))}return v(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function xb(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Jw(e,t,r);return i.customData._tokenResponse=n,i}function Ib(e,t){return Eb.apply(this,arguments)}function Eb(){return(Eb=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vb(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sb(e,t){return Tb.apply(this,arguments)}function Tb(){return(Tb=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vb(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Cb(e,t){return Ab.apply(this,arguments)}function Ab(){return(Ab=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vb(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Nb(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function Db(){return Db=Pt(Nt().mark((function e(t){var n,r,i,a,o,u,s=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=At(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,tb((a=Rb(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Nb(Pb(a.auth_time)),issuedAtTime:Nb(Pb(a.iat)),expirationTime:Nb(Pb(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Db.apply(this,arguments)}function Pb(e){return 1e3*Number(e)}function Rb(e){var t,n=l(e.split("."),3),r=n[0],i=n[1],a=n[2];if(void 0===r||void 0===i||void 0===a)return Yw("JWT malformed, contained fewer than 3 sections"),null;try{var o=He(i);return o?JSON.parse(o):(Yw("Failed to decode base64 JWT payload"),null)}catch(u){return Yw("Caught error parsing JWT payload as JSON",null===(t=u)||void 0===t?void 0:t.toString()),null}}function Ob(e,t){return Lb.apply(this,arguments)}function Lb(){return Lb=Pt(Nt().mark((function e(t,n){var r=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof it&&Mb(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Lb.apply(this,arguments)}function Mb(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Fb=function(){function e(t){d(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return v(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(Pt(Nt().mark((function t(){return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=Pt(Nt().mark((function e(){var t;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===(t=e.t0)||void 0===t?void 0:t.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),jb=function(){function e(t,n){d(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return v(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Nb(this.lastLoginAt),this.creationTime=Nb(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Ub(e){return Vb.apply(this,arguments)}function Vb(){return Vb=Pt(Nt().mark((function e(t){var n,r,i,a,o,u,s,c,l,h,f;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Ob(t,Cb(r,{idToken:i}));case 6:tb(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?qb(o.providerUserInfo):[],s=Bb(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),h=!!c&&l,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new jb(o.createdAt,o.lastLoginAt),isAnonymous:h},Object.assign(t,f);case 17:case"end":return e.stop()}}),e)}))),Vb.apply(this,arguments)}function Kb(){return(Kb=Pt(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=At(t),e.next=3,Ub(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bb(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(f(n),f(t))}function qb(e){return e.map((function(e){var t=e.providerId,n=Dw(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function zb(e,t){return Wb.apply(this,arguments)}function Wb(){return(Wb=Pt(Nt().mark((function e(t,n){var r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gb(t,{},Pt(Nt().mark((function e(){var r,i,a,o,u,s;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=gt({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=bb(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",hb.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Hb=function(){function e(){d(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return v(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){tb(e.idToken,"internal-error"),tb("undefined"!==typeof e.idToken,"internal-error"),tb("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=Rb(e);return tb(t,"internal-error"),tb("undefined"!==typeof t.exp,"internal-error"),tb("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=Pt(Nt().mark((function e(t){var n,r=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],tb(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=Pt(Nt().mark((function e(t,n){var r,i,a,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zb(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return nb("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(tb("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(tb("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(tb("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Gb(e,t){tb("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Qb=function(){function e(t){d(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=Dw(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Fb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?f(a.providerData):[],this.metadata=new jb(a.createdAt||void 0,a.lastLoginAt||void 0)}return v(e,[{key:"getIdToken",value:function(){var e=Pt(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ob(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(tb(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Db.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Kb.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(tb(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){tb(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=Pt(Nt().mark((function e(t){var n,r,i=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,Ub(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Pt(Nt().mark((function e(){var t;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,Ob(this,Ib(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,h=null!==(r=n.displayName)&&void 0!==r?r:void 0,f=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,y=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,g=null!==(c=n.createdAt)&&void 0!==c?c:void 0,m=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,w=n.emailVerified,b=n.isAnonymous,_=n.providerData,x=n.stsTokenManager;tb(k&&x,t,"internal-error");var I=Hb.fromJSON(this.name,x);tb("string"===typeof k,t,"internal-error"),Gb(h,t.name),Gb(f,t.name),tb("boolean"===typeof w,t,"internal-error"),tb("boolean"===typeof b,t,"internal-error"),Gb(d,t.name),Gb(p,t.name),Gb(v,t.name),Gb(y,t.name),Gb(g,t.name),Gb(m,t.name);var E=new e({uid:k,auth:t,email:f,emailVerified:w,displayName:h,isAnonymous:b,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:g,lastLoginAt:m});return _&&Array.isArray(_)&&(E.providerData=_.map((function(e){return Object.assign({},e)}))),y&&(E._redirectEventId=y),E}},{key:"_fromIdTokenResponse",value:function(){var t=Pt(Nt().mark((function t(n,r){var i,a,o,u=arguments;return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new Hb).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,Ub(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Yb=function(){function e(){d(this,e),this.type="NONE",this.storage={}}return v(e,[{key:"_isAvailable",value:function(){var e=Pt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Pt(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Pt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Yb.type="NONE";var Xb=Yb;function Jb(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Zb=function(){function e(t,n,r){d(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Jb(this.userKey,a.apiKey,o),this.fullPersistenceKey=Jb("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return v(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=Pt(Nt().mark((function e(){var t;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Qb._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=Pt(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=Pt(Nt().mark((function t(n,r){var i,a,o,u,s,c,l,h,f,d,p,v=arguments;return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(ab(Xb),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=Pt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||ab(Xb),u=Jb(i,n.config.apiKey,n.name),s=null,c=Me(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return h=l.value,t.prev=14,t.next=17,h._get(u);case 17:if(!(f=t.sent)){t.next=23;break}return d=Qb._fromJSON(n,f),h!==o&&(s=d),o=h,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=Pt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function $b(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(r_(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(e_(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(a_(t))return"Blackberry";if(o_(t))return"Webos";if(t_(t))return"Safari";if((t.includes("chrome/")||n_(t))&&!t.includes("edge/"))return"Chrome";if(i_(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function e_(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe();return/firefox\//i.test(e)}function t_(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function n_(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe();return/crios\//i.test(e)}function r_(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe();return/iemobile/i.test(e)}function i_(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe();return/android/i.test(e)}function a_(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe();return/blackberry/i.test(e)}function o_(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe();return/webos/i.test(e)}function u_(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function s_(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe();return u_(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function c_(){return tt()&&10===document.documentMode}function l_(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe();return u_(e)||i_(e)||o_(e)||a_(e)||/windows phone/i.test(e)||r_(e)}function h_(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=$b(Xe());break;case"Worker":t="".concat($b(Xe()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(An,"/").concat(r)}var f_=function(){function e(t){d(this,e),this.auth=t,this.queue=[]}return v(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=Pt(Nt().mark((function e(t){var n,r,i,a,o,u,s,c;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:r=[],e.prev=3,i=Me(this.queue),e.prev=5,i.s();case 7:if((a=i.n()).done){e.next=14;break}return o=a.value,e.next=11,o(t);case 11:o.onAbort&&r.push(o.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),i.e(e.t0);case 19:return e.prev=19,i.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),r.reverse(),u=Me(r);try{for(u.s();!(s=u.n()).done;){c=s.value;try{c()}catch(l){}}}catch(h){u.e(h)}finally{u.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===(n=e.t1)||void 0===n?void 0:n.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),d_=function(){function e(t,n,r){d(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new v_(this),this.idTokenSubscription=new v_(this),this.beforeStateQueue=new f_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Gw,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return v(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=ab(t)),this._initializationPromise=this.queue(Pt(Nt().mark((function r(){var i,a;return Nt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Zb.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=Pt(Nt().mark((function e(){var t;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=Pt(Nt().mark((function e(t){var n,r,i,a,o,u,s;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return tb(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=Pt(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=Pt(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ub(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===(n=e.t0)||void 0===n?void 0:n.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=Pt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=Pt(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?At(t):null)&&tb(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=Pt(Nt().mark((function e(t){var n,r=this,i=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&tb(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(Pt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=Pt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(Pt(Nt().mark((function n(){return Nt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(ab(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new at("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=Pt(Nt().mark((function e(t,n){var r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=Pt(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return tb(n=t&&ab(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Zb.create(this,[ab(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=Pt(Nt().mark((function e(t){var n,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(Pt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=Pt(Nt().mark((function e(t){var n=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(Pt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return tb(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=Pt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return tb(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=h_(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=Pt(Nt().mark((function e(){var t,n,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Le({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function p_(e){return At(e)}var v_=function(){function e(t){var n=this;d(this,e),this.auth=t,this.observer=null,this.addObserver=bt((function(e){return n.observer=e}))}return v(e,[{key:"next",get:function(){return tb(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function y_(e,t,n){var r=p_(e);tb(r._canInitEmulator,r,"emulator-config-failed"),tb(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=g_(t),o=function(e){var t=g_(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:m_(r.substr(a.length+1))}}var o=l(r.split(":"),2);return{host:o[0],port:m_(o[1])}}(t),u=o.host,s=o.port,c=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function g_(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function m_(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var k_=function(){function e(t,n){d(this,e),this.providerId=t,this.signInMethod=n}return v(e,[{key:"toJSON",value:function(){return nb("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return nb("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return nb("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return nb("not implemented")}}]),e}();function w_(e,t){return b_.apply(this,arguments)}function b_(){return(b_=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vb(t,"POST","/v1/accounts:resetPassword",pb(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function __(e,t){return x_.apply(this,arguments)}function x_(){return(x_=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vb(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I_(e,t){return E_.apply(this,arguments)}function E_(){return(E_=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vb(t,"POST","/v1/accounts:update",pb(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S_(e,t){return T_.apply(this,arguments)}function T_(){return(T_=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kb(t,"POST","/v1/accounts:signInWithPassword",pb(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C_(e,t){return A_.apply(this,arguments)}function A_(){return(A_=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vb(t,"POST","/v1/accounts:sendOobCode",pb(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N_(e,t){return D_.apply(this,arguments)}function D_(){return(D_=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",C_(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P_(e,t){return R_.apply(this,arguments)}function R_(){return(R_=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",C_(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O_(e,t){return L_.apply(this,arguments)}function L_(){return(L_=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",C_(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M_(e,t){return F_.apply(this,arguments)}function F_(){return(F_=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",C_(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j_(e,t){return U_.apply(this,arguments)}function U_(){return(U_=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kb(t,"POST","/v1/accounts:signInWithEmailLink",pb(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V_(e,t){return K_.apply(this,arguments)}function K_(){return(K_=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kb(t,"POST","/v1/accounts:signInWithEmailLink",pb(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var B_=function(e){g(n,e);var t=x(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return d(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return v(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=Pt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",S_(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",j_(t,{email:this._email,oobCode:this._password}));case 5:Xw(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",__(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",V_(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Xw(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(k_);function q_(e,t){return z_.apply(this,arguments)}function z_(){return(z_=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kb(t,"POST","/v1/accounts:signInWithIdp",pb(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var W_=function(e){g(n,e);var t=x(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return v(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return q_(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,q_(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,q_(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=gt(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Xw("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Dw(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(k_);function H_(e,t){return G_.apply(this,arguments)}function G_(){return(G_=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vb(t,"POST","/v1/accounts:sendVerificationCode",pb(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q_(){return(Q_=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kb(t,"POST","/v1/accounts:signInWithPhoneNumber",pb(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y_(){return(Y_=Pt(Nt().mark((function e(t,n){var r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kb(t,"POST","/v1/accounts:signInWithPhoneNumber",pb(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw xb(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var X_=Le({},"USER_NOT_FOUND","user-not-found");function J_(){return(J_=Pt(Nt().mark((function e(t,n){var r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",kb(t,"POST","/v1/accounts:signInWithPhoneNumber",pb(t,r),X_));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Z_=function(e){g(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this,"phone","phone")).params=e,r}return v(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Q_.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Y_.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return J_.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(k_);var $_=function(){function e(t){var n,r,i,a,o,u;d(this,e);var s=mt(kt(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);tb(c&&l&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return v(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=mt(kt(e)).link,n=t?mt(kt(t)).deep_link_id:null,r=mt(kt(e)).deep_link_id;return(r?mt(kt(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(r){return null}}}]),e}();var ex=function(){function e(){d(this,e),this.providerId=e.PROVIDER_ID}return v(e,null,[{key:"credential",value:function(e,t){return B_._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=$_.parseLink(t);return tb(n,"argument-error"),B_._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();ex.PROVIDER_ID="password",ex.EMAIL_PASSWORD_SIGN_IN_METHOD="password",ex.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var tx=function(){function e(t){d(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return v(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),nx=function(e){g(n,e);var t=x(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).scopes=[],e}return v(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return f(this.scopes)}}]),n}(tx),rx=function(e){g(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return tb(e.idToken||e.accessToken,"argument-error"),W_._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return tb("providerId"in t&&"signInMethod"in t,"argument-error"),W_._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(nx),ix=function(e){g(n,e);var t=x(n);function n(){return d(this,n),t.call(this,"facebook.com")}return v(n,null,[{key:"credential",value:function(e){return W_._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(nx);ix.FACEBOOK_SIGN_IN_METHOD="facebook.com",ix.PROVIDER_ID="facebook.com";var ax=function(e){g(n,e);var t=x(n);function n(){var e;return d(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return v(n,null,[{key:"credential",value:function(e,t){return W_._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(nx);ax.GOOGLE_SIGN_IN_METHOD="google.com",ax.PROVIDER_ID="google.com";var ox=function(e){g(n,e);var t=x(n);function n(){return d(this,n),t.call(this,"github.com")}return v(n,null,[{key:"credential",value:function(e){return W_._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(nx);ox.GITHUB_SIGN_IN_METHOD="github.com",ox.PROVIDER_ID="github.com";var ux=function(e){g(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return v(n,[{key:"_getIdTokenResponse",value:function(e){return q_(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,q_(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,q_(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(k_),sx=function(e){g(n,e);var t=x(n);function n(e){return d(this,n),tb(e.startsWith("saml."),"argument-error"),t.call(this,e)}return v(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=ux.fromJSON(e);return tb(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return ux._create(r,n)}catch(i){return null}}}]),n}(tx),cx=function(e){g(n,e);var t=x(n);function n(){return d(this,n),t.call(this,"twitter.com")}return v(n,null,[{key:"credential",value:function(e,t){return W_._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(nx);function lx(e,t){return hx.apply(this,arguments)}function hx(){return(hx=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kb(t,"POST","/v1/accounts:signUp",pb(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}cx.TWITTER_SIGN_IN_METHOD="twitter.com",cx.PROVIDER_ID="twitter.com";var fx=function(){function e(t){d(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return v(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=Pt(Nt().mark((function t(n,r,i){var a,o,u,s,c=arguments;return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,Qb._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=dx(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=Pt(Nt().mark((function t(n,r,i){var a;return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=dx(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function dx(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function px(){return px=Pt(Nt().mark((function e(t){var n,r,i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p_(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new fx({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,lx(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,fx._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),px.apply(this,arguments)}var vx=function(e){g(n,e);var t=x(n);function n(e,r,i,a){var o,u;return d(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(b(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return v(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(it);function yx(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw vx._fromErrorAndOperation(e,n,t,r);throw n}))}function gx(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function mx(e,t){return kx.apply(this,arguments)}function kx(){return kx=Pt(Nt().mark((function e(t,n){var r,i,a,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=At(t),e.next=3,_x(!0,r,n);case 3:return e.t0=Sb,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=gx(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),kx.apply(this,arguments)}function wx(e,t){return bx.apply(this,arguments)}function bx(){return bx=Pt(Nt().mark((function e(t,n){var r,i,a=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Ob,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",fx._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),bx.apply(this,arguments)}function _x(e,t,n){return xx.apply(this,arguments)}function xx(){return(xx=Pt(Nt().mark((function e(t,n,r){var i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ub(n);case 2:i=gx(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",tb(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ix(e,t){return Ex.apply(this,arguments)}function Ex(){return Ex=Pt(Nt().mark((function e(t,n){var r,i,a,o,u,s,c,l=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>2&&void 0!==l[2]&&l[2],a=t.auth,o="reauthenticate",e.prev=3,e.next=6,Ob(t,yx(a,o,n,t),r);case 6:return tb((u=e.sent).idToken,a,"internal-error"),tb(s=Rb(u.idToken),a,"internal-error"),c=s.sub,tb(t.uid===c,a,"user-mismatch"),e.abrupt("return",fx._forOperation(t,o,u));case 15:throw e.prev=15,e.t0=e.catch(3),(null===(i=e.t0)||void 0===i?void 0:i.code)==="auth/".concat("user-not-found")&&Xw(a,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),Ex.apply(this,arguments)}function Sx(e,t){return Tx.apply(this,arguments)}function Tx(){return Tx=Pt(Nt().mark((function e(t,n){var r,i,a,o,u=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,yx(t,i,n);case 4:return a=e.sent,e.next=7,fx._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),Tx.apply(this,arguments)}function Cx(e,t){return Ax.apply(this,arguments)}function Ax(){return(Ax=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Sx(p_(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Nx(e,t){return Dx.apply(this,arguments)}function Dx(){return(Dx=Pt(Nt().mark((function e(t,n){var r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=At(t),e.next=3,_x(!1,r,n.providerId);case 3:return e.abrupt("return",wx(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Px(e,t){return Rx.apply(this,arguments)}function Rx(){return(Rx=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ix(At(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ox(e,t){return Lx.apply(this,arguments)}function Lx(){return(Lx=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kb(t,"POST","/v1/accounts:signInWithCustomToken",pb(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mx(){return(Mx=Pt(Nt().mark((function e(t,n){var r,i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p_(t),e.next=3,Ox(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,fx._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Fx=function(){function e(t,n){d(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return v(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?jx._fromServerResponse(e,t):Xw(e,"internal-error")}}]),e}(),jx=function(e){g(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return v(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(Fx);function Ux(e,t,n){var r;tb((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),tb("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(tb(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(tb(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Vx(){return(Vx=Pt(Nt().mark((function e(t,n,r){var i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=At(t),a={requestType:"PASSWORD_RESET",email:n},r&&Ux(i,a,r),e.next=5,P_(i,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Kx(){return(Kx=Pt(Nt().mark((function e(t,n,r){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w_(At(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bx(){return(Bx=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I_(At(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qx(e,t){return zx.apply(this,arguments)}function zx(){return(zx=Pt(Nt().mark((function e(t,n){var r,i,a,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=At(t),e.next=3,w_(r,{oobCode:n});case 3:i=e.sent,tb(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return tb(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:tb(i.mfaInfo,r,"internal-error");case 13:tb(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=Fx._fromServerResponse(p_(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wx(){return(Wx=Pt(Nt().mark((function e(t,n){var r,i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qx(At(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hx(e,t,n){return Gx.apply(this,arguments)}function Gx(){return(Gx=Pt(Nt().mark((function e(t,n,r){var i,a,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=p_(t),e.next=3,lx(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,fx._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qx(){return(Qx=Pt(Nt().mark((function e(t,n,r){var i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=At(t),a={requestType:"EMAIL_SIGNIN",email:n},tb(r.handleCodeInApp,i,"argument-error"),r&&Ux(i,a,r),e.next=6,O_(i,a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yx(){return(Yx=Pt(Nt().mark((function e(t,n,r){var i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=At(t),tb((a=ex.credentialWithLink(n,r||ob()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",Cx(i,a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xx(e,t){return Jx.apply(this,arguments)}function Jx(){return(Jx=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vb(t,"POST","/v1/accounts:createAuthUri",pb(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zx(){return(Zx=Pt(Nt().mark((function e(t,n){var r,i,a,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ub()?ob():"http://localhost",i={identifier:n,continueUri:r},e.next=4,Xx(At(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $x(){return($x=Pt(Nt().mark((function e(t,n){var r,i,a,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=At(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&Ux(r.auth,a,n),e.next=8,N_(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function eI(){return(eI=Pt(Nt().mark((function e(t,n,r){var i,a,o,u;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=At(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&Ux(i.auth,o,r),e.next=8,M_(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tI(e,t){return nI.apply(this,arguments)}function nI(){return(nI=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vb(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rI(){return(rI=Pt(Nt().mark((function e(t,n){var r,i,a,o,u,s,c;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=At(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,Ob(a,tI(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function iI(e,t,n){return aI.apply(this,arguments)}function aI(){return(aI=Pt(Nt().mark((function e(t,n,r){var i,a,o,u;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,Ob(t,__(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var oI=v((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};d(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),uI=function(e){g(n,e);var t=x(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this,e,r,i)).username=a,o}return v(n)}(oI),sI=function(e){g(n,e);var t=x(n);function n(e,r){return d(this,n),t.call(this,e,"facebook.com",r)}return v(n)}(oI),cI=function(e){g(n,e);var t=x(n);function n(e,r){return d(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return v(n)}(uI),lI=function(e){g(n,e);var t=x(n);function n(e,r){return d(this,n),t.call(this,e,"google.com",r)}return v(n)}(oI),hI=function(e){g(n,e);var t=x(n);function n(e,r,i){return d(this,n),t.call(this,e,"twitter.com",r,i)}return v(n)}(uI);function fI(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=Rb(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new oI(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new sI(a,i);case"github.com":return new cI(a,i);case"google.com":return new lI(a,i);case"twitter.com":return new hI(a,i,e.screenName||null);case"custom":case"anonymous":return new oI(a,null);default:return new oI(a,r,i)}}(n)}var dI=function(){function e(t,n){d(this,e),this.type=t,this.credential=n}return v(e,[{key:"toJSON",value:function(){return{multiFactorSession:Le({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),pI=function(){function e(t,n,r){d(this,e),this.session=t,this.hints=n,this.signInResolver=r}return v(e,[{key:"resolveSignIn",value:function(){var e=Pt(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=p_(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return Fx._fromServerResponse(r,e)}));tb(i.mfaPendingCredential,r,"internal-error");var o=dI._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=Pt(Nt().mark((function e(t){var a,u,s;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,fx._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return tb(n.user,r,"internal-error"),e.abrupt("return",fx._forOperation(n.user,n.operationType,u));case 17:Xw(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function vI(e,t){return vb(e,"POST","/v2/accounts/mfaEnrollment:start",pb(e,t))}var yI=function(){function e(t){var n=this;d(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return Fx._fromServerResponse(t.auth,e)})))}))}return v(e,[{key:"getSession",value:function(){var e=Pt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=dI,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=Pt(Nt().mark((function e(t,n){var r,i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,Ob(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=Pt(Nt().mark((function e(t){var n,r,i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return i=e.sent,e.next=6,Ob(this.user,vb(o=this.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",pb(o,{idToken:i,mfaEnrollmentId:r})));case 6:return a=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==r})),e.next=10,this.user._updateTokensIfNecessary(a);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),(null===(n=e.t0)||void 0===n?void 0:n.code)==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}var o}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),gI=new WeakMap;var mI="__sak",kI=function(){function e(t,n){d(this,e),this.storageRetriever=t,this.type=n}return v(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(mI,"1"),this.storage.removeItem(mI),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var wI=function(e){g(n,e);var t=x(n);function n(){var e;return d(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=Xe();return t_(e)||u_(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=l_(),e._shouldAllowMigration=!0,e}return v(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);c_()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=Pt(Nt().mark((function e(t,r){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ur(m(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Pt(Nt().mark((function e(t){var r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ur(m(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Pt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ur(m(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(kI);wI.type="LOCAL";var bI=wI,_I=function(e){g(n,e);var t=x(n);function n(){return d(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return v(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(kI);_I.type="SESSION";var xI=_I;function II(e){return Promise.all(e.map(function(){var e=Pt(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var EI=function(){function e(t){d(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return v(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=Pt(Nt().mark((function e(t){var n,r,i,a,o,u,s,c;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=Pt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,II(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function SI(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}EI.receivers=[];var TI=function(){function e(t){d(this,e),this.target=t,this.handlers=new Set}return v(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=Pt(Nt().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=SI("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function CI(){return window}function AI(){return"undefined"!==typeof CI().WorkerGlobalScope&&"function"===typeof CI().importScripts}function NI(){return DI.apply(this,arguments)}function DI(){return(DI=Pt(Nt().mark((function e(){var t;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function PI(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var RI="firebaseLocalStorageDb",OI="firebaseLocalStorage",LI="fbase_key",MI=function(){function e(t){d(this,e),this.request=t}return v(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function FI(e,t){return e.transaction([OI],t?"readwrite":"readonly").objectStore(OI)}function jI(){var e=indexedDB.deleteDatabase(RI);return new MI(e).toPromise()}function UI(){var e=indexedDB.open(RI,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(OI,{keyPath:LI})}catch(r){n(r)}})),e.addEventListener("success",Pt(Nt().mark((function n(){var r;return Nt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(OI)){n.next=12;break}return r.close(),n.next=5,jI();case 5:return n.t0=t,n.next=8,UI();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function VI(e,t,n){return KI.apply(this,arguments)}function KI(){return KI=Pt(Nt().mark((function e(t,n,r){var i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=FI(t,!0).put((Le(i={},LI,n),Le(i,"value",r),i)),e.abrupt("return",new MI(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),KI.apply(this,arguments)}function BI(e,t){return qI.apply(this,arguments)}function qI(){return qI=Pt(Nt().mark((function e(t,n){var r,i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=FI(t,!1).get(n),e.next=3,new MI(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),qI.apply(this,arguments)}function zI(e,t){var n=FI(e,!0).delete(t);return new MI(n).toPromise()}var WI=function(){function e(){d(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return v(e,[{key:"_openDb",value:function(){var e=Pt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,UI();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=Pt(Nt().mark((function e(t){var n,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=Pt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",AI()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=Pt(Nt().mark((function e(){var t=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=EI._getInstance(AI()?self:null),this.receiver._subscribe("keyChanged",function(){var e=Pt(Nt().mark((function e(n,r){var i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=Pt(Nt().mark((function e(){var t,n,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,NI();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new TI(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=Pt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&PI()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=Pt(Nt().mark((function e(){var t;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,UI();case 5:return t=e.sent,e.next=8,VI(t,mI,"1");case 8:return e.next=10,zI(t,mI);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=Pt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Pt(Nt().mark((function e(t,n){var r=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Pt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return VI(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Pt(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return BI(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Pt(Nt().mark((function e(t){var n=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Pt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return zI(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=Pt(Nt().mark((function e(){var t,n,r,i,a,o,u,s,c,l,h;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=FI(e,!1).getAll();return new MI(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=Me(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(f){i.e(f)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)h=l[c],this.localCache[h]&&!r.has(h)&&(this.notifyListeners(h,null),n.push(h));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(Pt(Nt().mark((function t(){return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();WI.type="LOCAL";var HI=WI;function GI(e,t){return vb(e,"POST","/v2/accounts/mfaSignIn:start",pb(e,t))}function QI(e){return YI.apply(this,arguments)}function YI(){return(YI=Pt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vb(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function XI(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Jw("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function JI(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var ZI=1e12,$I=function(){function e(t){d(this,e),this.auth=t,this.counter=ZI,this._widgets=new Map}return v(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new eE(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||ZI;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||ZI;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=Pt(Nt().mark((function e(t){var n,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||ZI,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),eE=function(){function e(t,n,r){var i=this;d(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;tb(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return v(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var tE=JI("rcb"),nE=new cb(3e4,6e4),rE="https://www.google.com/recaptcha/api.js?",iE=function(){function e(){var t;d(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=CI().grecaptcha)||void 0===t?void 0:t.render)}return v(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return tb(aE(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(CI().grecaptcha):new Promise((function(r,i){var a=CI().setTimeout((function(){i(Jw(e,"network-request-failed"))}),nE.get());CI()[tE]=function(){CI().clearTimeout(a),delete CI()[tE];var o=CI().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(Jw(e,"internal-error"))},XI("".concat(rE,"?").concat(gt({onload:tE,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(Jw(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=CI().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function aE(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var oE=function(){function e(){d(this,e)}return v(e,[{key:"load",value:function(){var e=Pt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new $I(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),uE="recaptcha",sE={theme:"light",type:"image"},cE=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},sE),r=arguments.length>2?arguments[2]:void 0;d(this,e),this.parameters=n,this.type=uE,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=p_(r),this.isInvisible="invisible"===this.parameters.size,tb("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;tb(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new oE:new iE,this.validateStartingState()}return v(e,[{key:"verify",value:function(){var e=Pt(Nt().mark((function e(){var t,n,r,i=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){tb(!this.parameters.sitekey,this.auth,"argument-error"),tb(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),tb("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=CI()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){tb(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=Pt(Nt().mark((function e(){var t,n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=Pt(Nt().mark((function e(){var t;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return tb(ub()&&!AI(),this.auth,"internal-error"),e.next=3,lE();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,QI(this.auth);case 8:tb(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return tb(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function lE(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var hE=function(){function e(t,n){d(this,e),this.verificationId=t,this.onConfirmation=n}return v(e,[{key:"confirm",value:function(e){var t=Z_._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function fE(){return(fE=Pt(Nt().mark((function e(t,n,r){var i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=p_(t),e.next=3,yE(i,n,At(r));case 3:return a=e.sent,e.abrupt("return",new hE(a,(function(e){return Cx(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dE(e,t,n){return pE.apply(this,arguments)}function pE(){return(pE=Pt(Nt().mark((function e(t,n,r){var i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=At(t),e.next=3,_x(!1,i,"phone");case 3:return e.next=5,yE(i.auth,n,At(r));case 5:return a=e.sent,e.abrupt("return",new hE(a,(function(e){return Nx(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vE(){return(vE=Pt(Nt().mark((function e(t,n,r){var i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=At(t),e.next=3,yE(i.auth,n,At(r));case 3:return a=e.sent,e.abrupt("return",new hE(a,(function(e){return Px(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yE(e,t,n){return gE.apply(this,arguments)}function gE(){return gE=Pt(Nt().mark((function e(t,n,r){var i,a,o,u,s,c,l,h,f;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,tb("string"===typeof a,t,"argument-error"),tb(r.type===uE,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return tb("enroll"===u.type,t,"internal-error"),e.next=13,vI(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return tb("signin"===u.type,t,"internal-error"),tb(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,GI(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,H_(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return h=e.sent,f=h.sessionInfo,e.abrupt("return",f);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),gE.apply(this,arguments)}function mE(){return(mE=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wx(At(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var kE=function(){function e(t){d(this,e),this.providerId=e.PROVIDER_ID,this.auth=p_(t)}return v(e,[{key:"verifyPhoneNumber",value:function(e,t){return yE(this.auth,e,At(t))}}],[{key:"credential",value:function(e,t){return Z_._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Z_._fromTokenResponse(n,r):null}}]),e}();function wE(e,t){return t?ab(t):(tb(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}kE.PROVIDER_ID="phone",kE.PHONE_SIGN_IN_METHOD="phone";var bE=function(e){g(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this,"custom","custom")).params=e,r}return v(n,[{key:"_getIdTokenResponse",value:function(e){return q_(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return q_(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return q_(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(k_);function _E(e){return Sx(e.auth,new bE(e),e.bypassAuthState)}function xE(e){var t=e.auth,n=e.user;return tb(n,t,"internal-error"),Ix(n,new bE(e),e.bypassAuthState)}function IE(e){return EE.apply(this,arguments)}function EE(){return(EE=Pt(Nt().mark((function e(t){var n,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,tb(r=t.user,n,"internal-error"),e.abrupt("return",wx(r,new bE(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var SE=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];d(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return v(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=Pt(Nt().mark((function t(n,r){return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=Pt(Nt().mark((function e(t){var n,r,i,a,o,u,s;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _E;case"linkViaPopup":case"linkViaRedirect":return IE;case"reauthViaPopup":case"reauthViaRedirect":return xE;default:Xw(this.auth,"internal-error")}}},{key:"resolve",value:function(e){rb(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){rb(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),TE=new cb(2e3,1e4);function CE(e,t,n){return AE.apply(this,arguments)}function AE(){return(AE=Pt(Nt().mark((function e(t,n,r){var i,a,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=p_(t),$w(t,n,tx),a=wE(i,r),o=new RE(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function NE(){return(NE=Pt(Nt().mark((function e(t,n,r){var i,a,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $w((i=At(t)).auth,n,tx),a=wE(i.auth,r),o=new RE(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function DE(e,t,n){return PE.apply(this,arguments)}function PE(){return(PE=Pt(Nt().mark((function e(t,n,r){var i,a,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $w((i=At(t)).auth,n,tx),a=wE(i.auth,r),o=new RE(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var RE=function(e){g(n,e);var t=x(n);function n(e,r,i,a,o){var u;return d(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=b(u),u}return v(n,[{key:"executeNotNull",value:function(){var e=Pt(Nt().mark((function e(){var t;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return tb(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Pt(Nt().mark((function e(){var t,n=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return rb(1===this.filter.length,"Popup operations only handle one event"),t=SI(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Jw(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Jw(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Jw(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,TE.get())}()}}]),n}(SE);RE.currentPopupAction=null;var OE=new Map,LE=function(e){g(n,e);var t=x(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return d(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return v(n,[{key:"execute",value:function(){var e=Pt(Nt().mark((function e(){var t,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=OE.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,ME(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,ur(m(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:OE.set(this.auth._key(),t);case 21:return this.bypassAuthState||OE.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=Pt(Nt().mark((function e(t){var r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",ur(m(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",ur(m(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Pt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(SE);function ME(e,t){return FE.apply(this,arguments)}function FE(){return(FE=Pt(Nt().mark((function e(t,n){var r,i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=BE(n),i=KE(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jE(e,t){return UE.apply(this,arguments)}function UE(){return(UE=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",KE(t)._set(BE(n),"true"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function VE(e,t){OE.set(e._key(),t)}function KE(e){return ab(e._redirectPersistence)}function BE(e){return Jb("pendingRedirect",e.config.apiKey,e.name)}function qE(e,t,n){return function(e,t,n){return zE.apply(this,arguments)}(e,t,n)}function zE(){return(zE=Pt(Nt().mark((function e(t,n,r){var i,a;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=p_(t),$w(t,n,tx),a=wE(i,r),e.next=5,jE(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function WE(e,t,n){return function(e,t,n){return HE.apply(this,arguments)}(e,t,n)}function HE(){return(HE=Pt(Nt().mark((function e(t,n,r){var i,a,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $w((i=At(t)).auth,n,tx),a=wE(i.auth,r),e.next=5,jE(a,i.auth);case 5:return e.next=7,$E(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function GE(e,t,n){return function(e,t,n){return QE.apply(this,arguments)}(e,t,n)}function QE(){return(QE=Pt(Nt().mark((function e(t,n,r){var i,a,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $w((i=At(t)).auth,n,tx),a=wE(i.auth,r),e.next=5,_x(!1,i,n.providerId);case 5:return e.next=7,jE(a,i.auth);case 7:return e.next=9,$E(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function YE(e,t){return XE.apply(this,arguments)}function XE(){return(XE=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p_(t)._initializationPromise;case 2:return e.abrupt("return",JE(t,n,!1));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function JE(e,t){return ZE.apply(this,arguments)}function ZE(){return ZE=Pt(Nt().mark((function e(t,n){var r,i,a,o,u,s=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=p_(t),a=wE(i,n),o=new LE(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),ZE.apply(this,arguments)}function $E(e){return eS.apply(this,arguments)}function eS(){return(eS=Pt(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=SI("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var tS=function(){function e(t){d(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return v(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return rS(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!rS(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Jw(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(nS(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(nS(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function nS(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function rS(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function iS(e){return aS.apply(this,arguments)}function aS(){return aS=Pt(Nt().mark((function e(t){var n,r=arguments;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",vb(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),aS.apply(this,arguments)}var oS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,uS=/^https?/;function sS(){return(sS=Pt(Nt().mark((function e(t){var n,r,i,a,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,iS(t);case 4:n=e.sent,r=n.authorizedDomains,i=Me(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!cS(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Xw(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function cS(e){var t=ob(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!uS.test(r))return!1;if(oS.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var lS=new cb(3e4,6e4);function hS(){var e=CI().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=f(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var fS=null;function dS(e){return fS=fS||function(e){return new Promise((function(t,n){var r,i,a;function o(){hS(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){hS(),n(Jw(e,"network-request-failed"))},timeout:lS.get()})}if(null===(i=null===(r=CI().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=CI().gapi)||void 0===a?void 0:a.load)){var u=JI("iframefcb");return CI()[u]=function(){gapi.load?o():n(Jw(e,"network-request-failed"))},XI("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw fS=null,e}))}(e),fS}var pS=new cb(5e3,15e3),vS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gS(e){var t=e.config;tb(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?lb(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:An},i=yS.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(gt(r).slice(1))}function mS(e){return kS.apply(this,arguments)}function kS(){return kS=Pt(Nt().mark((function e(t){var n,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dS(t);case 2:return n=e.sent,tb(r=CI().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:gS(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vS,dontclear:!0},(function(e){return new Promise(function(){var n=Pt(Nt().mark((function n(r,i){var a,o,u;return Nt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){CI().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Jw(t,"network-request-failed"),o=CI().setTimeout((function(){i(a)}),pS.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),kS.apply(this,arguments)}var wS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},bS="_blank",_S="http://localhost",xS=function(){function e(t){d(this,e),this.window=t,this.associatedEvent=null}return v(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function IS(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},wS),{width:r.toString(),height:i.toString(),top:a,left:o}),c=Xe().toLowerCase();n&&(u=n_(c)?bS:n),e_(c)&&(t=t||_S,s.scrollbars="yes");var h=Object.entries(s).reduce((function(e,t){var n=l(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(s_(c)&&"_self"!==u)return ES(t||"",u),new xS(null);var f=window.open(t||"",u,h);tb(f,e,"popup-blocked");try{f.focus()}catch(d){}return new xS(f)}function ES(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var SS="__/auth/handler",TS="emulator/auth/handler";function CS(e,t,n,r,i,a){tb(e.config.authDomain,e,"auth-domain-config-required"),tb(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:An,eventId:i};if(t instanceof tx){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",dt(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,s=Object.entries(a||{});u<s.length;u++){var c=l(s[u],2),h=c[0],f=c[1];o[h]=f}}if(t instanceof nx){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var p=o,v=0,y=Object.keys(p);v<y.length;v++){var g=y[v];void 0===p[g]&&delete p[g]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(SS);return lb(t,TS)}(e),"?").concat(gt(p).slice(1))}var AS="webStorageSupport",NS=function(){function e(){d(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xI,this._completeRedirectFn=JE,this._overrideRedirectResult=VE}return v(e,[{key:"_openPopup",value:function(){var e=Pt(Nt().mark((function e(t,n,r,i){var a,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return rb(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=CS(t,n,r,ob(),i),e.abrupt("return",IS(t,o,SI()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Pt(Nt().mark((function e(t,n,r,i){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=CS(t,n,r,ob(),i),CI().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(rb(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=Pt(Nt().mark((function e(t){var n,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mS(t);case 2:return n=e.sent,r=new tS(t),n.register("authEvent",(function(e){return tb(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(AS,{type:AS},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),Xw(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return sS.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return l_()||t_()||u_()}}]),e}(),DS=NS,PS=function(e){g(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this,"phone")).credential=e,r}return v(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return vb(e,"POST","/v2/accounts/mfaEnrollment:finalize",pb(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return vb(e,"POST","/v2/accounts/mfaSignIn:finalize",pb(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(function(){function e(t){d(this,e),this.factorId=t}return v(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return nb("unexpected MultiFactorSessionType")}}}]),e}()),RS=function(){function e(){d(this,e)}return v(e,null,[{key:"assertion",value:function(e){return PS._fromCredential(e)}}]),e}();RS.FACTOR_ID="phone";var OS,LS="@firebase/auth",MS="0.20.6",FS=function(){function e(t){d(this,e),this.auth=t,this.internalListeners=new Map}return v(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=Pt(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){tb(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function jS(){return window}OS="Browser",_n(new Rt("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){tb(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),tb(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:OS,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:h_(OS)},i=new d_(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ab);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),_n(new Rt("auth-internal",(function(e){return function(e){return new FS(e)}(p_(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Ln(LS,MS,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(OS)),Ln(LS,MS,"esm2017");function US(e,t,n){return VS.apply(this,arguments)}function VS(){return VS=Pt(Nt().mark((function e(t,n,r){var i,a,o,u,s;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=jS(),o=a.BuildInfo,rb(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,HS(n.sessionId);case 4:return u=e.sent,s={},u_()?s.ibi=o.packageName:i_()?s.apn=o.packageName:Xw(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",CS(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),VS.apply(this,arguments)}function KS(){return(KS=Pt(Nt().mark((function e(t){var n,r,i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=jS(),r=n.BuildInfo,i={},u_()?i.iosBundleId=r.packageName:i_()?i.androidPackageName=r.packageName:Xw(t,"operation-not-supported-in-this-environment"),e.next=5,iS(t,i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function BS(e){var t=jS().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function qS(e,t,n){return zS.apply(this,arguments)}function zS(){return zS=Pt(Nt().mark((function e(t,n,r){var i,a,o;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=jS(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(Jw(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),i_()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),zS.apply(this,arguments)}function WS(e){var t,n,r,i,a,o,u,s,c,l,h=jS();tb("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),tb("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),tb("function"===typeof(null===(a=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),tb("function"===typeof(null===(s=null===(u=null===(o=null===h||void 0===h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),tb("function"===typeof(null===(l=null===(c=null===h||void 0===h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function HS(e){return GS.apply(this,arguments)}function GS(){return(GS=Pt(Nt().mark((function e(t){var n,r,i;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=QS(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function QS(e){if(rb(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var YS=function(e){g(n,e);var t=x(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return v(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),ur(m(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=Pt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(tS);function XS(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:tT(),postBody:null,tenantId:e.tenantId,error:Jw(e,"no-auth-event")}}function JS(e,t){return nT()._set(rT(e),t)}function ZS(e){return $S.apply(this,arguments)}function $S(){return($S=Pt(Nt().mark((function e(t){var n;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nT()._get(rT(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,nT()._remove(rT(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function eT(e,t){var n,r,i=function(e){var t=iT(e),n=t.link?decodeURIComponent(t.link):void 0,r=iT(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return iT(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=iT(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?Jw(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function tT(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function nT(){return ab(bI)}function rT(e){return Jb("authEvent",e.config.apiKey,e.name)}function iT(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=o(t=n)||h(t)||s(t)||c();r[0];return mt(r.slice(1).join("?"))}var aT=function(){function e(){d(this,e),this._redirectPersistence=xI,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=JE,this._overrideRedirectResult=VE}return v(e,[{key:"_initialize",value:function(){var e=Pt(Nt().mark((function e(t){var n,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new YS(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){Xw(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=Pt(Nt().mark((function e(t,n,r,i){var a,o,u,s;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return WS(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),OE.clear(),e.next=10,this._originValidation(t);case 10:return o=XS(t,r,i),e.next=13,JS(t,o);case 13:return e.next=15,US(t,o,n);case 15:return u=e.sent,e.next=18,BS(u);case 18:return s=e.sent,e.abrupt("return",qS(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return KS.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=jS(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(Pt(Nt().mark((function n(){return Nt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ZS(e);case 2:t.onEvent(uT());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=Pt(Nt().mark((function n(r){var i,a;return Nt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,ZS(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=eT(i,r.url)),t.onEvent(a||uT());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");jS().handleOpenURL=function(){var e=Pt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),oT=aT;function uT(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Jw("no-auth-event")}}function sT(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function cT(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe();return!("file:"!==sT()&&"ionic:"!==sT()&&"capacitor:"!==sT()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function lT(){return tt()&&11===(null===document||void 0===document?void 0:document.documentMode)}function hT(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe();return/Edge\/\d+/.test(e)}function fT(){try{var e=self.localStorage,t=SI();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe();return lT()||hT(e)}()||rt()}catch(n){return dT()&&rt()}return!1}function dT(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function pT(){return("http:"===sT()||"https:"===sT()||$e()||cT())&&!(et()||Ze())&&fT()&&!dT()}function vT(){return cT()&&"undefined"!==typeof document}function yT(){return gT.apply(this,arguments)}function gT(){return(gT=Pt(Nt().mark((function e(){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(vT()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var mT={LOCAL:"local",NONE:"none",SESSION:"session"},kT=tb,wT="persistence";function bT(e,t){kT(Object.values(mT).includes(t),e,"invalid-persistence-type"),et()?kT(t!==mT.SESSION,e,"unsupported-persistence-type"):Ze()?kT(t===mT.NONE,e,"unsupported-persistence-type"):dT()?kT(t===mT.NONE||t===mT.LOCAL&&rt(),e,"unsupported-persistence-type"):kT(t===mT.NONE||fT(),e,"unsupported-persistence-type")}function _T(e){return xT.apply(this,arguments)}function xT(){return(xT=Pt(Nt().mark((function e(t){var n,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=IT(),r=Jb(wT,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function IT(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var ET=tb,ST=function(){function e(){d(this,e),this.browserResolver=ab(DS),this.cordovaResolver=ab(oT),this.underlyingResolver=null,this._redirectPersistence=xI,this._completeRedirectFn=JE,this._overrideRedirectResult=VE}return v(e,[{key:"_initialize",value:function(){var e=Pt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=Pt(Nt().mark((function e(t,n,r,i){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Pt(Nt().mark((function e(t,n,r,i){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return vT()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return ET(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=Pt(Nt().mark((function e(){var t;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,yT();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function TT(e){return e.unwrap()}function CT(e,t){var n,r,i=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===(r=t)||void 0===r?void 0:r.code))t.resolver=new RT(e,function(e,t){var n,r=At(e),i=t;return tb(t.customData.operationType,r,"argument-error"),tb(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),pI._fromError(r,i)}(e,t));else if(i){var a=AT(t),o=t;a&&(o.credential=a,o.tenantId=i.tenantId||void 0,o.email=i.email||void 0,o.phoneNumber=i.phoneNumber||void 0)}}function AT(e){var t=(e instanceof it?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof it)&&"temporaryProof"in t&&"phoneNumber"in t)return kE.credentialFromResult(e);var n,r=t.providerId;if(!r||r===Mw)return null;switch(r){case Lw:n=ax;break;case Rw:n=ix;break;case Ow:n=ox;break;case Fw:n=cx;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?ux._create(r,u):W_._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new rx(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof it?n.credentialFromError(e):n.credentialFromResult(e)}function NT(e,t){return t.catch((function(t){throw t instanceof it&&CT(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,AT(t)),additionalUserInfo:fI(e),user:OT.getOrCreate(r)}}))}function DT(e,t){return PT.apply(this,arguments)}function PT(){return(PT=Pt(Nt().mark((function e(t,n){var r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return NT(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var RT=function(){function e(t,n){d(this,e),this.resolver=n,this.auth=t.wrapped()}return v(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return NT(TT(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),OT=function(){function e(t){d(this,e),this._delegate=t,this.multiFactor=function(e){var t=At(e);return gI.has(t)||gI.set(t,yI._fromUser(t)),gI.get(t)}(t)}return v(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=Pt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",NT(this.auth,Nx(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",DT(this.auth,dE(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=Pt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",NT(this.auth,DE(this._delegate,t,ST)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=Pt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_T(p_(this.auth));case 2:return e.abrupt("return",GE(this._delegate,t,ST));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=Pt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",NT(this.auth,Px(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return DT(this.auth,function(e,t,n){return vE.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return NT(this.auth,function(e,t,n){return NE.apply(this,arguments)}(this._delegate,e,ST))}},{key:"reauthenticateWithRedirect",value:function(){var e=Pt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_T(p_(this.auth));case 2:return e.abrupt("return",WE(this._delegate,t,ST));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return $x.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=Pt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mx(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return iI(At(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return iI(At(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return mE.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return rI.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return eI.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();OT.USER_MAP=new WeakMap;var LT=tb,MT=function(){function e(t,n){if(d(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;LT(r,"invalid-api-key",{appName:t.name}),LT(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?ST:void 0;this._delegate=n.initialize({options:{persistence:jT(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(Ww),this.linkUnderlyingAuth()}return v(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?OT.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){y_(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return Bx.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return qx(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return Kx.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=Pt(Nt().mark((function e(t,n){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",NT(this._delegate,Hx(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return Zx.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=$_.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=Pt(Nt().mark((function e(){var t;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return LT(pT(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,YE(this._delegate,ST);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",NT(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){p_(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=FT(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=FT(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return Qx.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return Vx.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=Pt(Nt().mark((function e(t){var n,r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:bT(this._delegate,t),e.t0=t,e.next=e.t0===mT.SESSION?4:e.t0===mT.LOCAL?6:e.t0===mT.NONE?11:13;break;case 4:return n=xI,e.abrupt("break",14);case 6:return e.next=8,ab(HI)._isAvailable();case 8:return r=e.sent,n=r?HI:bI,e.abrupt("break",14);case 11:return n=Xb,e.abrupt("break",14);case 13:return e.abrupt("return",Xw("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return NT(this._delegate,function(e){return px.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return NT(this._delegate,Cx(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return NT(this._delegate,function(e,t){return Mx.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return NT(this._delegate,function(e,t,n){return Cx(At(e),ex.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return NT(this._delegate,function(e,t,n){return Yx.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return DT(this._delegate,function(e,t,n){return fE.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=Pt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return LT(pT(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",NT(this._delegate,CE(this._delegate,t,ST)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=Pt(Nt().mark((function e(t){return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return LT(pT(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,_T(this._delegate);case 3:return e.abrupt("return",qE(this._delegate,t,ST));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return Wx.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function FT(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&OT.getOrCreate(e))},error:t,complete:n}}function jT(e,t){var n=function(e,t){var n=IT();if(!n)return[];var r=Jb(wT,e,t);switch(n.getItem(r)){case mT.NONE:return[Xb];case mT.LOCAL:return[HI,xI];case mT.SESSION:return[xI];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(HI)||n.push(HI),"undefined"!==typeof window)for(var r=0,i=[bI,xI];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(Xb)||n.push(Xb),n}MT.Persistence=mT;var UT=function(){function e(){d(this,e),this.providerId="phone",this._delegate=new kE(TT(ar.auth()))}return v(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return kE.credential(e,t)}}]),e}();UT.PHONE_SIGN_IN_METHOD=kE.PHONE_SIGN_IN_METHOD,UT.PROVIDER_ID=kE.PROVIDER_ID;var VT=tb,KT=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ar.app();d(this,e),VT(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new cE(t,n,i.auth()),this.type=this._delegate.type}return v(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();!function(e){e.INTERNAL.registerComponent(new Rt("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new MT(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:jw,PASSWORD_RESET:Uw,RECOVER_EMAIL:Vw,REVERT_SECOND_FACTOR_ADDITION:Kw,VERIFY_AND_CHANGE_EMAIL:Bw,VERIFY_EMAIL:qw}},EmailAuthProvider:ex,FacebookAuthProvider:ix,GithubAuthProvider:ox,GoogleAuthProvider:ax,OAuthProvider:rx,SAMLAuthProvider:sx,PhoneAuthProvider:UT,PhoneMultiFactorGenerator:RS,RecaptchaVerifier:KT,TwitterAuthProvider:cx,Auth:MT,AuthCredential:k_,Error:it}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.2.19")}(ar);var BT="@firebase/database",qT="0.13.6",zT="";function WT(e){zT=e}var HT=function(){function e(t){d(this,e),this.domStorage_=t,this.prefix_="firebase:"}return v(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ct(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:st(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),GT=function(){function e(){d(this,e),this.cache_={},this.isInMemoryStorage=!0}return v(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return ht(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),QT=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new HT(t)}}catch(n){}return new GT},YT=QT("localStorage"),XT=QT("sessionStorage"),JT=new zt("@firebase/database"),ZT=function(){var e=1;return function(){return e++}}(),$T=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,Ve(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new wt;n.update(t);var r=n.digest();return qe.encodeByteArray(r)},eC=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?ct(r):r,t+=" "}return t},tC=null,nC=!0,rC=function(e,t){Ve(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(JT.logLevel=Ft.VERBOSE,tC=JT.log.bind(JT),t&&XT.set("logging_enabled",!0)):"function"===typeof e?tC=e:(tC=null,XT.remove("logging_enabled"))},iC=function(){if(!0===nC&&(nC=!1,null===tC&&!0===XT.get("logging_enabled")&&rC(!0)),tC){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=eC.apply(null,t);tC(r)}},aC=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];iC.apply(void 0,[e].concat(n))}},oC=function(){var e="FIREBASE INTERNAL ERROR: "+eC.apply(void 0,arguments);JT.error(e)},uC=function(){var e="FIREBASE FATAL ERROR: ".concat(eC.apply(void 0,arguments));throw JT.error(e),new Error(e)},sC=function(){var e="FIREBASE WARNING: "+eC.apply(void 0,arguments);JT.warn(e)},cC=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},lC="[MIN_NAME]",hC="[MAX_NAME]",fC=function(e,t){if(e===t)return 0;if(e===lC||t===hC)return-1;if(t===lC||e===hC)return 1;var n=_C(e),r=_C(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},dC=function(e,t){return e===t?0:e<t?-1:1},pC=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+ct(t))},vC=function e(t){if("object"!==typeof t||null===t)return ct(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=ct(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},yC=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function gC(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var mC=function(e){Ve(!cC(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var u=[];for(a=52;a;a-=1)u.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)u.push(n%2?1:0),n=Math.floor(n/2);u.push(t?1:0),u.reverse();var s=u.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(s.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var kC=new RegExp("^-?(0*)\\d{1,10}$"),wC=-2147483648,bC=2147483647,_C=function(e){if(kC.test(e)){var t=Number(e);if(t>=wC&&t<=bC)return t}return null},xC=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw sC("Exception was thrown by user callback.",e),t}),Math.floor(0))}},IC=function(e,t){var n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n},EC=function(){function e(t,n){var r=this;d(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return v(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){sC('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),SC=function(){function e(t,n,r){var i=this;d(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return v(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(iC("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',sC(e)}}]),e}(),TC=function(){function e(t){d(this,e),this.accessToken=t}return v(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();TC.OWNER="owner";var CC="5",AC=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,NC="websocket",DC="long_polling",PC=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",u=arguments.length>6&&void 0!==arguments[6]&&arguments[6];d(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=u,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=YT.get("host:"+t)||this._host}return v(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&YT.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function RC(e,t,n){var r;if(Ve("string"===typeof t,"typeof type must == string"),Ve("object"===typeof n,"typeof params must == object"),t===NC)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==DC)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return gC(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var OC=function(){function e(){d(this,e),this.counters_={}}return v(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;ht(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return Ge(void 0,this.counters_)}}]),e}(),LC={},MC={};function FC(e){var t=e.toString();return LC[t]||(LC[t]=new OC),LC[t]}var jC=function(){function e(t){d(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return v(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&xC((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),UC="start",VC="close",KC=function(){function e(t,n,r,i,a,o,u){var s=this;d(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=u,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=aC(t),this.stats_=FC(n),this.urlFn=function(e){return s.appCheckToken&&(e.ac=s.appCheckToken),RC(n,DC,e)}}return v(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new jC(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(nt()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new BC((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===UC)n.id=a,n.password=o;else{if(i!==VC)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=CC,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e.ac=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&AC.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=ct(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=ze(t),r=yC(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!nt()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=ct(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!nt()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),BC=function(){function e(t,n,r,i){if(d(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,nt())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=ZT(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(u){iC("frame writing exception"),u.stack&&iC(u.stack),iC(u)}}}return v(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;nt()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){iC("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||iC("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),qC=null;"undefined"!==typeof MozWebSocket?qC=MozWebSocket:"undefined"!==typeof WebSocket&&(qC=WebSocket);var zC=function(){function e(t,n,r,i,a,o,u){d(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=aC(this.connId),this.stats_=FC(n),this.connURL=e.connectionURL_(n,o,u,i,r),this.nodeAdmin=n.nodeAdmin}return v(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,YT.set("previous_websocket_failure",!0);try{var r;if(nt()){var i=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":"Firebase/".concat(CC,"/").concat(zT,"/").concat(process.platform,"/").concat(i),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(r.proxy={origin:o})}this.mySock=new qC(this.connURL,[],r)}catch(s){this.log_("Error instantiating WebSocket.");var u=s.message||s.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){YT.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=st(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(Ve(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=ct(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=yC(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r,i){var a={};return a.v=CC,!nt()&&"undefined"!==typeof location&&location.hostname&&AC.test(location.hostname)&&(a.r="f"),t&&(a.s=t),n&&(a.ls=n),r&&(a.ac=r),i&&(a.p=i),RC(e,NC,a)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==qC&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return YT.isInMemoryStorage||!0===YT.get("previous_websocket_failure")}}]),e}();zC.responsesRequiredToBeHealthy=2,zC.healthyTimeout=3e4;var WC=function(){function e(t){d(this,e),this.initTransports_(t)}return v(e,[{key:"initTransports_",value:function(t){var n=zC&&zC.isAvailable(),r=n&&!zC.previouslyFailed();if(t.webSocketOnly&&(n||sC("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[zC];else{var i,a=this.transports_=[],o=Me(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var u=i.value;u&&u.isAvailable()&&a.push(u)}}catch(s){o.e(s)}finally{o.f()}e.globalTransportInitialized_=!0}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[KC,zC]}},{key:"IS_TRANSPORT_INITIALIZED",get:function(){return this.globalTransportInitialized_}}]),e}();WC.globalTransportInitialized_=!1;var HC=function(){function e(t,n,r,i,a,o,u,s,c,l){d(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=u,this.onDisconnect_=s,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=aC("c:"+this.id+":"),this.transportManager_=new WC(n),this.log_("Connection created"),this.start_()}return v(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=IC((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=pC("t",e),n=pC("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=pC("t",e),n=pC("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=pC("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?oC("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):oC("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),CC!==n&&sC("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),IC((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):IC((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(YT.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),GC=function(){function e(){d(this,e)}return v(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),QC=function(){function e(t){d(this,e),this.allowedEvents_=t,this.listeners_={},Ve(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return v(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=f(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0;a<t.length;a++)t[a].callback.apply(t[a].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){Ve(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),YC=function(e){g(n,e);var t=x(n);function n(){var e;return d(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||Je()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return v(n,[{key:"getInitialEvent",value:function(e){return Ve("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(QC),XC=function(){function e(t,n){if(d(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return v(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function JC(){return new XC("")}function ZC(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function $C(e){return e.pieces_.length-e.pieceNum_}function eA(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new XC(e.pieces_,t)}function tA(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function nA(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function rA(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new XC(t,0)}function iA(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof XC)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new XC(n,0)}function aA(e){return e.pieceNum_>=e.pieces_.length}function oA(e,t){var n=ZC(e),r=ZC(t);if(null===n)return t;if(n===r)return oA(eA(e),eA(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function uA(e,t){for(var n=nA(e,0),r=nA(t,0),i=0;i<n.length&&i<r.length;i++){var a=fC(n[i],r[i]);if(0!==a)return a}return n.length===r.length?0:n.length<r.length?-1:1}function sA(e,t){if($C(e)!==$C(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function cA(e,t){var n=e.pieceNum_,r=t.pieceNum_;if($C(e)>$C(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var lA=v((function e(t,n){d(this,e),this.errorPrefix_=n,this.parts_=nA(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=Ct(this.parts_[r]);hA(this)}));function hA(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+fA(e))}function fA(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var dA=function(e){g(n,e);var t=x(n);function n(){var e,r,i;return d(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return v(n,[{key:"getInitialEvent",value:function(e){return Ve("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(QC),pA=1e3,vA=function(e){g(n,e);var t=x(n);function n(e,r,i,a,o,u,s,c){var l;if(d(this,n),(l=t.call(this)).repoInfo_=e,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=a,l.onServerInfoUpdate_=o,l.authTokenProvider_=u,l.appCheckTokenProvider_=s,l.authOverride_=c,l.id=n.nextPersistentConnectionId_++,l.log_=aC("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=pA,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.appCheckToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.invalidAppCheckTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!nt())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return dA.getInstance().on("visible",l.onVisible_,b(l)),-1===e.host.indexOf("fblocal")&&YC.getInstance().on("online",l.onOnline_,b(l)),l}return v(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(ct(i)),Ve(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){this.initConnection_();var t=new Qe,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:function(e){var n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;var r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),Ve(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Ve(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var u=o.d,s=o.s;n.warnOnListenWarnings_(u,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==s&&t.removeListen_(i,a),e.onComplete&&e.onComplete(s,u))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=lt(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=lt(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Ve(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+ct(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):oC("Unrecognized action received from server: "+ct(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;Ve(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=pA,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=pA,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=pA),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=Pt(Nt().mark((function e(){var t,r,i,a,o,u,s,c,h,f,d,p,v,y,g=this;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,u=!1,s=null,c=function(){s?s.close():(u=!0,i())},h=function(e){Ve(s,"sendRequest call when we're not connected not allowed."),s.sendRequest(e)},this.realtime_={close:c,sendRequest:h},f=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);case 19:d=e.sent,p=l(d,2),v=p[0],y=p[1],u?iC("getToken() completed but was canceled"):(iC("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=y&&y.token,s=new HC(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){sC(e+" ("+g.repoInfo_.toString()+")"),g.interrupt("server_kill")}),o)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),u||(this.repoInfo_.nodeAdmin&&sC(e.t0),c());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){iC("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){iC("Resuming connection for reason: "+e),delete this.interruptReasons_[e],dt(this.interruptReasons_)&&(this.reconnectDelay_=pA,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return vC(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new XC(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){iC("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){iC("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=Me(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=Me(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(s){r.e(s)}finally{r.f()}}}catch(s){t.e(s)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var u=0;u<this.outstandingGets_.length;u++)this.outstandingGets_[u]&&this.sendGet_(u)}},{key:"sendConnectStats_",value:function(){var e={},t="js";nt()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+zT.replace(/\./g,"-")]=1,Je()?e["framework.cordova"]=1:et()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=YC.getInstance().currentlyOnline();return dt(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&ht(e,"w")){var n=ft(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();sC("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(GC);vA.nextPersistentConnectionId_=0,vA.nextConnectionId_=0;var yA,gA=function(){function e(t,n){d(this,e),this.name=t,this.node=n}return v(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),mA=function(){function e(){d(this,e)}return v(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new gA(lC,e),r=new gA(lC,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return gA.MIN}}]),e}(),kA=function(e){g(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"compare",value:function(e,t){return fC(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw Ke("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return gA.MIN}},{key:"maxPost",value:function(){return new gA(hC,yA)}},{key:"makePost",value:function(e,t){return Ve("string"===typeof e,"KeyIndex indexValue must always be a string."),new gA(e,yA)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return yA},set:function(e){yA=e}}]),n}(mA),wA=new kA,bA=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;d(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return v(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),_A=function(){function e(t,n,r,i,a){d(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:EA.EMPTY_NODE,this.right=null!=a?a:EA.EMPTY_NODE}return v(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return EA.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return EA.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();_A.RED=!0,_A.BLACK=!1;var xA,IA=function(){function e(){d(this,e)}return v(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new _A(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),EA=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;d(this,e),this.comparator_=t,this.root_=n}return v(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,_A.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,_A.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new bA(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new bA(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new bA(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new bA(this.root_,null,this.comparator_,!0,e)}}]),e}();function SA(e,t){return fC(e.name,t.name)}function TA(e,t){return fC(e,t)}EA.EMPTY_NODE=new IA;var CA,AA,NA,DA=function(e){return"number"===typeof e?"number:"+mC(e):"string:"+e},PA=function(e){if(e.isLeafNode()){var t=e.val();Ve("string"===typeof t||"number"===typeof t||"object"===typeof t&&ht(t,".sv"),"Priority must be a string or number.")}else Ve(e===xA||e.isEmpty(),"priority of unexpected type.");Ve(e===xA||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},RA=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;d(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,Ve(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),PA(this.priorityNode_)}return v(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return aA(t)?this:".priority"===ZC(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=ZC(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Ve(".priority"!==r||1===$C(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(eA(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+DA(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?mC(this.value_):this.value_,this.lazyHash_=$T(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(Ve(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return Ve(i>=0,"Unknown leaf type: "+n),Ve(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return CA},set:function(e){CA=e}}]),e}();RA.VALUE_TYPE_ORDER=["object","boolean","number","string"];var OA,LA,MA=function(e){g(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?fC(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return gA.MIN}},{key:"maxPost",value:function(){return new gA(hC,new RA("[PRIORITY-POST]",NA))}},{key:"makePost",value:function(e,t){var n=AA(e);return new gA(t,new RA("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(mA),FA=new MA,jA=Math.log(2),UA=function(){function e(t){d(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/jA,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return v(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),VA=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,u=i-r;if(0===u)return null;if(1===u)return a=e[r],o=n?n(a):a,new _A(o,a.node,_A.BLACK,null,null);var s=parseInt(u/2,10)+r,c=t(r,s),l=t(s+1,i);return a=e[s],o=n?n(a):a,new _A(o,a.node,_A.BLACK,c,l)},a=function(t){for(var r=null,a=null,o=e.length,u=function(t,r){var a=o-t,u=o;o-=t;var c=i(a+1,u),l=e[a],h=n?n(l):l;s(new _A(h,l.node,r,null,c))},s=function(e){r?(r.left=e,r=e):(a=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),h=Math.pow(2,t.count-(c+1));l?u(h,_A.BLACK):(u(h,_A.BLACK),u(h,_A.RED))}return a}(new UA(e.length));return new EA(r||t,a)},KA={},BA=function(){function e(t,n){d(this,e),this.indexes_=t,this.indexSet_=n}return v(e,[{key:"get",value:function(e){var t=ft(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof EA?t:null}},{key:"hasIndex",value:function(e){return ht(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){Ve(t!==wA,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator(gA.Wrap),u=o.getNext();u;)a=a||t.isDefinedOn(u.node),i.push(u),u=o.getNext();r=a?VA(i,t.getCompare()):KA;var s=t.toString(),c=Object.assign({},this.indexSet_);c[s]=t;var l=Object.assign({},this.indexes_);return l[s]=r,new e(l,c)}},{key:"addToIndexes",value:function(t,n){var r=this;return new e(pt(this.indexes_,(function(e,i){var a=ft(r.indexSet_,i);if(Ve(a,"Missing index implementation for "+i),e===KA){if(a.isDefinedOn(t.node)){for(var o=[],u=n.getIterator(gA.Wrap),s=u.getNext();s;)s.name!==t.name&&o.push(s),s=u.getNext();return o.push(t),VA(o,a.getCompare())}return KA}var c=n.get(t.name),l=e;return c&&(l=l.remove(new gA(t.name,c))),l.insert(t,t.node)})),this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(pt(this.indexes_,(function(e){if(e===KA)return e;var r=n.get(t.name);return r?e.remove(new gA(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return Ve(KA&&FA,"ChildrenNode.ts has not been loaded"),OA=OA||new e({".priority":KA},{".priority":FA})}}]),e}(),qA=function(){function e(t,n,r){d(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&PA(this.priorityNode_),this.children_.isEmpty()&&Ve(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return v(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||LA}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?LA:t}},{key:"getChild",value:function(e){var t=ZC(e);return null===t?this:this.getImmediateChild(t).getChild(eA(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(Ve(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new gA(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?LA:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=ZC(e);if(null===n)return t;Ve(".priority"!==ZC(e)||1===$C(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(eA(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(FA,(function(o,u){n[o]=u.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var u in n)o[u]=n[u];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+DA(this.getPriority().val())+":"),this.forEachChild(FA,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":$T(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new gA(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new gA(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new gA(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,gA.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,gA.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===zA?-1:0}},{key:"withIndex",value:function(t){if(t===wA||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===wA||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(FA),r=t.getIterator(FA),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===wA?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return LA||(LA=new e(new EA(TA),null,BA.Default))}}]),e}();qA.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var zA=new(function(e){g(n,e);var t=x(n);function n(){return d(this,n),t.call(this,new EA(TA),qA.EMPTY_NODE,BA.Default)}return v(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return qA.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(qA));Object.defineProperties(gA,{MIN:{value:new gA(lC,qA.EMPTY_NODE)},MAX:{value:new gA(hC,zA)}}),kA.__EMPTY_NODE=qA.EMPTY_NODE,RA.__childrenNodeConstructor=qA,xA=zA,function(e){NA=e}(zA);function WA(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return qA.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),Ve(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){var n=e;return new RA(n,WA(t))}if(e instanceof Array){var r=qA.EMPTY_NODE;return gC(e,(function(t,n){if(ht(e,t)&&"."!==t.substring(0,1)){var i=WA(n);!i.isLeafNode()&&i.isEmpty()||(r=r.updateImmediateChild(t,i))}})),r.updatePriority(WA(t))}var i=[],a=!1,o=e;if(gC(o,(function(e,t){if("."!==e.substring(0,1)){var n=WA(t);n.isEmpty()||(a=a||!n.getPriority().isEmpty(),i.push(new gA(e,n)))}})),0===i.length)return qA.EMPTY_NODE;var u=VA(i,SA,(function(e){return e.name}),TA);if(a){var s=VA(i,FA.getCompare());return new qA(u,WA(t),new BA({".priority":s},{".priority":FA}))}return new qA(u,WA(t),BA.Default)}!function(e){AA=e}(WA);var HA=function(e){g(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).indexPath_=e,Ve(!aA(e)&&".priority"!==ZC(e),"Can't create PathIndex with empty path or .priority key"),r}return v(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?fC(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=WA(e),r=qA.EMPTY_NODE.updateChild(this.indexPath_,n);return new gA(t,r)}},{key:"maxPost",value:function(){var e=qA.EMPTY_NODE.updateChild(this.indexPath_,zA);return new gA(hC,e)}},{key:"toString",value:function(){return nA(this.indexPath_,0).join("/")}}]),n}(mA),GA=function(e){g(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?fC(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return gA.MIN}},{key:"maxPost",value:function(){return gA.MAX}},{key:"makePost",value:function(e,t){var n=WA(e);return new gA(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(mA),QA=new GA,YA="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",XA=function(){var e=0,t=[];return function(n){var r,i=n===e;e=n;var a=new Array(8);for(r=7;r>=0;r--)a[r]=YA.charAt(n%64),n=Math.floor(n/64);Ve(0===n,"Cannot push at time == 0");var o=a.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)o+=YA.charAt(t[r]);return Ve(20===o.length,"nextPushId: Length should be 20."),o}}(),JA=function(e){if("2147483647"===e)return"-";var t=_C(e);if(null!=t)return""+(t+1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return hC;var a=n[i],o=YA.charAt(YA.indexOf(a)+1);return n[i]=o,n.slice(0,i+1).join("")},ZA=function(e){if("-2147483648"===e)return lC;var t=_C(e);if(null!=t)return""+(t-1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=YA.charAt(YA.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function $A(e){return{type:"value",snapshotNode:e}}function eN(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function tN(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function nN(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var rN=function(){function e(t){d(this,e),this.index_=t}return v(e,[{key:"updateChild",value:function(e,t,n,r,i,a){Ve(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=a&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange(tN(t,o)):Ve(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?a.trackChildChange(eN(t,n)):a.trackChildChange(nN(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}},{key:"updateFullNode",value:function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(FA,(function(e,r){t.hasChild(e)||n.trackChildChange(tN(e,r))})),t.isLeafNode()||t.forEachChild(FA,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(nN(t,r,i))}else n.trackChildChange(eN(t,r))}))),t.withIndex(this.index_)}},{key:"updatePriority",value:function(e,t){return e.isEmpty()?qA.EMPTY_NODE:e.updatePriority(t)}},{key:"filtersNodes",value:function(){return!1}},{key:"getIndexedFilter",value:function(){return this}},{key:"getIndex",value:function(){return this.index_}}]),e}(),iN=function(){function e(t){d(this,e),this.indexedFilter_=new rN(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return v(e,[{key:"getStartPost",value:function(){return this.startPost_}},{key:"getEndPost",value:function(){return this.endPost_}},{key:"matches",value:function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}},{key:"updateChild",value:function(e,t,n,r,i,a){return this.matches(new gA(t,n))||(n=qA.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,a)}},{key:"updateFullNode",value:function(e,t,n){t.isLeafNode()&&(t=qA.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(qA.EMPTY_NODE);var i=this;return t.forEachChild(FA,(function(e,t){i.matches(new gA(e,t))||(r=r.updateImmediateChild(e,qA.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.indexedFilter_}},{key:"getIndex",value:function(){return this.index_}}],[{key:"getStartPost_",value:function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}},{key:"getEndPost_",value:function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}]),e}(),aN=function(){function e(t){d(this,e),this.rangedFilter_=new iN(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return v(e,[{key:"updateChild",value:function(e,t,n,r,i,a){return this.rangedFilter_.matches(new gA(t,n))||(n=qA.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,a):this.fullLimitUpdateChild_(e,t,n,i,a)}},{key:"updateFullNode",value:function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=qA.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){var i;r=qA.EMPTY_NODE.withIndex(this.index_),i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var a=0;i.hasNext()&&a<this.limit_;){var o=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),o)<=0:this.index_.compare(o,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(o.name,o.node),a++}}else{var u,s,c,l;if(r=(r=t.withIndex(this.index_)).updatePriority(qA.EMPTY_NODE),this.reverse_){l=r.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),s=this.rangedFilter_.getStartPost();var h=this.index_.getCompare();c=function(e,t){return h(t,e)}}else l=r.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),s=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();for(var f=0,d=!1;l.hasNext();){var p=l.getNext();!d&&c(u,p)<=0&&(d=!0),d&&f<this.limit_&&c(p,s)<=0?f++:r=r.updateImmediateChild(p.name,qA.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.rangedFilter_.getIndexedFilter()}},{key:"getIndex",value:function(){return this.index_}},{key:"fullLimitUpdateChild_",value:function(e,t,n,r,i){var a;if(this.reverse_){var o=this.index_.getCompare();a=function(e,t){return o(t,e)}}else a=this.index_.getCompare();var u=e;Ve(u.numChildren()===this.limit_,"");var s=new gA(t,n),c=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),l=this.rangedFilter_.matches(s);if(u.hasChild(t)){for(var h=u.getImmediateChild(t),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===t||u.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var d=null==f?1:a(f,s);if(l&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(nN(t,n,h)),u.updateImmediateChild(t,n);null!=i&&i.trackChildChange(tN(t,h));var p=u.updateImmediateChild(t,qA.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(eN(f.name,f.node)),p.updateImmediateChild(f.name,f.node)):p}return n.isEmpty()?e:l&&a(c,s)>=0?(null!=i&&(i.trackChildChange(tN(c.name,c.node)),i.trackChildChange(eN(t,n))),u.updateImmediateChild(t,n).updateImmediateChild(c.name,qA.EMPTY_NODE)):e}}]),e}(),oN=function(){function e(){d(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=FA}return v(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"hasStartAfter",value:function(){return this.startAfterSet_}},{key:"hasEndBefore",value:function(){return this.endBeforeSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return Ve(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return Ve(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:lC}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return Ve(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return Ve(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:hC}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return Ve(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===FA}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function uN(e,t,n){var r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function sN(e,t,n){var r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function cN(e,t){var n=e.copy();return n.index_=t,n}function lN(e){var t,n={};return e.isDefault()||(e.index_===FA?t="$priority":e.index_===QA?t="$value":e.index_===wA?t="$key":(Ve(e.index_ instanceof HA,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=ct(t),e.startSet_&&(n.startAt=ct(e.indexStartValue_),e.startNameSet_&&(n.startAt+=","+ct(e.indexStartName_))),e.endSet_&&(n.endAt=ct(e.indexEndValue_),e.endNameSet_&&(n.endAt+=","+ct(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_)),n}function hN(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==FA&&(t.i=e.index_.toString()),t}var fN=function(e){g(n,e);var t=x(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=i,o.appCheckTokenProvider_=a,o.log_=aC("p:rest:"),o.listens_={},o}return v(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var u=n.getListenId_(e,r),s={};this.listens_[u]=s;var c=lN(e._queryParams);this.restRequest_(o+".json",c,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),ft(a.listens_,u)===s)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=lN(e._queryParams),r=e._path.toString(),i=new Qe;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=l(i,2),o=a[0],u=a[1];o&&o.accessToken&&(n.auth=o.accessToken),u&&u.token&&(n.ac=u.token);var s=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+gt(n);t.log_("Sending REST request for "+s);var c=new XMLHttpRequest;c.onreadystatechange=function(){if(r&&4===c.readyState){t.log_("REST Response for "+s+" received. status:",c.status,"response:",c.responseText);var e=null;if(c.status>=200&&c.status<300){try{e=st(c.responseText)}catch(n){sC("Failed to parse JSON response for "+s+": "+c.responseText)}r(null,e)}else 401!==c.status&&404!==c.status&&sC("Got unsuccessful REST response for "+s+" Status: "+c.status),r(c.status);r=null}},c.open("GET",s,!0),c.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(Ve(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(GC),dN=function(){function e(){d(this,e),this.rootNode_=qA.EMPTY_NODE}return v(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function pN(){return{value:null,children:new Map}}function vN(e,t,n){if(aA(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=ZC(t);e.children.has(r)||e.children.set(r,pN()),vN(e.children.get(r),t=eA(t),n)}}function yN(e,t){if(aA(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;var n=e.value;return e.value=null,n.forEachChild(FA,(function(t,n){vN(e,new XC(t),n)})),yN(e,t)}if(e.children.size>0){var r=ZC(t);if(t=eA(t),e.children.has(r))yN(e.children.get(r),t)&&e.children.delete(r);return 0===e.children.size}return!0}function gN(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){gN(r,new XC(t.toString()+"/"+e),n)}))}var mN,kN=function(){function e(t){d(this,e),this.collection_=t,this.last_=null}return v(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&gC(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),wN=function(){function e(t,n){d(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new kN(t);var r=1e4+2e4*Math.random();IC(this.reportStats_.bind(this),Math.floor(r))}return v(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;gC(t,(function(t,i){i>0&&ht(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),IC(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function bN(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(mN||(mN={}));var _N,xN=function(){function e(t,n,r){d(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=mN.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return v(e,[{key:"operationForChild",value:function(t){if(aA(this.path)){if(null!=this.affectedTree.value)return Ve(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new XC(t));return new e(JC(),n,this.revert)}return Ve(ZC(this.path)===t,"operationForChild called for unrelated child."),new e(eA(this.path),this.affectedTree,this.revert)}}]),e}(),IN=function(){function e(t,n){d(this,e),this.source=t,this.path=n,this.type=mN.LISTEN_COMPLETE}return v(e,[{key:"operationForChild",value:function(t){return aA(this.path)?new e(this.source,JC()):new e(this.source,eA(this.path))}}]),e}(),EN=function(){function e(t,n,r){d(this,e),this.source=t,this.path=n,this.snap=r,this.type=mN.OVERWRITE}return v(e,[{key:"operationForChild",value:function(t){return aA(this.path)?new e(this.source,JC(),this.snap.getImmediateChild(t)):new e(this.source,eA(this.path),this.snap)}}]),e}(),SN=function(){function e(t,n,r){d(this,e),this.source=t,this.path=n,this.children=r,this.type=mN.MERGE}return v(e,[{key:"operationForChild",value:function(t){if(aA(this.path)){var n=this.children.subtree(new XC(t));return n.isEmpty()?null:n.value?new EN(this.source,JC(),n.value):new e(this.source,JC(),n)}return Ve(ZC(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,eA(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),TN=function(){function e(t,n,r){d(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return v(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(aA(e))return this.isFullyInitialized()&&!this.filtered_;var t=ZC(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}(),CN=v((function e(t){d(this,e),this.query_=t,this.index_=this.query_._queryParams.getIndex()}));function AN(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw Ke("Should only compare child_ events.");var r=new gA(t.childName,t.snapshotNode),i=new gA(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function NN(e,t){return{eventCache:e,serverCache:t}}function DN(e,t,n,r){return NN(new TN(t,n,r),e.serverCache)}function PN(e,t,n,r){return NN(e.eventCache,new TN(t,n,r))}function RN(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function ON(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var LN=function(){return _N||(_N=new EA(dC)),_N},MN=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:LN();d(this,e),this.value=t,this.children=n}return v(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:JC(),value:this.value};if(aA(e))return null;var n=ZC(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(eA(e),t);return null!=i?{path:iA(new XC(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(aA(t))return this;var n=ZC(t),r=this.children.get(n);return null!==r?r.subtree(eA(t)):new e(null)}},{key:"set",value:function(t,n){if(aA(t))return new e(n,this.children);var r=ZC(t),i=(this.children.get(r)||new e(null)).set(eA(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if(aA(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=ZC(t),r=this.children.get(n);if(r){var i,a=r.remove(eA(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(aA(e))return this.value;var t=ZC(e),n=this.children.get(t);return n?n.get(eA(e)):null}},{key:"setTree",value:function(t,n){if(aA(t))return n;var r,i=ZC(t),a=(this.children.get(i)||new e(null)).setTree(eA(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(JC(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(iA(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,JC(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(aA(e))return null;var i=ZC(e),a=this.children.get(i);return a?a.findOnPath_(eA(e),iA(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,JC(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(aA(t))return this;this.value&&r(n,this.value);var i=ZC(t),a=this.children.get(i);return a?a.foreachOnPath_(eA(t),iA(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(JC(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(iA(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return gC(t,(function(e,t){n=n.set(new XC(e),t)})),n}}]),e}(),FN=function(){function e(t){d(this,e),this.writeTree_=t}return v(e,null,[{key:"empty",value:function(){return new e(new MN(null))}}]),e}();function jN(e,t,n){if(aA(t))return new FN(new MN(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=oA(i,t);return a=a.updateChild(o,n),new FN(e.writeTree_.set(i,a))}var u=new MN(n),s=e.writeTree_.setTree(t,u);return new FN(s)}function UN(e,t,n){var r=e;return gC(n,(function(e,n){r=jN(r,iA(t,e),n)})),r}function VN(e,t){if(aA(t))return FN.empty();var n=e.writeTree_.setTree(t,new MN(null));return new FN(n)}function KN(e,t){return null!=BN(e,t)}function BN(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(oA(n.path,t)):null}function qN(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(FA,(function(e,n){t.push(new gA(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new gA(e,n.value))})),t}function zN(e,t){if(aA(t))return e;var n=BN(e,t);return new FN(null!=n?new MN(n):e.writeTree_.subtree(t))}function WN(e){return e.writeTree_.isEmpty()}function HN(e,t){return GN(JC(),e.writeTree_,t)}function GN(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(Ve(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=GN(iA(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(iA(e,".priority"),r)),n}function QN(e,t){return sD(t,e)}function YN(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}function XN(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));Ve(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var u=e.allWrites[o];u.visible&&(o>=n&&JN(u,r.path)?i=!1:cA(r.path,u.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=$N(e.allWrites,ZN,JC()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=VN(e.visibleWrites,r.path):gC(r.children,(function(t){e.visibleWrites=VN(e.visibleWrites,iA(r.path,t))}));return!0}return!1}function JN(e,t){if(e.snap)return cA(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&cA(iA(e.path,n),t))return!0;return!1}function ZN(e){return e.visible}function $N(e,t,n){for(var r=FN.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,u=void 0;if(a.snap)cA(n,o)?r=jN(r,u=oA(n,o),a.snap):cA(o,n)&&(u=oA(o,n),r=jN(r,JC(),a.snap.getChild(u)));else{if(!a.children)throw Ke("WriteRecord should have .snap or .children");if(cA(n,o))r=UN(r,u=oA(n,o),a.children);else if(cA(o,n))if(aA(u=oA(o,n)))r=UN(r,JC(),a.children);else{var s=ft(a.children,ZC(u));if(s){var c=s.getChild(eA(u));r=jN(r,JC(),c)}}}}}return r}function eD(e,t,n,r,i){if(r||i){var a=zN(e.visibleWrites,t);if(!i&&WN(a))return n;if(i||null!=n||KN(a,JC())){return HN($N(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(cA(e.path,t)||cA(t,e.path))}),t),n||qA.EMPTY_NODE)}return null}var o=BN(e.visibleWrites,t);if(null!=o)return o;var u=zN(e.visibleWrites,t);return WN(u)?n:null!=n||KN(u,JC())?HN(u,n||qA.EMPTY_NODE):null}function tD(e,t,n,r){return eD(e.writeTree,e.treePath,t,n,r)}function nD(e,t){return function(e,t,n){var r=qA.EMPTY_NODE,i=BN(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(FA,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=zN(e.visibleWrites,t);return n.forEachChild(FA,(function(e,t){var n=HN(zN(a,new XC(e)),t);r=r.updateImmediateChild(e,n)})),qN(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return qN(zN(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function rD(e,t,n,r){return function(e,t,n,r,i){Ve(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=iA(t,n);if(KN(e.visibleWrites,a))return null;var o=zN(e.visibleWrites,a);return WN(o)?i.getChild(n):HN(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function iD(e,t){return function(e,t){return BN(e.visibleWrites,t)}(e.writeTree,iA(e.treePath,t))}function aD(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var u,s=zN(e.visibleWrites,t),c=BN(s,JC());if(null!=c)u=c;else{if(null==n)return[];u=HN(s,n)}if((u=u.withIndex(o)).isEmpty()||u.isLeafNode())return[];for(var l=[],h=o.getCompare(),f=a?u.getReverseIteratorFrom(r,o):u.getIteratorFrom(r,o),d=f.getNext();d&&l.length<i;)0!==h(d,r)&&l.push(d),d=f.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,a)}function oD(e,t,n){return function(e,t,n,r){var i=iA(t,n),a=BN(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?HN(zN(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function uD(e,t){return sD(iA(e.treePath,t),e.writeTree)}function sD(e,t){return{treePath:e,writeTree:t}}var cD=function(){function e(){d(this,e),this.changeMap=new Map}return v(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;Ve("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Ve(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,nN(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,tN(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,eN(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw Ke("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,nN(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),lD=new(function(){function e(){d(this,e)}return v(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),hD=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;d(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return v(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new TN(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return oD(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:ON(this.viewCache_),i=aD(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function fD(e,t,n,r,i){var a,o,u=new cD;if(n.type===mN.OVERWRITE){var s=n;s.source.fromUser?a=vD(e,t,s.path,s.snap,r,i,u):(Ve(s.source.fromServer,"Unknown source."),o=s.source.tagged||t.serverCache.isFiltered()&&!aA(s.path),a=pD(e,t,s.path,s.snap,r,i,o,u))}else if(n.type===mN.MERGE){var c=n;c.source.fromUser?a=function(e,t,n,r,i,a,o){var u=t;return r.foreach((function(r,s){var c=iA(n,r);yD(t,ZC(c))&&(u=vD(e,u,c,s,i,a,o))})),r.foreach((function(r,s){var c=iA(n,r);yD(t,ZC(c))||(u=vD(e,u,c,s,i,a,o))})),u}(e,t,c.path,c.children,r,i,u):(Ve(c.source.fromServer,"Unknown source."),o=c.source.tagged||t.serverCache.isFiltered(),a=mD(e,t,c.path,c.children,r,i,o,u))}else if(n.type===mN.ACK_USER_WRITE){var l=n;a=l.revert?function(e,t,n,r,i,a){var o;if(null!=iD(r,n))return t;var u,s=new hD(r,t,i),c=t.eventCache.getNode();if(aA(n)||".priority"===ZC(n)){var l;if(t.serverCache.isFullyInitialized())l=tD(r,ON(t));else{var h=t.serverCache.getNode();Ve(h instanceof qA,"serverChildren would be complete if leaf node"),l=nD(r,h)}u=e.filter.updateFullNode(c,l,a)}else{var f=ZC(n),d=oD(r,f,t.serverCache);null==d&&t.serverCache.isCompleteForChild(f)&&(d=c.getImmediateChild(f)),(u=null!=d?e.filter.updateChild(c,f,d,eA(n),s,a):t.eventCache.getNode().hasChild(f)?e.filter.updateChild(c,f,qA.EMPTY_NODE,eA(n),s,a):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=tD(r,ON(t))).isLeafNode()&&(u=e.filter.updateFullNode(u,o,a))}return o=t.serverCache.isFullyInitialized()||null!=iD(r,JC()),DN(t,u,o,e.filter.filtersNodes())}(e,t,l.path,r,i,u):function(e,t,n,r,i,a,o){if(null!=iD(i,n))return t;var u=t.serverCache.isFiltered(),s=t.serverCache;if(null!=r.value){if(aA(n)&&s.isFullyInitialized()||s.isCompleteForPath(n))return pD(e,t,n,s.getNode().getChild(n),i,a,u,o);if(aA(n)){var c=new MN(null);return s.getNode().forEachChild(wA,(function(e,t){c=c.set(new XC(e),t)})),mD(e,t,n,c,i,a,u,o)}return t}var l=new MN(null);return r.foreach((function(e,t){var r=iA(n,e);s.isCompleteForPath(r)&&(l=l.set(e,s.getNode().getChild(r)))})),mD(e,t,n,l,i,a,u,o)}(e,t,l.path,l.affectedTree,r,i,u)}else{if(n.type!==mN.LISTEN_COMPLETE)throw Ke("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=PN(t,a.getNode(),a.isFullyInitialized()||aA(n),a.isFiltered());return dD(e,o,n,r,lD,i)}(e,t,n.path,r,u)}var h=u.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=RN(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push($A(RN(t)))}}(t,a,h),{viewCache:a,changes:h}}function dD(e,t,n,r,i,a){var o,u,s=t.eventCache;if(null!=iD(r,n))return t;if(aA(n))if(Ve(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=ON(t),l=nD(r,c instanceof qA?c:qA.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),l,a)}else{var h=tD(r,ON(t));o=e.filter.updateFullNode(t.eventCache.getNode(),h,a)}else{var f=ZC(n);if(".priority"===f){Ve(1===$C(n),"Can't have a priority with additional path components");var d=s.getNode(),p=rD(r,n,d,u=t.serverCache.getNode());o=null!=p?e.filter.updatePriority(d,p):s.getNode()}else{var v,y=eA(n);if(s.isCompleteForChild(f)){u=t.serverCache.getNode();var g=rD(r,n,s.getNode(),u);v=null!=g?s.getNode().getImmediateChild(f).updateChild(y,g):s.getNode().getImmediateChild(f)}else v=oD(r,f,t.serverCache);o=null!=v?e.filter.updateChild(s.getNode(),f,v,y,i,a):s.getNode()}}return DN(t,o,s.isFullyInitialized()||aA(n),e.filter.filtersNodes())}function pD(e,t,n,r,i,a,o,u){var s,c=t.serverCache,l=o?e.filter:e.filter.getIndexedFilter();if(aA(n))s=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);s=l.updateFullNode(c.getNode(),h,null)}else{var f=ZC(n);if(!c.isCompleteForPath(n)&&$C(n)>1)return t;var d=eA(n),p=c.getNode().getImmediateChild(f).updateChild(d,r);s=".priority"===f?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),f,p,d,lD,null)}var v=PN(t,s,c.isFullyInitialized()||aA(n),l.filtersNodes());return dD(e,v,n,i,new hD(i,v,a),u)}function vD(e,t,n,r,i,a,o){var u,s,c=t.eventCache,l=new hD(i,t,a);if(aA(n))s=e.filter.updateFullNode(t.eventCache.getNode(),r,o),u=DN(t,s,!0,e.filter.filtersNodes());else{var h=ZC(n);if(".priority"===h)s=e.filter.updatePriority(t.eventCache.getNode(),r),u=DN(t,s,c.isFullyInitialized(),c.isFiltered());else{var f,d=eA(n),p=c.getNode().getImmediateChild(h);if(aA(d))f=r;else{var v=l.getCompleteChild(h);f=null!=v?".priority"===tA(d)&&v.getChild(rA(d)).isEmpty()?v:v.updateChild(d,r):qA.EMPTY_NODE}if(p.equals(f))u=t;else u=DN(t,e.filter.updateChild(c.getNode(),h,f,d,l,o),c.isFullyInitialized(),e.filter.filtersNodes())}}return u}function yD(e,t){return e.eventCache.isCompleteForChild(t)}function gD(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function mD(e,t,n,r,i,a,o,u){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var s,c=t;s=aA(n)?r:new MN(null).setTree(n,r);var l=t.serverCache.getNode();return s.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var s=gD(0,t.serverCache.getNode().getImmediateChild(n),r);c=pD(e,c,new XC(n),s,i,a,o,u)}})),s.children.inorderTraversal((function(n,r){var s=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!l.hasChild(n)&&!s){var h=gD(0,t.serverCache.getNode().getImmediateChild(n),r);c=pD(e,c,new XC(n),h,i,a,o,u)}})),c}var kD,wD=function(){function e(t,n){d(this,e),this.query_=t,this.eventRegistrations_=[];var r,i=this.query_._queryParams,a=new rN(i.getIndex()),o=(r=i).loadsAllData()?new rN(r.getIndex()):r.hasLimit()?new aN(r):new iN(r);this.processor_=function(e){return{filter:e}}(o);var u=n.serverCache,s=n.eventCache,c=a.updateFullNode(qA.EMPTY_NODE,u.getNode(),null),l=o.updateFullNode(qA.EMPTY_NODE,s.getNode(),null),h=new TN(c,u.isFullyInitialized(),a.filtersNodes()),f=new TN(l,s.isFullyInitialized(),o.filtersNodes());this.viewCache_=NN(f,h),this.eventGenerator_=new CN(this.query_)}return v(e,[{key:"query",get:function(){return this.query_}}]),e}();function bD(e,t){var n=ON(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!aA(t)&&!n.getImmediateChild(ZC(t)).isEmpty())?n.getChild(t):null}function _D(e){return 0===e.eventRegistrations_.length}function xD(e,t,n){var r=[];if(n){Ve(null==t,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach((function(e){var t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){for(var a=[],o=0;o<e.eventRegistrations_.length;++o){var u=e.eventRegistrations_[o];if(u.matches(t)){if(t.hasAnyCallback()){a=a.concat(e.eventRegistrations_.slice(o+1));break}}else a.push(u)}e.eventRegistrations_=a}else e.eventRegistrations_=[];return r}function ID(e,t,n,r){t.type===mN.MERGE&&null!==t.source.queryId&&(Ve(ON(e.viewCache_),"We should always have a full cache before handling merges"),Ve(RN(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,u=fD(e.processor_,o,t,n,r);return i=e.processor_,a=u.viewCache,Ve(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),Ve(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),Ve(u.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=u.viewCache,ED(e,u.changes,u.viewCache.eventCache.getNode(),null)}function ED(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),AN(e,i,"child_removed",t,r,n),AN(e,i,"child_added",t,r,n),AN(e,i,"child_moved",a,r,n),AN(e,i,"child_changed",t,r,n),AN(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var SD,TD=v((function e(){d(this,e),this.views=new Map}));function CD(e){return 0===e.views.size}function AD(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return Ve(null!=a,"SyncTree gave us an op for an invalid query."),ID(a,t,n,r)}var o,u=[],s=Me(e.views.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u=u.concat(ID(c,t,n,r))}}catch(l){s.e(l)}finally{s.f()}return u}function ND(e,t,n,r,i){var a=t._queryIdentifier,o=e.views.get(a);if(!o){var u=tD(n,i?r:null),s=!1;u?s=!0:r instanceof qA?(u=nD(n,r),s=!1):(u=qA.EMPTY_NODE,s=!1);var c=NN(new TN(u,s,!1),new TN(r,i,!1));return new wD(t,c)}return o}function DD(e,t,n,r,i,a){var o=ND(e,t,r,i,a);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){var n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(FA,(function(e,t){r.push(eN(e,t))})),n.isFullyInitialized()&&r.push($A(n.getNode())),ED(e,r,n.getNode(),t)}(o,n)}function PD(e,t,n,r){var i=t._queryIdentifier,a=[],o=[],u=FD(e);if("default"===i){var s,c=Me(e.views.entries());try{for(c.s();!(s=c.n()).done;){var h=l(s.value,2),f=h[0],d=h[1];o=o.concat(xD(d,n,r)),_D(d)&&(e.views.delete(f),d.query._queryParams.loadsAllData()||a.push(d.query))}}catch(v){c.e(v)}finally{c.f()}}else{var p=e.views.get(i);p&&(o=o.concat(xD(p,n,r)),_D(p)&&(e.views.delete(i),p.query._queryParams.loadsAllData()||a.push(p.query)))}return u&&!FD(e)&&a.push(new(Ve(kD,"Reference.ts has not been loaded"),kD)(t._repo,t._path)),{removed:a,events:o}}function RD(e){var t,n=[],r=Me(e.views.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;i.query._queryParams.loadsAllData()||n.push(i)}}catch(a){r.e(a)}finally{r.f()}return n}function OD(e,t){var n,r=null,i=Me(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||bD(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}function LD(e,t){if(t._queryParams.loadsAllData())return jD(e);var n=t._queryIdentifier;return e.views.get(n)}function MD(e,t){return null!=LD(e,t)}function FD(e){return null!=jD(e)}function jD(e){var t,n=Me(e.views.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.query._queryParams.loadsAllData())return r}}catch(i){n.e(i)}finally{n.f()}return null}var UD=1,VD=v((function e(t){d(this,e),this.listenProvider_=t,this.syncPointTree_=new MN(null),this.pendingWriteTree_={visibleWrites:FN.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function KD(e,t,n,r,i){return function(e,t,n,r,i){Ve(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=jN(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?XD(e,new EN({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function BD(e,t,n,r){!function(e,t,n,r){Ve(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=UN(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);var i=MN.fromObject(n);return XD(e,new SN({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function qD(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=YN(e.pendingWriteTree_,t),i=XN(e.pendingWriteTree_,t);if(i){var a=new MN(null);return null!=r.snap?a=a.set(JC(),!0):gC(r.children,(function(e){a=a.set(new XC(e),!0)})),XD(e,new xN(r.path,a,n))}return[]}function zD(e,t,n){return XD(e,new EN({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function WD(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=t._path,o=e.syncPointTree_.get(a),u=[];if(o&&("default"===t._queryIdentifier||MD(o,t))){var s=PD(o,t,n,r);CD(o)&&(e.syncPointTree_=e.syncPointTree_.remove(a));var c=s.removed;if(u=s.events,!i){var l=-1!==c.findIndex((function(e){return e._queryParams.loadsAllData()})),h=e.syncPointTree_.findOnPath(a,(function(e,t){return FD(t)}));if(l&&!h){var f=e.syncPointTree_.subtree(a);if(!f.isEmpty())for(var d=aP(f),p=0;p<d.length;++p){var v=d[p],y=v.query,g=$D(e,v);e.listenProvider_.startListening(oP(y),eP(e,y),g.hashFn,g.onComplete)}}if(!h&&c.length>0&&!r)if(l){var m=null;e.listenProvider_.stopListening(oP(t),m)}else c.forEach((function(t){var n=e.queryToTagMap.get(tP(t));e.listenProvider_.stopListening(oP(t),n)}))}uP(e,c)}return u}function HD(e,t,n,r){var i=nP(e,r);if(null!=i){var a=rP(i),o=a.path,u=a.queryId,s=oA(o,t);return iP(e,o,new EN(bN(u),s,n))}return[]}function GD(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=t._path,a=null,o=!1;e.syncPointTree_.foreachOnPath(i,(function(e,t){var n=oA(e,i);a=a||OD(t,n),o=o||FD(t)}));var u,s=e.syncPointTree_.get(i);if(s?(o=o||FD(s),a=a||OD(s,JC())):(s=new TD,e.syncPointTree_=e.syncPointTree_.set(i,s)),null!=a)u=!0;else{u=!1,a=qA.EMPTY_NODE;var c=e.syncPointTree_.subtree(i);c.foreachChild((function(e,t){var n=OD(t,JC());n&&(a=a.updateImmediateChild(e,n))}))}var l=MD(s,t);if(!l&&!t._queryParams.loadsAllData()){var h=tP(t);Ve(!e.queryToTagMap.has(h),"View does not exist, but we have a tag");var f=sP();e.queryToTagMap.set(h,f),e.tagToQueryMap.set(f,h)}var d=QN(e.pendingWriteTree_,i),p=DD(s,t,n,d,a,u);if(!l&&!o&&!r){var v=LD(s,t);p=p.concat(cP(e,t,v))}return p}function QD(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=OD(n,oA(e,t));if(r)return r}));return eD(r,t,i,n,!0)}function YD(e,t){var n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(function(e,t){var i=oA(e,n);r=r||OD(t,i)}));var i=e.syncPointTree_.get(n);i?r=r||OD(i,JC()):(i=new TD,e.syncPointTree_=e.syncPointTree_.set(n,i));var a=null!=r,o=a?new TN(r,!0,!1):null;return function(e){return RN(e.viewCache_)}(ND(i,t,QN(e.pendingWriteTree_,t._path),a?o.getNode():qA.EMPTY_NODE,a))}function XD(e,t){return JD(t,e.syncPointTree_,null,QN(e.pendingWriteTree_,JC()))}function JD(e,t,n,r){if(aA(e.path))return ZD(e,t,n,r);var i=t.get(JC());null==n&&null!=i&&(n=OD(i,JC()));var a=[],o=ZC(e.path),u=e.operationForChild(o),s=t.children.get(o);if(s&&u){var c=n?n.getImmediateChild(o):null,l=uD(r,o);a=a.concat(JD(u,s,c,l))}return i&&(a=a.concat(AD(i,e,r,n))),a}function ZD(e,t,n,r){var i=t.get(JC());null==n&&null!=i&&(n=OD(i,JC()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,u=uD(r,t),s=e.operationForChild(t);s&&(a=a.concat(ZD(s,i,o,u)))})),i&&(a=a.concat(AD(i,e,r,n))),a}function $D(e,t){var n=t.query,r=eP(e,n);return{hashFn:function(){var e=function(e){return e.viewCache_.serverCache.getNode()}(t)||qA.EMPTY_NODE;return e.hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=nP(e,n);if(r){var i=rP(r),a=i.path,o=i.queryId,u=oA(a,t);return iP(e,a,new IN(bN(o),u))}return[]}(e,n._path,r):function(e,t){return XD(e,new IN({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return WD(e,n,null,i)}}}function eP(e,t){var n=tP(t);return e.queryToTagMap.get(n)}function tP(e){return e._path.toString()+"$"+e._queryIdentifier}function nP(e,t){return e.tagToQueryMap.get(t)}function rP(e){var t=e.indexOf("$");return Ve(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new XC(e.substr(0,t))}}function iP(e,t,n){var r=e.syncPointTree_.get(t);return Ve(r,"Missing sync point for query tag that we're tracking"),AD(r,n,QN(e.pendingWriteTree_,t),null)}function aP(e){return e.fold((function(e,t,n){if(t&&FD(t))return[jD(t)];var r=[];return t&&(r=RD(t)),gC(n,(function(e,t){r=r.concat(t)})),r}))}function oP(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Ve(SD,"Reference.ts has not been loaded"),SD)(e._repo,e._path):e}function uP(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=tP(r),a=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(a)}}}function sP(){return UD++}function cP(e,t,n){var r=t._path,i=eP(e,t),a=$D(e,n),o=e.listenProvider_.startListening(oP(t),i,a.hashFn,a.onComplete),u=e.syncPointTree_.subtree(r);if(i)Ve(!FD(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var s=u.fold((function(e,t,n){if(!aA(e)&&t&&FD(t))return[jD(t).query];var r=[];return t&&(r=r.concat(RD(t).map((function(e){return e.query})))),gC(n,(function(e,t){r=r.concat(t)})),r})),c=0;c<s.length;++c){var l=s[c];e.listenProvider_.stopListening(oP(l),eP(e,l))}return o}var lP=function(){function e(t){d(this,e),this.node_=t}return v(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),hP=function(){function e(t,n){d(this,e),this.syncTree_=t,this.path_=n}return v(e,[{key:"getImmediateChild",value:function(t){var n=iA(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return QD(this.syncTree_,this.path_)}}]),e}(),fP=function(e,t,n){return e&&"object"===typeof e?(Ve(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?dP(e[".sv"],t,n):"object"===typeof e[".sv"]?pP(e[".sv"],t):void Ve(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},dP=function(e,t,n){if("timestamp"===e)return n.timestamp;Ve(!1,"Unexpected server value: "+e)},pP=function(e,t,n){e.hasOwnProperty("increment")||Ve(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&Ve(!1,"Unexpected increment value: "+r);var i=t.node();if(Ve(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},vP=function(e,t,n,r){return gP(t,new hP(n,e),r)},yP=function(e,t,n){return gP(e,new lP(t),n)};function gP(e,t,n){var r,i=e.getPriority().val(),a=fP(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,u=fP(o.getValue(),t,n);return u!==o.getValue()||a!==o.getPriority().val()?new RA(u,WA(a)):e}var s=e;return r=s,a!==s.getPriority().val()&&(r=r.updatePriority(new RA(a))),s.forEachChild(FA,(function(e,i){var a=gP(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var mP=v((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};d(this,e),this.name=t,this.parent=n,this.node=r}));function kP(e,t){for(var n=t instanceof XC?t:new XC(t),r=e,i=ZC(n);null!==i;){var a=ft(r.node.children,i)||{children:{},childCount:0};r=new mP(i,r,a),i=ZC(n=eA(n))}return r}function wP(e){return e.node.value}function bP(e,t){e.node.value=t,SP(e)}function _P(e){return e.node.childCount>0}function xP(e,t){gC(e.node.children,(function(n,r){t(new mP(n,e,r))}))}function IP(e,t,n,r){n&&!r&&t(e),xP(e,(function(e){IP(e,t,!0,r)})),n&&r&&t(e)}function EP(e){return new XC(null===e.parent?e.name:EP(e.parent)+"/"+e.name)}function SP(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===wP(e)&&!_P(e)}(n),i=ht(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,SP(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,SP(e))}(e.parent,e.name,e)}var TP=/[\[\].#$\/\u0000-\u001F\u007F]/,CP=/[\[\].#$\u0000-\u001F\u007F]/,AP=10485760,NP=function(e){return"string"===typeof e&&0!==e.length&&!TP.test(e)},DP=function(e){return"string"===typeof e&&0!==e.length&&!CP.test(e)},PP=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!cC(e)||e&&"object"===typeof e&&ht(e,".sv")},RP=function(e,t,n,r){r&&void 0===t||OP(Et(e,"value"),t,n)},OP=function e(t,n,r){var i=r instanceof XC?new lA(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+fA(i));if("function"===typeof n)throw new Error(t+"contains a function "+fA(i)+" with contents = "+n.toString());if(cC(n))throw new Error(t+"contains "+n.toString()+" "+fA(i));if("string"===typeof n&&n.length>AP/3&&Ct(n)>AP)throw new Error(t+"contains a string greater than "+"10485760 utf8 bytes "+fA(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(gC(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!NP(n)))throw new Error(t+" contains an invalid key ("+n+") "+fA(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var u,s;s=n,(u=i).parts_.length>0&&(u.byteLength_+=1),u.parts_.push(s),u.byteLength_+=Ct(s),hA(u),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=Ct(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+fA(i)+" in addition to actual children.")}},LP=function(e,t,n,r){if(!r||void 0!==t){var i=Et(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");var a=[];gC(t,(function(e,t){var r=new XC(e);if(OP(i,t,iA(n,r)),".priority"===tA(r)&&!PP(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(r)})),function(e,t){var n,r;for(n=0;n<t.length;n++)for(var i=nA(r=t[n]),a=0;a<i.length;a++)if(".priority"===i[a]&&a===i.length-1);else if(!NP(i[a]))throw new Error(e+"contains an invalid key ("+i[a]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(uA);var o=null;for(n=0;n<t.length;n++){if(r=t[n],null!==o&&cA(o,r))throw new Error(e+"contains a path "+o.toString()+" that is ancestor of another path "+r.toString());o=r}}(i,a)}},MP=function(e,t,n){if(!n||void 0!==t){if(cC(t))throw new Error(Et(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!PP(t))throw new Error(Et(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},FP=function(e,t,n,r){if((!r||void 0!==n)&&!NP(n))throw new Error(Et(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},jP=function(e,t,n,r){if((!r||void 0!==n)&&!DP(n))throw new Error(Et(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},UP=function(e,t){if(".info"===ZC(t))throw new Error(e+" failed = Can't modify data under /.info/")},VP=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!NP(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),DP(e)}(n))throw new Error(Et(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},KP=v((function e(){d(this,e),this.eventLists_=[],this.recursionDepth_=0}));function BP(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||sA(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function qP(e,t,n){BP(e,n),WP(e,(function(e){return sA(e,t)}))}function zP(e,t,n){BP(e,n),WP(e,(function(e){return cA(e,t)||cA(t,e)}))}function WP(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(HP(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function HP(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();tC&&iC("event: "+n.toString()),xC(r)}}}var GP="repo_interrupt",QP=function(){function e(t,n,r,i){d(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new KP,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=pN(),this.transactionQueueTree_=new mP,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return v(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function YP(e,t,n){if(e.stats_=FC(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new fN(e.repoInfo_,(function(t,n,r,i){ZP(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return $P(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ct(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new vA(e.repoInfo_,t,(function(t,n,r,i){ZP(e,t,n,r,i)}),(function(t){$P(e,t)}),(function(t){!function(e,t){gC(t,(function(t,n){eR(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return MC[n]||(MC[n]=t()),MC[n]}(e.repoInfo_,(function(){return new wN(e.stats_,e.server_)})),e.infoData_=new dN,e.infoSyncTree_=new VD({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=zD(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),eR(e,"connected",!1),e.serverSyncTree_=new VD({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);zP(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function XP(e){var t=e.infoData_.getNode(new XC(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function JP(e){return(t=(t={timestamp:XP(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function ZP(e,t,n,r,i){e.dataUpdateCount++;var a=new XC(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var u=pt(n,(function(e){return WA(e)}));o=function(e,t,n,r){var i=nP(e,r);if(i){var a=rP(i),o=a.path,u=a.queryId,s=oA(o,t),c=MN.fromObject(n);return iP(e,o,new SN(bN(u),s,c))}return[]}(e.serverSyncTree_,a,u,i)}else{var s=WA(n);o=HD(e.serverSyncTree_,a,s,i)}else if(r){var c=pt(n,(function(e){return WA(e)}));o=function(e,t,n){var r=MN.fromObject(n);return XD(e,new SN({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,c)}else{var l=WA(n);o=zD(e.serverSyncTree_,a,l)}var h=a;o.length>0&&(h=fR(e,a)),zP(e.eventQueue_,h,o)}function $P(e,t){eR(e,"connected",t),!1===t&&function(e){uR(e,"onDisconnectEvents");var t=JP(e),n=pN();gN(e.onDisconnect_,JC(),(function(r,i){var a=vP(r,i,e.serverSyncTree_,t);vN(n,r,a)}));var r=[];gN(n,JC(),(function(t,n){r=r.concat(zD(e.serverSyncTree_,t,n));var i=gR(e,t);fR(e,i)})),e.onDisconnect_=pN(),zP(e.eventQueue_,JC(),r)}(e)}function eR(e,t,n){var r=new XC("/.info/"+t),i=WA(n);e.infoData_.updateSnapshot(r,i);var a=zD(e.infoSyncTree_,r,i);zP(e.eventQueue_,r,a)}function tR(e){return e.nextWriteId_++}function nR(e,t,n,r,i){uR(e,"set",{path:t.toString(),value:n,priority:r});var a=JP(e),o=WA(n,r),u=QD(e.serverSyncTree_,t),s=yP(o,u,a),c=tR(e),l=KD(e.serverSyncTree_,t,s,c,!0);BP(e.eventQueue_,l),e.server_.put(t.toString(),o.val(!0),(function(n,r){var a="ok"===n;a||sC("set at "+t+" failed: "+n);var o=qD(e.serverSyncTree_,c,!a);zP(e.eventQueue_,t,o),sR(e,i,n,r)}));var h=gR(e,t);fR(e,h),zP(e.eventQueue_,h,[])}function rR(e,t,n){e.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&yN(e.onDisconnect_,t),sR(e,n,r,i)}))}function iR(e,t,n,r){var i=WA(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),(function(n,a){"ok"===n&&vN(e.onDisconnect_,t,i),sR(e,r,n,a)}))}function aR(e,t,n){var r;r=".info"===ZC(t._path)?WD(e.infoSyncTree_,t,n):WD(e.serverSyncTree_,t,n),qP(e.eventQueue_,t._path,r)}function oR(e){e.persistentConnection_&&e.persistentConnection_.interrupt(GP)}function uR(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];iC.apply(void 0,[t].concat(r))}function sR(e,t,n,r){t&&xC((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var a=new Error(i);a.code=e,t(a)}}))}function cR(e,t,n){return QD(e.serverSyncTree_,t,n)||qA.EMPTY_NODE}function lR(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||yR(e,t),wP(t)){var n=pR(e,t);Ve(n.length>0,"Sending zero length transaction queue");var r=n.every((function(e){return 0===e.status}));r&&hR(e,EP(t),n)}else _P(t)&&xP(t,(function(t){lR(e,t)}))}function hR(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=cR(e,t,r),a=i,o=i.hash(),u=0;u<n.length;u++){var s=n[u];Ve(0===s.status,"tryToSendTransactionQueue_: items in queue should all be run."),s.status=1,s.retryCount++;var c=oA(t,s.path);a=a.updateChild(c,s.currentOutputSnapshotRaw)}var l=a.val(!0),h=t;e.server_.put(h.toString(),l,(function(r){uR(e,"transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat(qD(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},u=0;u<n.length;u++)o(u);yR(e,kP(e.transactionQueueTree_,t)),lR(e,e.transactionQueueTree_),zP(e.eventQueue_,t,i);for(var s=0;s<a.length;s++)xC(a[s])}else{if("datastale"===r)for(var c=0;c<n.length;c++)3===n[c].status?n[c].status=4:n[c].status=0;else{sC("transaction at "+h.toString()+" failed: "+r);for(var l=0;l<n.length;l++)n[l].status=4,n[l].abortReason=r}fR(e,t)}}),o)}function fR(e,t){var n=dR(e,t),r=EP(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),u=function(a){var u,s=t[a],c=oA(n,s.path),l=!1,h=void 0;if(Ve(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===s.status)l=!0,h=s.abortReason,i=i.concat(qD(e.serverSyncTree_,s.currentWriteId,!0));else if(0===s.status)if(s.retryCount>=25)l=!0,h="maxretry",i=i.concat(qD(e.serverSyncTree_,s.currentWriteId,!0));else{var f=cR(e,s.path,o);s.currentInputSnapshot=f;var d=t[a].update(f.val());if(void 0!==d){OP("transaction failed: Data returned ",d,s.path);var p=WA(d);"object"===typeof d&&null!=d&&ht(d,".priority")||(p=p.updatePriority(f.getPriority()));var v=s.currentWriteId,y=JP(e),g=yP(p,f,y);s.currentOutputSnapshotRaw=p,s.currentOutputSnapshotResolved=g,s.currentWriteId=tR(e),o.splice(o.indexOf(v),1),i=(i=i.concat(KD(e.serverSyncTree_,s.path,g,s.currentWriteId,s.applyLocally))).concat(qD(e.serverSyncTree_,v,!0))}else l=!0,h="nodata",i=i.concat(qD(e.serverSyncTree_,s.currentWriteId,!0))}zP(e.eventQueue_,n,i),i=[],l&&(t[a].status=2,u=t[a].unwatcher,setTimeout(u,Math.floor(0)),t[a].onComplete&&("nodata"===h?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(h),!1,null)}))))},s=0;s<t.length;s++)u(s);yR(e,e.transactionQueueTree_);for(var c=0;c<r.length;c++)xC(r[c]);lR(e,e.transactionQueueTree_)}(e,pR(e,n),r),r}function dR(e,t){var n,r=e.transactionQueueTree_;for(n=ZC(t);null!==n&&void 0===wP(r);)r=kP(r,n),n=ZC(t=eA(t));return r}function pR(e,t){var n=[];return vR(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function vR(e,t,n){var r=wP(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);xP(t,(function(t){vR(e,t,n)}))}function yR(e,t){var n=wP(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,bP(t,n.length>0?n:void 0)}xP(t,(function(t){yR(e,t)}))}function gR(e,t){var n=EP(dR(e,t)),r=kP(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){mR(e,t)})),mR(e,r),IP(r,(function(t){mR(e,t)})),n}function mR(e,t){var n=wP(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(Ve(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(Ve(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(qD(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?bP(t,void 0):n.length=a+1,zP(e.eventQueue_,EP(t),i);for(var u=0;u<r.length;u++)xC(r[u])}}var kR=function(e,t){var n=wR(e),r=n.namespace;"firebase.com"===n.domain&&uC(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||uC("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&sC("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new PC(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new XC(n.pathString)}},wR=function(e){var t="",n="",r="",i="",a="",o=!0,u="https",s=443;if("string"===typeof e){var c=e.indexOf("//");c>=0&&(u=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(l,h)),l<h&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}t+="/"+i}return t}(e.substring(l,h)));var f=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=Me(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):sC("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,h)));(c=t.indexOf(":"))>=0?(o="https"===u||"wss"===u,s=parseInt(t.substring(c+1),10)):c=t.length;var d=t.slice(0,c);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),a=r}"ns"in f&&(a=f.ns)}return{host:t,port:s,domain:n,subdomain:r,secure:o,scheme:u,pathString:i,namespace:a}},bR=function(){function e(t,n,r,i){d(this,e),this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}return v(e,[{key:"getPath",value:function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}},{key:"getEventType",value:function(){return this.eventType}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.getPath().toString()+":"+this.eventType+":"+ct(this.snapshot.exportVal())}}]),e}(),_R=function(){function e(t,n,r){d(this,e),this.eventRegistration=t,this.error=n,this.path=r}return v(e,[{key:"getPath",value:function(){return this.path}},{key:"getEventType",value:function(){return"cancel"}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.path.toString()+":cancel"}}]),e}(),xR=function(){function e(t,n){d(this,e),this.snapshotCallback=t,this.cancelCallback=n}return v(e,[{key:"onValue",value:function(e,t){this.snapshotCallback.call(null,e,t)}},{key:"onCancel",value:function(e){return Ve(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}},{key:"hasCancelCallback",get:function(){return!!this.cancelCallback}},{key:"matches",value:function(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}]),e}(),IR=function(){function e(t,n){d(this,e),this._repo=t,this._path=n}return v(e,[{key:"cancel",value:function(){var e=new Qe;return rR(this._repo,this._path,e.wrapCallback((function(){}))),e.promise}},{key:"remove",value:function(){UP("OnDisconnect.remove",this._path);var e=new Qe;return iR(this._repo,this._path,null,e.wrapCallback((function(){}))),e.promise}},{key:"set",value:function(e){UP("OnDisconnect.set",this._path),RP("OnDisconnect.set",e,this._path,!1);var t=new Qe;return iR(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}},{key:"setWithPriority",value:function(e,t){UP("OnDisconnect.setWithPriority",this._path),RP("OnDisconnect.setWithPriority",e,this._path,!1),MP("OnDisconnect.setWithPriority",t,!1);var n=new Qe;return function(e,t,n,r,i){var a=WA(n,r);e.server_.onDisconnectPut(t.toString(),a.val(!0),(function(n,r){"ok"===n&&vN(e.onDisconnect_,t,a),sR(0,i,n,r)}))}(this._repo,this._path,e,t,n.wrapCallback((function(){}))),n.promise}},{key:"update",value:function(e){UP("OnDisconnect.update",this._path),LP("OnDisconnect.update",e,this._path,!1);var t=new Qe;return function(e,t,n,r){if(dt(n))return iC("onDisconnect().update() called with empty data.  Don't do anything."),void sR(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,(function(i,a){"ok"===i&&gC(n,(function(n,r){var i=WA(r);vN(e.onDisconnect_,iA(t,n),i)})),sR(0,r,i,a)}))}(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}}]),e}(),ER=function(){function e(t,n,r,i){d(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return v(e,[{key:"key",get:function(){return aA(this._path)?null:tA(this._path)}},{key:"ref",get:function(){return new AR(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=hN(this._queryParams),t=vC(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return hN(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=At(t))instanceof e))return!1;var n=this._repo===t._repo,r=sA(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}();function SR(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function TR(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===wA){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==lC)throw new Error(r);if("string"!==typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==hC)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(e.getIndex()===FA){if(null!=t&&!PP(t)||null!=n&&!PP(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Ve(e.getIndex()instanceof HA||e.getIndex()===QA,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function CR(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var AR=function(e){g(n,e);var t=x(n);function n(e,r){return d(this,n),t.call(this,e,r,new oN,!1)}return v(n,[{key:"parent",get:function(){var e=rA(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(ER),NR=function(){function e(t,n,r){d(this,e),this._node=t,this.ref=n,this._index=r}return v(e,[{key:"priority",get:function(){return this._node.getPriority().val()}},{key:"key",get:function(){return this.ref.key}},{key:"size",get:function(){return this._node.numChildren()}},{key:"child",value:function(t){var n=new XC(t),r=RR(this.ref,t);return new e(this._node.getChild(n),r,FA)}},{key:"exists",value:function(){return!this._node.isEmpty()}},{key:"exportVal",value:function(){return this._node.val(!0)}},{key:"forEach",value:function(t){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return t(new e(i,RR(n.ref,r),FA))}))}},{key:"hasChild",value:function(e){var t=new XC(e);return!this._node.getChild(t).isEmpty()}},{key:"hasChildren",value:function(){return!this._node.isLeafNode()&&!this._node.isEmpty()}},{key:"toJSON",value:function(){return this.exportVal()}},{key:"val",value:function(){return this._node.val()}}]),e}();function DR(e,t){return(e=At(e))._checkNotDeleted("ref"),void 0!==t?RR(e._root,t):e._root}function PR(e,t){(e=At(e))._checkNotDeleted("refFromURL");var n=kR(t,e._repo.repoInfo_.nodeAdmin);VP("refFromURL",n);var r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||uC("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),DR(e,n.path.toString())}function RR(e,t){var n,r,i,a;return null===ZC((e=At(e))._path)?(n="child",r="path",a=!1,(i=t)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),jP(n,r,i,a)):jP("child","path",t,!1),new AR(e._repo,iA(e._path,t))}function OR(e,t){e=At(e),UP("push",e._path),RP("push",t,e._path,!0);var n,r=XP(e._repo),i=XA(r),a=RR(e,i),o=RR(e,i);return n=null!=t?MR(o,t).then((function(){return o})):Promise.resolve(o),a.then=n.then.bind(n),a.catch=n.then.bind(n,void 0),a}function LR(e){return UP("remove",e._path),MR(e,null)}function MR(e,t){e=At(e),UP("set",e._path),RP("set",t,e._path,!1);var n=new Qe;return nR(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}function FR(e,t){e=At(e),UP("setPriority",e._path),MP("setPriority",t,!1);var n=new Qe;return nR(e._repo,iA(e._path,".priority"),t,null,n.wrapCallback((function(){}))),n.promise}function jR(e,t,n){if(UP("setWithPriority",e._path),RP("setWithPriority",t,e._path,!1),MP("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";var r=new Qe;return nR(e._repo,e._path,t,n,r.wrapCallback((function(){}))),r.promise}function UR(e,t){LP("update",t,e._path,!1);var n=new Qe;return function(e,t,n,r){uR(e,"update",{path:t.toString(),value:n});var i=!0,a=JP(e),o={};if(gC(n,(function(n,r){i=!1,o[n]=vP(iA(t,n),WA(r),e.serverSyncTree_,a)})),i)iC("update() called with empty data.  Don't do anything."),sR(0,r,"ok",void 0);else{var u=tR(e),s=BD(e.serverSyncTree_,t,o,u);BP(e.eventQueue_,s),e.server_.merge(t.toString(),n,(function(n,i){var a="ok"===n;a||sC("update at "+t+" failed: "+n);var o=qD(e.serverSyncTree_,u,!a),s=o.length>0?fR(e,t):t;zP(e.eventQueue_,s,o),sR(0,r,n,i)})),gC(n,(function(n){var r=gR(e,iA(t,n));fR(e,r)})),zP(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((function(){}))),n.promise}function VR(e){e=At(e);var t=new xR((function(){})),n=new KR(t);return function(e,t,n){var r=YD(e.serverSyncTree_,t);return null!=r?Promise.resolve(r):e.server_.get(t).then((function(r){var i,a=WA(r).withIndex(t._queryParams.getIndex());if(GD(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())i=zD(e.serverSyncTree_,t._path,a);else{var o=eP(e.serverSyncTree_,t);i=HD(e.serverSyncTree_,t._path,a,o)}return zP(e.eventQueue_,t._path,i),WD(e.serverSyncTree_,t,n,null,!0),a}),(function(n){return uR(e,"get for query "+ct(t)+" failed: "+n),Promise.reject(new Error(n))}))}(e._repo,e,n).then((function(t){return new NR(t,new AR(e._repo,e._path),e._queryParams.getIndex())}))}var KR=function(){function e(t){d(this,e),this.callbackContext=t}return v(e,[{key:"respondsTo",value:function(e){return"value"===e}},{key:"createEvent",value:function(e,t){var n=t._queryParams.getIndex();return new bR("value",this,new NR(e.snapshotNode,new AR(t._repo,t._path),n))}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new _R(this,e,t):null}},{key:"matches",value:function(t){return t instanceof e&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}},{key:"hasAnyCallback",value:function(){return null!==this.callbackContext}}]),e}(),BR=function(){function e(t,n){d(this,e),this.eventType=t,this.callbackContext=n}return v(e,[{key:"respondsTo",value:function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new _R(this,e,t):null}},{key:"createEvent",value:function(e,t){Ve(null!=e.childName,"Child events should have a childName.");var n=RR(new AR(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new bR(e.type,this,new NR(e.snapshotNode,n,r),e.prevName)}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,e.prevName)}}},{key:"matches",value:function(t){return t instanceof e&&(this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)))}},{key:"hasAnyCallback",value:function(){return!!this.callbackContext}}]),e}();function qR(e,t,n,r,i){var a;if("object"===typeof r&&(a=void 0,i=r),"function"===typeof r&&(a=r),i&&i.onlyOnce){var o=n,u=function(t,n){aR(e._repo,e,c),o(t,n)};u.userCallback=n.userCallback,u.context=n.context,n=u}var s=new xR(n,a||void 0),c="value"===t?new KR(s):new BR(t,s);return function(e,t,n){var r;r=".info"===ZC(t._path)?GD(e.infoSyncTree_,t,n):GD(e.serverSyncTree_,t,n),qP(e.eventQueue_,t._path,r)}(e._repo,e,c),function(){return aR(e._repo,e,c)}}function zR(e,t,n,r){return qR(e,"value",t,n,r)}function WR(e,t,n,r){return qR(e,"child_added",t,n,r)}function HR(e,t,n,r){return qR(e,"child_changed",t,n,r)}function GR(e,t,n,r){return qR(e,"child_moved",t,n,r)}function QR(e,t,n,r){return qR(e,"child_removed",t,n,r)}function YR(e,t,n){var r=null,i=n?new xR(n):null;"value"===t?r=new KR(i):t&&(r=new BR(t,i)),aR(e._repo,e,r)}var XR=v((function e(){d(this,e)})),JR=function(e){g(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this))._value=e,i._key=r,i}return v(n,[{key:"_apply",value:function(e){RP("endAt",this._value,e._path,!0);var t=sN(e._queryParams,this._value,this._key);if(CR(t),TR(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ER(e._repo,e._path,t,e._orderByCalled)}}]),n}(XR);function ZR(e,t){return FP("endAt","key",t,!0),new JR(e,t)}var $R=function(e){g(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this))._value=e,i._key=r,i}return v(n,[{key:"_apply",value:function(e){RP("endBefore",this._value,e._path,!1);var t=function(e,t,n){var r;return e.index_===wA?("string"===typeof t&&(t=ZA(t)),r=sN(e,t,n)):r=sN(e,t,null==n?lC:ZA(n)),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(CR(t),TR(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ER(e._repo,e._path,t,e._orderByCalled)}}]),n}(XR);function eO(e,t){return FP("endBefore","key",t,!0),new $R(e,t)}var tO=function(e){g(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this))._value=e,i._key=r,i}return v(n,[{key:"_apply",value:function(e){RP("startAt",this._value,e._path,!0);var t=uN(e._queryParams,this._value,this._key);if(CR(t),TR(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ER(e._repo,e._path,t,e._orderByCalled)}}]),n}(XR);function nO(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return FP("startAt","key",t,!0),new tO(e,t)}var rO=function(e){g(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this))._value=e,i._key=r,i}return v(n,[{key:"_apply",value:function(e){RP("startAfter",this._value,e._path,!1);var t=function(e,t,n){var r;return e.index_===wA?("string"===typeof t&&(t=JA(t)),r=uN(e,t,n)):r=uN(e,t,null==n?hC:JA(n)),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(CR(t),TR(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new ER(e._repo,e._path,t,e._orderByCalled)}}]),n}(XR);function iO(e,t){return FP("startAfter","key",t,!0),new rO(e,t)}var aO=function(e){g(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this))._limit=e,r}return v(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new ER(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(XR);function oO(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new aO(e)}var uO=function(e){g(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this))._limit=e,r}return v(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new ER(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(XR);function sO(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new uO(e)}var cO=function(e){g(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this))._path=e,r}return v(n,[{key:"_apply",value:function(e){SR(e,"orderByChild");var t=new XC(this._path);if(aA(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new HA(t),r=cN(e._queryParams,n);return TR(r),new ER(e._repo,e._path,r,!0)}}]),n}(XR);function lO(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return jP("orderByChild","path",e,!1),new cO(e)}var hO=function(e){g(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"_apply",value:function(e){SR(e,"orderByKey");var t=cN(e._queryParams,wA);return TR(t),new ER(e._repo,e._path,t,!0)}}]),n}(XR);function fO(){return new hO}var dO=function(e){g(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"_apply",value:function(e){SR(e,"orderByPriority");var t=cN(e._queryParams,FA);return TR(t),new ER(e._repo,e._path,t,!0)}}]),n}(XR);function pO(){return new dO}var vO=function(e){g(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"_apply",value:function(e){SR(e,"orderByValue");var t=cN(e._queryParams,QA);return TR(t),new ER(e._repo,e._path,t,!0)}}]),n}(XR);function yO(){return new vO}var gO=function(e){g(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this))._value=e,i._key=r,i}return v(n,[{key:"_apply",value:function(e){if(RP("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new JR(this._value,this._key)._apply(new tO(this._value,this._key)._apply(e))}}]),n}(XR);function mO(e,t){return FP("equalTo","key",t,!0),new gO(e,t)}function kO(e){for(var t=At(e),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];t=u._apply(t)}return t}!function(e){Ve(!kD,"__referenceConstructor has already been defined"),kD=e}(AR),function(e){Ve(!SD,"__referenceConstructor has already been defined"),SD=e}(AR);var wO={},bO=!1;function _O(e,t,n,r){e.repoInfo_=new PC("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams),r&&(e.authTokenProvider_=r)}function xO(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||uC("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),iC("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,u=kR(a,i),s=u.repoInfo,c=void 0;"undefined"!==typeof process&&(c={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_DATABASE_EMULATOR_HOST),c?(o=!0,a="http://".concat(c,"?ns=").concat(s.namespace),s=(u=kR(a,i)).repoInfo):o=!u.repoInfo.secure;var l=i&&o?new TC(TC.OWNER):new SC(e.name,e.options,t);VP("Invalid Firebase Database URL",u),aA(u.path)||uC("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(e,t,n,r){var i=wO[t.name];i||(i={},wO[t.name]=i);var a=i[e.toURLString()];a&&uC("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new QP(e,bO,n,r),i[e.toURLString()]=a,a}(s,e,l,new EC(e.name,n));return new IO(h,e)}var IO=function(){function e(t,n){d(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return v(e,[{key:"_repo",get:function(){return this._instanceStarted||(YP(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new AR(this._repo,JC())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=wO[t];n&&n[e.key]===e||uC("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),oR(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&uC("Cannot call "+e+" on a deleted database.")}}]),e}();function EO(){WC.IS_TRANSPORT_INITIALIZED&&sC("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function SO(){EO(),KC.forceDisallow()}function TO(){EO(),zC.forceDisallow(),KC.forceAllow()}function CO(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=At(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&uC("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,a=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&uC('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new TC(TC.OWNER);else if(r.mockUserToken){var o="string"===typeof r.mockUserToken?r.mockUserToken:Ye(r.mockUserToken,e.app.options.projectId);a=new TC(o)}_O(i,t,n,a)}function AO(e){(e=At(e))._checkNotDeleted("goOffline"),oR(e._repo)}function NO(e){var t;(e=At(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(GP)}function DO(e,t){rC(e,t)}var PO={".sv":"timestamp"};var RO=function(){function e(t,n){d(this,e),this.committed=t,this.snapshot=n}return v(e,[{key:"toJSON",value:function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}();function OO(e,t,n){var r;if(e=At(e),UP("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";var i=null===(r=null===n||void 0===n?void 0:n.applyLocally)||void 0===r||r,a=new Qe,o=zR(e,(function(){}));return function(e,t,n,r,i,a){uR(e,"transaction on "+t);var o={path:t,update:n,onComplete:r,status:null,order:ZT(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=cR(e,t,void 0);o.currentInputSnapshot=u;var s=o.update(u.val());if(void 0===s)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{OP("transaction failed: Data returned ",s,o.path),o.status=0;var c,l=kP(e.transactionQueueTree_,t),h=wP(l)||[];h.push(o),bP(l,h),"object"===typeof s&&null!==s&&ht(s,".priority")?(c=ft(s,".priority"),Ve(PP(c),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):c=(QD(e.serverSyncTree_,t)||qA.EMPTY_NODE).getPriority().val();var f=JP(e),d=WA(s,c),p=yP(d,u,f);o.currentOutputSnapshotRaw=d,o.currentOutputSnapshotResolved=p,o.currentWriteId=tR(e);var v=KD(e.serverSyncTree_,t,p,o.currentWriteId,o.applyLocally);zP(e.eventQueue_,t,v),lR(e,e.transactionQueueTree_)}}(e._repo,e._path,t,(function(t,n,r){var i=null;t?a.reject(t):(i=new NR(r,new AR(e._repo,e._path),FA),a.resolve(new RO(n,i)))}),o,i),a.promise}vA.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},vA.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){WT(An),_n(new Rt("database",(function(e,t){var n=t.instanceIdentifier;return xO(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),Ln(BT,qT,e),Ln(BT,qT,"esm2017")}();var LO=new zt("@firebase/database-compat"),MO=function(e){var t="FIREBASE WARNING: "+e;LO.warn(t)},FO=function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error(Et(e,t)+"must be a boolean.")},jO=function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Et(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},UO=function(){function e(t){d(this,e),this._delegate=t}return v(e,[{key:"cancel",value:function(e){It("OnDisconnect.cancel",0,1,arguments.length),St("OnDisconnect.cancel","onComplete",e,!0);var t=this._delegate.cancel();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"remove",value:function(e){It("OnDisconnect.remove",0,1,arguments.length),St("OnDisconnect.remove","onComplete",e,!0);var t=this._delegate.remove();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"set",value:function(e,t){It("OnDisconnect.set",1,2,arguments.length),St("OnDisconnect.set","onComplete",t,!0);var n=this._delegate.set(e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"setWithPriority",value:function(e,t,n){It("OnDisconnect.setWithPriority",2,3,arguments.length),St("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"update",value:function(e,t){if(It("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,MO("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}St("OnDisconnect.update","onComplete",t,!0);var i=this._delegate.update(e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}}]),e}(),VO=function(){function e(t,n){d(this,e),this.committed=t,this.snapshot=n}return v(e,[{key:"toJSON",value:function(){return It("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}(),KO=function(){function e(t,n){d(this,e),this._database=t,this._delegate=n}return v(e,[{key:"val",value:function(){return It("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}},{key:"exportVal",value:function(){return It("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}},{key:"toJSON",value:function(){return It("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"exists",value:function(){return It("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}},{key:"child",value:function(t){return It("DataSnapshot.child",0,1,arguments.length),t=String(t),jP("DataSnapshot.child","path",t,!1),new e(this._database,this._delegate.child(t))}},{key:"hasChild",value:function(e){return It("DataSnapshot.hasChild",1,1,arguments.length),jP("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}},{key:"getPriority",value:function(){return It("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}},{key:"forEach",value:function(t){var n=this;return It("DataSnapshot.forEach",1,1,arguments.length),St("DataSnapshot.forEach","action",t,!1),this._delegate.forEach((function(r){return t(new e(n._database,r))}))}},{key:"hasChildren",value:function(){return It("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}},{key:"key",get:function(){return this._delegate.key}},{key:"numChildren",value:function(){return It("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}},{key:"getRef",value:function(){return It("DataSnapshot.ref",0,0,arguments.length),new qO(this._database,this._delegate.ref)}},{key:"ref",get:function(){return this.getRef()}}]),e}(),BO=function(){function e(t,n){d(this,e),this.database=t,this._delegate=n}return v(e,[{key:"on",value:function(t,n,r,i){var a,o=this;It("Query.on",2,4,arguments.length),St("Query.on","callback",n,!1);var u=e.getCancelAndContextArgs_("Query.on",r,i),s=function(e,t){n.call(u.context,new KO(o.database,e),t)};s.userCallback=n,s.context=u.context;var c=null===(a=u.cancel)||void 0===a?void 0:a.bind(u.context);switch(t){case"value":return zR(this._delegate,s,c),n;case"child_added":return WR(this._delegate,s,c),n;case"child_removed":return QR(this._delegate,s,c),n;case"child_changed":return HR(this._delegate,s,c),n;case"child_moved":return GR(this._delegate,s,c),n;default:throw new Error(Et("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}},{key:"off",value:function(e,t,n){if(It("Query.off",0,3,arguments.length),jO("Query.off",e,!0),St("Query.off","callback",t,!0),Tt("Query.off","context",n,!0),t){var r=function(){};r.userCallback=t,r.context=n,YR(this._delegate,e,r)}else YR(this._delegate,e)}},{key:"get",value:function(){var e=this;return VR(this._delegate).then((function(t){return new KO(e.database,t)}))}},{key:"once",value:function(t,n,r,i){var a=this;It("Query.once",1,4,arguments.length),St("Query.once","callback",n,!0);var o=e.getCancelAndContextArgs_("Query.once",r,i),u=new Qe,s=function(e,t){var r=new KO(a.database,e);n&&n.call(o.context,r,t),u.resolve(r)};s.userCallback=n,s.context=o.context;var c=function(e){o.cancel&&o.cancel.call(o.context,e),u.reject(e)};switch(t){case"value":zR(this._delegate,s,c,{onlyOnce:!0});break;case"child_added":WR(this._delegate,s,c,{onlyOnce:!0});break;case"child_removed":QR(this._delegate,s,c,{onlyOnce:!0});break;case"child_changed":HR(this._delegate,s,c,{onlyOnce:!0});break;case"child_moved":GR(this._delegate,s,c,{onlyOnce:!0});break;default:throw new Error(Et("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise}},{key:"limitToFirst",value:function(t){return It("Query.limitToFirst",1,1,arguments.length),new e(this.database,kO(this._delegate,oO(t)))}},{key:"limitToLast",value:function(t){return It("Query.limitToLast",1,1,arguments.length),new e(this.database,kO(this._delegate,sO(t)))}},{key:"orderByChild",value:function(t){return It("Query.orderByChild",1,1,arguments.length),new e(this.database,kO(this._delegate,lO(t)))}},{key:"orderByKey",value:function(){return It("Query.orderByKey",0,0,arguments.length),new e(this.database,kO(this._delegate,fO()))}},{key:"orderByPriority",value:function(){return It("Query.orderByPriority",0,0,arguments.length),new e(this.database,kO(this._delegate,pO()))}},{key:"orderByValue",value:function(){return It("Query.orderByValue",0,0,arguments.length),new e(this.database,kO(this._delegate,yO()))}},{key:"startAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return It("Query.startAt",0,2,arguments.length),new e(this.database,kO(this._delegate,nO(t,n)))}},{key:"startAfter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return It("Query.startAfter",0,2,arguments.length),new e(this.database,kO(this._delegate,iO(t,n)))}},{key:"endAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return It("Query.endAt",0,2,arguments.length),new e(this.database,kO(this._delegate,ZR(t,n)))}},{key:"endBefore",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return It("Query.endBefore",0,2,arguments.length),new e(this.database,kO(this._delegate,eO(t,n)))}},{key:"equalTo",value:function(t,n){return It("Query.equalTo",1,2,arguments.length),new e(this.database,kO(this._delegate,mO(t,n)))}},{key:"toString",value:function(){return It("Query.toString",0,0,arguments.length),this._delegate.toString()}},{key:"toJSON",value:function(){return It("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"isEqual",value:function(t){if(It("Query.isEqual",1,1,arguments.length),!(t instanceof e)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(t._delegate)}},{key:"ref",get:function(){return new qO(this.database,new AR(this._delegate._repo,this._delegate._path))}}],[{key:"getCancelAndContextArgs_",value:function(e,t,n){var r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,St(e,"cancel",r.cancel,!0),r.context=n,Tt(e,"context",r.context,!0);else if(t)if("object"===typeof t&&null!==t)r.context=t;else{if("function"!==typeof t)throw new Error(Et(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}}]),e}(),qO=function(e){g(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,new ER(r._repo,r._path,new oN,!1))).database=e,i._delegate=r,i}return v(n,[{key:"getKey",value:function(){return It("Reference.key",0,0,arguments.length),this._delegate.key}},{key:"child",value:function(e){return It("Reference.child",1,1,arguments.length),"number"===typeof e&&(e=String(e)),new n(this.database,RR(this._delegate,e))}},{key:"getParent",value:function(){It("Reference.parent",0,0,arguments.length);var e=this._delegate.parent;return e?new n(this.database,e):null}},{key:"getRoot",value:function(){return It("Reference.root",0,0,arguments.length),new n(this.database,this._delegate.root)}},{key:"set",value:function(e,t){It("Reference.set",1,2,arguments.length),St("Reference.set","onComplete",t,!0);var n=MR(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"update",value:function(e,t){if(It("Reference.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,MO("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}UP("Reference.update",this._delegate._path),St("Reference.update","onComplete",t,!0);var i=UR(this._delegate,e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}},{key:"setWithPriority",value:function(e,t,n){It("Reference.setWithPriority",2,3,arguments.length),St("Reference.setWithPriority","onComplete",n,!0);var r=jR(this._delegate,e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"remove",value:function(e){It("Reference.remove",0,1,arguments.length),St("Reference.remove","onComplete",e,!0);var t=LR(this._delegate);return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"transaction",value:function(e,t,n){var r=this;It("Reference.transaction",1,3,arguments.length),St("Reference.transaction","transactionUpdate",e,!1),St("Reference.transaction","onComplete",t,!0),FO("Reference.transaction","applyLocally",n,!0);var i=OO(this._delegate,e,{applyLocally:n}).then((function(e){return new VO(e.committed,new KO(r.database,e.snapshot))}));return t&&i.then((function(e){return t(null,e.committed,e.snapshot)}),(function(e){return t(e,!1,null)})),i}},{key:"setPriority",value:function(e,t){It("Reference.setPriority",1,2,arguments.length),St("Reference.setPriority","onComplete",t,!0);var n=FR(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"push",value:function(e,t){var r=this;It("Reference.push",0,2,arguments.length),St("Reference.push","onComplete",t,!0);var i=OR(this._delegate,e),a=i.then((function(e){return new n(r.database,e)}));t&&a.then((function(){return t(null)}),(function(e){return t(e)}));var o=new n(this.database,i);return o.then=a.then.bind(a),o.catch=a.catch.bind(a,void 0),o}},{key:"onDisconnect",value:function(){return UP("Reference.onDisconnect",this._delegate._path),new UO(new IR(this._delegate._repo,this._delegate._path))}},{key:"key",get:function(){return this.getKey()}},{key:"parent",get:function(){return this.getParent()}},{key:"root",get:function(){return this.getRoot()}}]),n}(BO),zO=function(){function e(t,n){var r=this;d(this,e),this._delegate=t,this.app=n,this.INTERNAL={delete:function(){return r._delegate._delete()},forceWebSockets:SO,forceLongPolling:TO}}return v(e,[{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};CO(this._delegate,e,t,n)}},{key:"ref",value:function(e){if(It("database.ref",0,1,arguments.length),e instanceof qO){var t=PR(this._delegate,e.toString());return new qO(this,t)}var n=DR(this._delegate,e);return new qO(this,n)}},{key:"refFromURL",value:function(e){var t="database.refFromURL";It(t,1,1,arguments.length);var n=PR(this._delegate,e);return new qO(this,n)}},{key:"goOffline",value:function(){return It("database.goOffline",0,0,arguments.length),AO(this._delegate)}},{key:"goOnline",value:function(){return It("database.goOnline",0,0,arguments.length),NO(this._delegate)}}]),e}();zO.ServerValue={TIMESTAMP:PO,increment:function(e){return function(e){return{".sv":{increment:e}}}(e)}};var WO=Object.freeze({__proto__:null,initStandalone:function(e){var t=e.app,n=e.url,r=e.version,i=e.customAuthImpl,a=e.namespace,o=e.nodeAdmin,u=void 0!==o&&o;WT(r);var s=new Lt("auth-internal",new jt("database-standalone"));return s.setComponent(new Rt("auth-internal",(function(){return i}),"PRIVATE")),{instance:new zO(xO(t,s,void 0,n,u),t),namespace:a}}}),HO=zO.ServerValue;!function(e){e.INTERNAL.registerComponent(new Rt("database-compat",(function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new zO(i,r)}),"PUBLIC").setServiceProps({Reference:qO,Query:BO,Database:zO,DataSnapshot:KO,enableLogging:DO,INTERNAL:WO,ServerValue:HO}).setMultipleInstances(!0)),e.registerVersion("@firebase/database-compat","0.2.6")}(ar);var GO=function(){var e=l((0,r.useState)(null),2),t=e[0],n=e[1];console.log("useBackgroundFunc render ran again...");var i=l((0,r.useState)("transparent"),2),a=i[0],o=i[1],u=l((0,r.useState)("transparent"),2),s=u[0],c=u[1],h=l((0,r.useState)("transparent"),2),f=h[0],d=h[1],p=l((0,r.useState)("transparent"),2),v=p[0],y=p[1];return(0,r.useEffect)((function(){var e=Zk.collection("to-do-steps").onSnapshot(function(){var e=Pt(Nt().mark((function e(t){var r;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],e.abrupt("return",new Promise((function(e,i){t.docChanges().forEach((function(e){n(e.doc.data()),e.doc.data().steps.length>0?(1===e.doc.data().steps[0]["recipe-number"]&&(o("#ff5440"),c("transparent"),d("transparent"),y("transparent")),2===e.doc.data().steps[0]["recipe-number"]&&(c("#ff5440"),o("transparent"),d("transparent"),y("transparent")),3===e.doc.data().steps[0]["recipe-number"]&&(d("#ff5440"),o("transparent"),c("transparent"),y("transparent")),4===e.doc.data().steps[0]["recipe-number"]&&(y("#ff5440"),o("transparent"),c("transparent"),d("transparent"))):(y("transparent"),o("transparent"),c("transparent"),d("transparent"))})),e({to_do_steps:r,background_colour_1:a,background_colour_2:s,background_colour_3:f,background_colour_4:v})})).then((function(e){})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){console.log("document id passed, likely not defined"),console.log("error",e)}));return function(){return e()}}),[]),{toDos:t,background_colour_1:a,background_colour_2:s,background_colour_3:f,background_colour_4:v}};var QO=function(){var e=(0,r.useRef)(null),t=l((0,r.useState)(!1),2),n=t[0],i=t[1],a=l((0,r.useState)(null),2),o=a[0],u=a[1],s=l((0,r.useState)(null),2),c=s[0],h=s[1],d=l((0,r.useState)(!1),2),p=d[0],v=d[1],y=l((0,r.useState)(0),2),g=y[0],m=y[1],k=l((0,r.useState)(0),2),w=k[0],b=k[1],_=l((0,r.useState)(4),2),x=_[0],I=(_[1],l((0,r.useState)(null),2)),E=(I[0],I[1]),S=l((0,r.useState)([]),2),T=S[0],C=S[1],A=l((0,r.useState)([]),2),N=A[0],D=A[1],P=l((0,r.useState)([]),2),R=P[0],O=P[1],L=l((0,r.useState)([]),2),M=L[0],F=L[1],j=l((0,r.useState)(null),2),U=j[0],V=j[1],K=l((0,r.useState)(null),2),B=K[0],q=K[1],z=l((0,r.useState)(null),2),W=z[0],H=z[1],G=l((0,r.useState)(null),2),Q=G[0],Y=G[1],X=l((0,r.useState)(null),2),J=X[0],Z=X[1],$=l((0,r.useState)(0),2),ee=$[0],te=$[1],ne=l((0,r.useState)(0),2),re=ne[0],ie=ne[1],ae=l((0,r.useState)(0),2),oe=ae[0],ue=ae[1],se=l((0,r.useState)(0),2),ce=se[0],le=se[1],he=l((0,r.useState)(!1),2),fe=he[0],de=he[1],pe=l((0,r.useState)(!1),2),ve=pe[0],ye=pe[1],ge=l((0,r.useState)(!1),2),me=ge[0],ke=ge[1],we=l((0,r.useState)(!1),2),be=we[0],_e=we[1],xe=l((0,r.useState)(!1),2),Ie=xe[0],Ee=xe[1],Se=l((0,r.useState)(0),2),Te=Se[0],Ce=Se[1],Ae=GO().background_colour_1,Ne=GO().background_colour_2,De=GO().background_colour_3,Pe=GO().background_colour_4,Re=GO().current_instruction_object,Oe=(GO().on_screen_instruction,GO().current_recipe_name,GO().toDos),Le=l((0,r.useState)(0),2),Me=(Le[0],Le[1]),Fe=l((0,r.useState)(0),2),je=Fe[0],Ue=Fe[1],Ve=l((0,r.useState)([]),2),Ke=Ve[0],Be=Ve[1],qe=l((0,r.useState)(-1),2),ze=qe[0],We=qe[1],He=l((0,r.useState)(!1),2),Ge=He[0],Qe=He[1],Ye={1:{1:"#FF9F33",2:"#FEC76D",3:"#FEC76D",4:"#FEC76D"},2:{1:"#FEC76D",2:"#FF9F33",3:"#FEC76D",4:"#FEC76D"},3:{1:"#FEC76D",2:"#FEC76D",3:"#FF9F33",4:"#FEC76D"},4:{1:"#FEC76D",2:"#FEC76D",3:"#FEC76D",4:"#FF9F33"}},Xe=l((0,r.useState)(null),2),Je=Xe[0],Ze=Xe[1];function $e(e,t,n){console.log("======================================="),console.log("TIMER FUNCTION RUNNING"),console.log("======================================="),console.log(typeof e,typeof t,typeof recipe_number),setTimeout((function(){console.log("==========================================="),console.log("TIMER DONE, ABOUT TO RERUN BACKGROUND FUNC"),console.log("==========================================="),function(e,t,n){new Promise(function(){var t=Pt(Nt().mark((function t(r,i){return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e?Zk.collection("upcoming-recipes").doc(n).get().then((function(t){var i=t.data().info,a=0;if(console.log("recipe number at background type: ",typeof recipe_number),console.log("recipe ID is: ",n),console.log("chosen recipe is: ",n),console.log("recipe steps info at background: ",JSON.stringify(i)),console.log("step is, ",e.toString()),void 0!==t.data()&&void 0!==i){for(;a<i.length;a++)if(i[a]["step-info"]["step-dependency"].includes(e)){console.log("step is: ",e);var o=i[a]["step-info"]["step-dependency"].indexOf(e);console.log("index is: ",o.toString()),o>-1&&(console.log("removed dependency"),i[a]["step-info"]["step-dependency"].splice(o,1))}a===i.length&&Zk.collection("upcoming-recipes").doc(n).update({info:i}).then((function(){r()}))}})):r();case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())}(e,0,n)}),1e3*t*60),console.log("timer created for recipe",n,"of",(60*t).toString()," seconds")}return(0,r.useEffect)((function(){Oe&&(0===Oe.steps.length&&(Ue(0),Me(0)),Oe.steps.length>0&&0===je&&"STOVE-SECONDARY"===o&&(e.current.play(),Ue(je+1)))}),[Oe]),(0,r.useEffect)((function(){Ie&&Ee(!1),console.log("I re-rendered"),console.log("to do steps: ",Oe),p?(console.log("running stage complete"),"LOAD"===o?(u("RETRIEVAL"),v(!1),m(1),b(1)):"RETRIEVAL"===o?(u("PREP"),v(!1),m(1),b(1)):"PREP"===o?(u("OVEN"),v(!1),m(1),b(1)):"OVEN"===o?(u("BASE"),v(!1),m(1),b(1)):"BASE"===o?(u("STOVE-PRELIM"),v(!1),m(1),b(1)):"STOVE-PRELIM"===o?(u("STOVE-SECONDARY"),v(!1),m(1),b(1)):"STOVE-SECONDARY"===o&&(u("PACKAGE"),v(!1),m(1),b(1))):(console.log("program running"),console.log("stage is: "+o),console.log("instruction stage is: "+g),"LOAD"===o?(console.log("running load func"),Ge||(Qe(!0),new Promise(function(){var e=Pt(Nt().mark((function e(t,n){var r,i,a,o,u,s,c,l,h;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Zk.collection("to-do-steps").add({steps:[]}).then((function(e){console.log("Document written with ID: ",e.id),u=e.id,Z(e.id)})).then((function(){Zk.collection("upcoming-recipes").add({to_do_steps_instance_FBID:u}).then((function(e){console.log("Document written with ID: ",e.id),s=e.id,V(e.id)})).then((function(){Zk.collection("upcoming-recipes").add({to_do_steps_instance_FBID:u}).then((function(e){console.log("Document written with ID: ",e.id),c=e.id,q(e.id)})).then((function(){Zk.collection("upcoming-recipes").add({to_do_steps_instance_FBID:u}).then((function(e){console.log("Document written with ID: ",e.id),l=e.id,H(e.id)})).then((function(){Zk.collection("upcoming-recipes").add({to_do_steps_instance_FBID:u}).then((function(e){console.log("Document written with ID: ",e.id),h=e.id,Y(e.id)})).then((function(){Zk.collection("to-do-steps").doc(u).update({upcoming_recipe_1_FBID:s,upcoming_recipe_2_FBID:c,upcoming_recipe_3_FBID:l,upcoming_recipe_4_FBID:h})}))}))}))}))})).then((function(){Zk.collection("recipes_test").doc("1").get().then((function(e){r=e.data()})).then((function(){Zk.collection("recipes_test").doc("2").get().then((function(e){i=e.data()})).then((function(){Zk.collection("recipes_test").doc("3").get().then((function(e){a=e.data()})).then((function(){Zk.collection("recipes_test").doc("4").get().then((function(e){o=e.data()})).then((function(){r&&i&&a&&o&&(Ze({1:r,2:i,3:a,4:o}),v(!0),t())}))}))}))}))}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()))):"RETRIEVAL"===o?(console.log("program chosen: ingredientRetrieval"),i(!1),console.log("starting ingredient retrieval"),console.log("recipe cycle number: ",w.toString()),g<=Je[w]["retrieval-steps"].length?(console.log("recipe: ",Je[w].name),console.log("instruction stage: ",g.toString()),console.log("instruction: ",Je[w]["retrieval-steps"][g-1].instruction),E(Je[w].name),h(Je[w]["retrieval-steps"][g-1].instruction)):w<x?(b(w+1),m(1)):v(!0)):"PREP"===o?(console.log("program chosen: prep"),console.log("starting prep"),g<=Je[w]["prep-steps"].length?(console.log("recipe: ",Je[w].name),E(Je[w].name),h(Je[w]["prep-steps"][g-1].instruction)):w<x?(b(w+1),m(1)):v(!0)):"OVEN"===o?(console.log("program chosen: oven"),console.log("starting oven"),g<=Je[w]["oven-steps"].length?(console.log("recipe: ",Je[w].name),E(Je[w].name),h(Je[w]["oven-steps"][g-1].instruction)):w<x?(b(w+1),m(1)):v(!0)):"BASE"===o?(console.log("program chosen: base"),console.log("starting base"),g<=Je[w]["base-steps"].length?(console.log("recipe: ",Je[w].name),E(Je[w].name),h(Je[w]["base-steps"][g-1].instruction)):w<x?(b(w+1),m(1)):v(!0)):"STOVE-PRELIM"===o?(console.log("program chosen: stove-prelim"),function(){h(null);for(var e=1;e<Object.keys(Je).length;e++){for(var t=0,n=[];t<Je[e]["stove-steps"].length;t++)n.push({"recipe-number":Je[e]["recipe-number"],"recipe-name":Je[e].name,"step-info":Je[e]["stove-steps"][t]});1===e?(C(n),Zk.collection("upcoming-recipes").doc(U).set({to_do_steps_instance_FBID:J,info:n})):2===e?(D(n),Zk.collection("upcoming-recipes").doc(B).set({to_do_steps_instance_FBID:J,info:n})):3===e?(O(n),Zk.collection("upcoming-recipes").doc(W).set({to_do_steps_instance_FBID:J,info:n})):4===e&&(F(n),Zk.collection("upcoming-recipes").doc(Q).set({to_do_steps_instance_FBID:J,info:n}))}e===Object.keys(Je).length&&(Ce(Te+1),u("STOVE-SECONDARY"))}()):"STOVE-SECONDARY"===o&&(console.log("program chosen: stove-secondary"),console.log("running stove func ")))}),[Ie,p,o,g,w,Oe,ze]),(0,r.useEffect)((function(){ee>0&&!fe&&function(){var e=ee;console.log("timer func running");var t=setInterval((function(){if(console.log("set interval running"),console.log("timer 1: ",ee.toString()),console.log("setting to now be ",(ee-1).toString()),de(!0),te((function(e){return e-1})),(e-=1)<=0)return te(0),de(!1),clearInterval(t)}),1e3)}()}),[ee]),(0,r.useEffect)((function(){re>0&&!ve&&function(){var e=re;console.log("timer2 func running");var t=setInterval((function(){if(console.log("set interval running"),console.log("timer 2: ",re.toString()),console.log("setting to now be ",(re-1).toString()),ye(!0),ie((function(e){return e-1})),(e-=1)<=0)return ie(0),ye(!1),clearInterval(t)}),1e3)}()}),[re]),(0,r.useEffect)((function(){oe>0&&!me&&function(){var e=oe;console.log("timer3 func running");var t=setInterval((function(){if(console.log("set interval running"),console.log("timer 3: ",oe.toString()),console.log("setting to now be ",(oe-1).toString()),ke(!0),ue((function(e){return e-1})),(e-=1)<=0)return ue(0),ke(!1),clearInterval(t)}),1e3)}()}),[oe]),(0,r.useEffect)((function(){ce>0&&!be&&function(){var e=ce;console.log("timer4 func running");var t=setInterval((function(){if(console.log("set interval running"),console.log("timer 4: ",ce.toString()),console.log("setting to now be ",(ce-1).toString()),_e(!0),le((function(e){return e-1})),(e-=1)<=0)return le(0),_e(!1),clearInterval(t)}),1e3)}()}),[ce]),"STOVE-SECONDARY"===o||"STOVE-PRELIM"===o?(0,nw.jsxs)(lw,{children:[(0,nw.jsx)("h1",{style:{color:"#FF9F33"},children:"Demo"}),(0,nw.jsx)("audio",{ref:e,src:bw,autoPlay:!0}),(0,nw.jsxs)(dw,{style:{border:"solid",borderColor:"#FF9F33",padding:"10px",backgroundColor:"#FF9F33",color:"white","margin-bottom":"10px"},children:[(0,nw.jsx)(gw,{children:(0,nw.jsxs)("h2",{children:["Stage: ",o]})}),(0,nw.jsx)(gw,{children:Oe&&Oe.steps.length>0&&(0,nw.jsxs)("div",{children:[(0,nw.jsx)(Tw,{onClick:function(){console.log("======================================"),console.log("BACK BUTTON PRESSED"),console.log("======================================"),We(ze+1)},children:"Back"}),(0,nw.jsx)(Tw,{style:{margin:"auto 0"},onClick:function(){if(ze>=0)We(ze-1);else{if(console.log("======================================"),console.log("NEXT BUTTON PRESSED"),console.log("======================================"),Be((function(e){return[{stage:o,instruction:Oe.steps[0]}].concat(f(e))})),Oe.steps.length>0){console.log("NEXT BUTTON"),console.log("Duration 1: ",ee.toString()),console.log("Duration 2: ",re.toString()),console.log("Duration 3: ",oe.toString()),console.log("Duration 4: ",ce.toString()),1===Oe.steps[0]["recipe-number"]&&(console.log("duration timer set to: ",Oe.steps[0]["step-info"].duration.toString()),te(60*Oe.steps[0]["step-info"].duration),$e(Oe.steps[0]["step-info"]["step-number"],Oe.steps[0]["step-info"].duration,Oe.upcoming_recipe_1_FBID)),2===Oe.steps[0]["recipe-number"]&&(console.log("duration timer set to: ",Oe.steps[0]["step-info"].duration.toString()),ie(60*Oe.steps[0]["step-info"].duration),$e(Oe.steps[0]["step-info"]["step-number"],Oe.steps[0]["step-info"].duration,Oe.upcoming_recipe_2_FBID)),3===Oe.steps[0]["recipe-number"]&&(console.log("duration timer set to: ",Oe.steps[0]["step-info"].duration.toString()),ue(60*Oe.steps[0]["step-info"].duration),$e(Oe.steps[0]["step-info"]["step-number"],Oe.steps[0]["step-info"].duration,Oe.upcoming_recipe_3_FBID)),4===Oe.steps[0]["recipe-number"]&&(console.log("duration timer set to: ",Oe.steps[0]["step-info"].duration.toString()),le(60*Oe.steps[0]["step-info"].duration),$e(Oe.steps[0]["step-info"]["step-number"],Oe.steps[0]["step-info"].duration,Oe.upcoming_recipe_4_FBID)),console.log("old to do steps: ",JSON.stringify(Oe));var e=Oe.steps[0];Zk.collection("to-do-steps").doc(J).update({steps:ar.firestore.FieldValue.arrayRemove(e)}),console.log("current instruction object: ",JSON.stringify(Re))}Ee(!0)}},children:"Next"})]})})]}),(0,nw.jsxs)(dw,{children:[(0,nw.jsx)(gw,{children:(0,nw.jsxs)(lw,{children:[(0,nw.jsxs)(dw,{lg:2,md:2,style:{border:"solid",height:.4*window.innerHeight},children:[(0,nw.jsxs)(gw,{style:{border:"solid",backgroundColor:Ae},children:[T.length>0?(0,nw.jsx)("h2",{children:T[0]["recipe-name"]}):(0,nw.jsx)("h2",{children:"Not in Use"}),ee>0?(0,nw.jsxs)("h5",{children:["Waiting for cooking to finish in ",ee," secs..."]}):null,(0,nw.jsx)("img",{style:{width:.25*window.innerWidth*(window.innerHeight/window.innerWidth),height:.25*window.innerHeight},src:ww,alt:"black stove"})]}),(0,nw.jsxs)(gw,{style:{border:"solid",backgroundColor:Ne},children:[(0,nw.jsxs)("div",{children:[N.length>0?(0,nw.jsx)("h2",{children:N[0]["recipe-name"]}):(0,nw.jsx)("h2",{children:"Not in Use"}),re>0?(0,nw.jsxs)("h5",{children:["Waiting for cooking to finish in ",re," secs..."]}):null]}),(0,nw.jsx)("div",{children:(0,nw.jsx)("img",{style:{width:.25*window.innerWidth*(window.innerHeight/window.innerWidth),height:.25*window.innerHeight},src:ww,alt:"black stove"})})]})]}),(0,nw.jsxs)(dw,{lg:2,md:2,style:{border:"solid",height:.4*window.innerHeight},children:[(0,nw.jsxs)(gw,{style:{border:"solid",backgroundColor:De},children:[R.length>0?(0,nw.jsx)("h2",{children:R[0]["recipe-name"]}):(0,nw.jsx)("h2",{children:"Not in Use"}),oe>0?(0,nw.jsxs)("h5",{children:["Waiting for cooking to finish in ",oe," secs..."]}):null,(0,nw.jsx)("img",{style:{width:.25*window.innerWidth*(window.innerHeight/window.innerWidth),height:.25*window.innerHeight},src:ww,alt:"black stove"})]}),(0,nw.jsxs)(gw,{style:{border:"solid",backgroundColor:Pe},children:[M.length>0?(0,nw.jsx)("h2",{children:M[0]["recipe-name"]}):(0,nw.jsx)("h2",{children:"Not in Use"}),ce>0?(0,nw.jsxs)("h5",{children:["Waiting for cooking to finish in ",ce," secs..."]}):null,(0,nw.jsx)("img",{style:{width:.25*window.innerWidth*(window.innerHeight/window.innerWidth),height:.25*window.innerHeight},src:ww,alt:"black stove"})]})]})]})}),(0,nw.jsx)(gw,{lg:5,md:3,sm:3,style:{border:"solid",height:.8*window.innerHeight,margin:"auto"},children:ze>=0?Ke.length>0&&(0,nw.jsx)("div",{children:"STOVE-SECONDARY"===Ke[ze].stage?(0,nw.jsxs)("div",{children:[(0,nw.jsxs)("h4",{children:["Stage: ",Ke[ze].stage]}),(0,nw.jsxs)("h4",{children:["Recipe: ",Ke[ze].instruction["recipe-name"]]}),(0,nw.jsxs)("h4",{children:["Instruction: ",Ke[ze].instruction["step-info"].instruction]})]}):(0,nw.jsxs)("div",{children:[(0,nw.jsxs)("h3",{children:["Stage: ",Ke[ze].stage]}),(0,nw.jsxs)("h3",{children:["Instruction: ",Ke[ze].instruction]})]})}):Oe&&Oe.steps.length>0?(0,nw.jsxs)("div",{children:[(0,nw.jsxs)("h2",{children:["Stove: ",Oe.steps[0]["recipe-number"]]}),(0,nw.jsxs)("h3",{children:["Meal: ",Oe.steps[0]["recipe-name"]]}),(0,nw.jsxs)("h4",{children:["Instruction: ",Oe.steps[0]["step-info"].instruction]}),(0,nw.jsx)("br",{}),(0,nw.jsx)("br",{}),(0,nw.jsx)("br",{}),Ke.length>0&&(0,nw.jsxs)("div",{children:[(0,nw.jsx)("h3",{children:"Previous Step:"}),"STOVE-SECONDARY"===Ke[0].stage?(0,nw.jsxs)("div",{children:[(0,nw.jsxs)("h4",{style:{color:"red",opacity:"50%"},children:["Stage: ",Ke[0].stage]}),(0,nw.jsxs)("h4",{style:{color:"red",opacity:"50%"},children:["Recipe: ",Ke[0].instruction["recipe-name"]]}),(0,nw.jsxs)("h4",{style:{color:"red",opacity:"50%"},children:["Instruction: ",Ke[0].instruction["step-info"].instruction]})]}):(0,nw.jsxs)("div",{children:[(0,nw.jsxs)("h3",{style:{color:"red",opacity:"50%"},children:["Stage: ",Ke[0].stage]}),(0,nw.jsxs)("h3",{style:{color:"red",opacity:"50%"},children:["Instruction: ",Ke[0].instruction]})]})]})]}):(0,nw.jsxs)("div",{children:[(0,nw.jsx)("h3",{children:"Loading next steps..."}),(0,nw.jsx)("br",{}),(0,nw.jsx)("br",{}),(0,nw.jsx)("br",{}),Ke.length>0&&(0,nw.jsxs)("div",{children:[(0,nw.jsx)("h3",{children:"Previous Step:"}),"STOVE-SECONDARY"===Ke[0].stage?(0,nw.jsxs)("div",{children:[(0,nw.jsxs)("h4",{style:{color:"red",opacity:"50%"},children:["Stage: ",Ke[0].stage]}),(0,nw.jsxs)("h4",{style:{color:"red",opacity:"50%"},children:["Recipe: ",Ke[0].instruction["recipe-name"]]}),(0,nw.jsxs)("h4",{style:{color:"red",opacity:"50%"},children:["Instruction: ",Ke[0].instruction["step-info"].instruction]})]}):(0,nw.jsxs)("div",{children:[(0,nw.jsxs)("h3",{style:{color:"red",opacity:"50%"},children:["Stage: ",Ke[0].stage]}),(0,nw.jsxs)("h3",{style:{color:"red",opacity:"50%"},children:["Instruction: ",Ke[0].instruction]})]})]})]})})]})]}):n?(0,nw.jsx)("div",{style:{display:"flex","align-items":"center","justify-content":"center"},children:(0,nw.jsxs)("div",{children:[(0,nw.jsx)("h1",{style:{color:"#FF9F33"},children:"Demo"}),(0,nw.jsx)(Nw,{animation:"border"}),(0,nw.jsx)("h2",{children:"Loading Steps..."})]})}):(0,nw.jsxs)("div",{style:{padding:"15px"},children:[(0,nw.jsx)("h1",{style:{color:"#FF9F33"},children:"Demo"}),(0,nw.jsxs)(dw,{style:{border:"solid",borderColor:"#FF9F33",padding:"10px",backgroundColor:"#FF9F33",color:"white"},children:[(0,nw.jsx)(gw,{children:(0,nw.jsxs)("h1",{children:["Stage: ",o]})}),(0,nw.jsxs)(gw,{children:[g>0&&(0,nw.jsxs)("div",{children:[(0,nw.jsx)(Tw,{onClick:function(){console.log("======================================"),console.log("BACK BUTTON PRESSED"),console.log("======================================"),We(ze+1)},children:"Back"}),(0,nw.jsx)(Tw,{onClick:function(){ze>=0?We(ze-1):(console.log("======================================"),console.log("NEXT BUTTON PRESSED"),console.log("======================================"),m(g+1),Be((function(e){return[{stage:o,instruction:c}].concat(f(e))})),Ee(!0))},children:"Next"})]}),0===g&&0===w&&(0,nw.jsx)(Tw,{onClick:function(){u("LOAD"),i(!0),m(g+1),b(w+1),Ee(!0)},children:" Start"})]})]}),(0,nw.jsx)("br",{}),(0,nw.jsx)(dw,{children:(0,nw.jsx)(lw,{style:{margin:"0 auto"},children:("RETRIEVAL"===o||"PREP"===o||"OVEN"===o||"BASE"===o)&&(0,nw.jsxs)(dw,{style:{height:"100%"},children:[(0,nw.jsxs)(gw,{style:{height:"100%",backgroundColor:Ye[w][1],color:"white"},children:[(0,nw.jsxs)("h3",{children:["Meal: ",Je[1].name]}),1===w&&(0,nw.jsxs)("div",{children:[(0,nw.jsx)("br",{}),ze<0&&(0,nw.jsxs)("h3",{children:["Current Instruction: ",c]})]}),(0,nw.jsx)("img",{style:{width:.2*window.innerWidth},src:kw,alt:"mixing bowl"})]}),(0,nw.jsxs)(gw,{style:{height:"100%",backgroundColor:Ye[w][2],color:"white"},children:[(0,nw.jsxs)("h3",{children:["Meal: ",Je[2].name]}),2===w&&(0,nw.jsxs)("div",{children:[(0,nw.jsx)("br",{}),ze<0&&(0,nw.jsxs)("h3",{children:["Current Instruction: ",c]})]}),(0,nw.jsx)("img",{style:{width:.2*window.innerWidth},src:kw,alt:"mixing bowl"})]}),(0,nw.jsxs)(gw,{style:{height:"100%",backgroundColor:Ye[w][3],color:"white"},children:[(0,nw.jsxs)("h3",{children:["Meal: ",Je[3].name]}),3===w&&(0,nw.jsxs)("div",{children:[(0,nw.jsx)("br",{}),ze<0&&(0,nw.jsxs)("h3",{children:["Current Instruction: ",c]})]}),(0,nw.jsx)("img",{style:{width:.2*window.innerWidth},src:kw,alt:"mixing bowl"})]}),(0,nw.jsxs)(gw,{style:{height:"100%",backgroundColor:Ye[w][4],color:"white"},children:[(0,nw.jsxs)("h3",{children:["Meal: ",Je[4].name]}),4===w&&(0,nw.jsxs)("div",{children:[(0,nw.jsx)("br",{}),ze<0&&(0,nw.jsxs)("h3",{children:["Current Instruction: ",c]})]}),(0,nw.jsx)("img",{style:{width:.2*window.innerWidth},src:kw,alt:"mixing bowl"})]})]})})}),(0,nw.jsxs)(dw,{children:[(0,nw.jsx)("h3",{children:"Previous Instruction:"}),ze>=0&&Ke.length>0?(0,nw.jsxs)("div",{children:[(0,nw.jsxs)("h3",{children:["Stage: ",Ke[ze].stage]}),(0,nw.jsxs)("h3",{children:["Instruction: ",Ke[ze].instruction]})]}):Ke.length>0&&(0,nw.jsxs)("div",{children:[(0,nw.jsxs)("h3",{style:{color:"red",opacity:"50%"},children:["Stage: ",Ke[0].stage]}),(0,nw.jsxs)("h3",{style:{color:"red",opacity:"50%"},children:["Instruction: ",Ke[0].instruction]})]})]})]})};var YO=function(){var e=(0,r.useRef)(null),t=l((0,r.useState)(!1),2),n=t[0],i=t[1],a=l((0,r.useState)("PRE-PREP"),2),o=a[0],u=a[1],s=l((0,r.useState)(null),2),c=s[0],h=s[1],d=l((0,r.useState)(!1),2),p=d[0],v=d[1],y=l((0,r.useState)(0),2),g=y[0],m=y[1],k=l((0,r.useState)(0),2),w=k[0],b=k[1],_=l((0,r.useState)(4),2),x=_[0],I=(_[1],l((0,r.useState)(null),2)),E=(I[0],I[1]),S=l((0,r.useState)([]),2),T=S[0],C=S[1],A=l((0,r.useState)([]),2),N=A[0],D=A[1],P=l((0,r.useState)([]),2),R=P[0],O=P[1],L=l((0,r.useState)([]),2),M=L[0],F=L[1],j=l((0,r.useState)(null),2),U=j[0],V=j[1],K=l((0,r.useState)(null),2),B=K[0],q=K[1],z=l((0,r.useState)(null),2),W=z[0],H=z[1],G=l((0,r.useState)(null),2),Q=G[0],Y=G[1],X=l((0,r.useState)(null),2),J=X[0],Z=X[1],$=l((0,r.useState)(0),2),ee=$[0],te=$[1],ne=l((0,r.useState)(0),2),re=ne[0],ie=ne[1],ae=l((0,r.useState)(0),2),oe=ae[0],ue=ae[1],se=l((0,r.useState)(0),2),ce=se[0],le=se[1],he=l((0,r.useState)(!1),2),fe=he[0],de=he[1],pe=l((0,r.useState)(!1),2),ve=pe[0],ye=pe[1],ge=l((0,r.useState)(!1),2),me=ge[0],ke=ge[1],we=l((0,r.useState)(!1),2),be=we[0],_e=we[1],xe=l((0,r.useState)(!1),2),Ie=xe[0],Ee=xe[1],Se=l((0,r.useState)(0),2),Te=Se[0],Ce=Se[1],Ae=GO().background_colour_1,Ne=GO().background_colour_2,De=GO().background_colour_3,Pe=GO().background_colour_4,Re=GO().current_instruction_object,Oe=(GO().on_screen_instruction,GO().current_recipe_name,GO().toDos),Le=l((0,r.useState)(0),2),Me=(Le[0],Le[1]),Fe=l((0,r.useState)(0),2),je=Fe[0],Ue=Fe[1],Ve=l((0,r.useState)([]),2),Ke=Ve[0],Be=Ve[1],qe=l((0,r.useState)(-1),2),ze=qe[0],We=qe[1],He=l((0,r.useState)(!1),2),Ge=He[0],Qe=He[1],Ye=l((0,r.useState)(null),2),Xe=Ye[0],Je=Ye[1],Ze={1:{1:"#FF9F33",2:"#FEC76D",3:"#FEC76D",4:"#FEC76D"},2:{1:"#FEC76D",2:"#FF9F33",3:"#FEC76D",4:"#FEC76D"},3:{1:"#FEC76D",2:"#FEC76D",3:"#FF9F33",4:"#FEC76D"},4:{1:"#FEC76D",2:"#FEC76D",3:"#FEC76D",4:"#FF9F33"}};function $e(e,t,n){console.log("======================================="),console.log("TIMER FUNCTION RUNNING"),console.log("======================================="),console.log(typeof e,typeof t,typeof recipe_number),setTimeout((function(){console.log("==========================================="),console.log("TIMER DONE, ABOUT TO RERUN BACKGROUND FUNC"),console.log("==========================================="),function(e,t,n){new Promise(function(){var t=Pt(Nt().mark((function t(r,i){return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e?Zk.collection("upcoming-recipes").doc(n).get().then((function(t){var i=t.data().info,a=0;if(console.log("recipe number at background type: ",typeof recipe_number),console.log("recipe ID is: ",n),console.log("chosen recipe is: ",n),console.log("recipe steps info at background: ",JSON.stringify(i)),console.log("step is, ",e.toString()),void 0!==t.data()&&void 0!==i){for(;a<i.length;a++)if(i[a]["step-info"]["step-dependency"].includes(e)){console.log("step is: ",e);var o=i[a]["step-info"]["step-dependency"].indexOf(e);console.log("index is: ",o.toString()),o>-1&&(console.log("removed dependency"),i[a]["step-info"]["step-dependency"].splice(o,1))}a===i.length&&Zk.collection("upcoming-recipes").doc(n).update({info:i}).then((function(){r()}))}})):r();case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())}(e,0,n)}),1e3*t*60),console.log("timer created for recipe",n,"of",(60*t).toString()," seconds")}return(0,r.useEffect)((function(){Oe&&(0===Oe.steps.length&&(Ue(0),Me(0)),Oe.steps.length>0&&0===je&&"STOVE-SECONDARY"===o&&(e.current.play(),Ue(je+1)))}),[Oe]),(0,r.useEffect)((function(){Ie&&Ee(!1),console.log("I re-rendered"),console.log("to do steps: ",Oe),p?(console.log("running stage complete"),"LOAD"===o?(u("RETRIEVAL"),v(!1),m(1),b(1)):"RETRIEVAL"===o?(u("PREP"),v(!1),m(1),b(1)):"PREP"===o?(u("OVEN"),v(!1),m(1),b(1)):"OVEN"===o?(u("BASE"),v(!1),m(1),b(1)):"BASE"===o?(u("STOVE-PRELIM"),v(!1),m(1),b(1)):"STOVE-PRELIM"===o?(u("STOVE-SECONDARY"),v(!1),m(1),b(1)):"STOVE-SECONDARY"===o&&(u("PACKAGE"),v(!1),m(1),b(1))):(console.log("program running"),console.log("stage is: "+o),console.log("instruction stage is: "+g),"LOAD"===o?(console.log("running load func"),Ge||(Qe(!0),new Promise(function(){var e=Pt(Nt().mark((function e(t,n){var r,i,a,o,u,s,c,l,h;return Nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Zk.collection("to-do-steps").add({steps:[]}).then((function(e){console.log("Document written with ID: ",e.id),u=e.id,Z(e.id)})).then((function(){Zk.collection("upcoming-recipes").add({to_do_steps_instance_FBID:u}).then((function(e){console.log("Document written with ID: ",e.id),s=e.id,V(e.id)})).then((function(){Zk.collection("upcoming-recipes").add({to_do_steps_instance_FBID:u}).then((function(e){console.log("Document written with ID: ",e.id),c=e.id,q(e.id)})).then((function(){Zk.collection("upcoming-recipes").add({to_do_steps_instance_FBID:u}).then((function(e){console.log("Document written with ID: ",e.id),l=e.id,H(e.id)})).then((function(){Zk.collection("upcoming-recipes").add({to_do_steps_instance_FBID:u}).then((function(e){console.log("Document written with ID: ",e.id),h=e.id,Y(e.id)})).then((function(){Zk.collection("to-do-steps").doc(u).update({upcoming_recipe_1_FBID:s,upcoming_recipe_2_FBID:c,upcoming_recipe_3_FBID:l,upcoming_recipe_4_FBID:h})}))}))}))}))})).then((function(){Zk.collection("recipes_test").doc("1").get().then((function(e){r=e.data()})).then((function(){Zk.collection("recipes_test").doc("2").get().then((function(e){i=e.data()})).then((function(){Zk.collection("recipes_test").doc("3").get().then((function(e){a=e.data()})).then((function(){Zk.collection("recipes_test").doc("4").get().then((function(e){o=e.data()})).then((function(){r&&i&&a&&o&&(Je({1:r,2:i,3:a,4:o}),v(!0),t())}))}))}))}))}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()))):"RETRIEVAL"===o?(console.log("program chosen: ingredientRetrieval"),i(!1),console.log("starting ingredient retrieval"),console.log("recipe cycle number: ",w.toString()),g<=Xe[w]["retrieval-steps"].length?(console.log("recipe: ",Xe[w].name),console.log("instruction stage: ",g.toString()),console.log("instruction: ",Xe[w]["retrieval-steps"][g-1].instruction),E(Xe[w].name),h(Xe[w]["retrieval-steps"][g-1].instruction)):w<x?(b(w+1),m(1)):v(!0)):"PREP"===o?(console.log("program chosen: prep"),console.log("starting prep"),g<=Xe[w]["prep-steps"].length?(console.log("recipe: ",Xe[w].name),E(Xe[w].name),h(Xe[w]["prep-steps"][g-1].instruction)):w<x?(b(w+1),m(1)):v(!0)):"OVEN"===o?(console.log("program chosen: oven"),console.log("starting oven"),g<=Xe[w]["oven-steps"].length?(console.log("recipe: ",Xe[w].name),E(Xe[w].name),h(Xe[w]["oven-steps"][g-1].instruction)):w<x?(b(w+1),m(1)):v(!0)):"BASE"===o?(console.log("program chosen: base"),console.log("starting base"),g<=Xe[w]["base-steps"].length?(console.log("recipe: ",Xe[w].name),E(Xe[w].name),h(Xe[w]["base-steps"][g-1].instruction)):w<x?(b(w+1),m(1)):v(!0)):"STOVE-PRELIM"===o?(console.log("program chosen: stove-prelim"),function(){h(null);for(var e=1;e<Object.keys(Xe).length;e++){for(var t=0,n=[];t<Xe[e]["stove-steps"].length;t++)n.push({"recipe-number":Xe[e]["recipe-number"],"recipe-name":Xe[e].name,"step-info":Xe[e]["stove-steps"][t]});1===e?(C(n),Zk.collection("upcoming-recipes").doc(U).set({to_do_steps_instance_FBID:J,info:n})):2===e?(D(n),Zk.collection("upcoming-recipes").doc(B).set({to_do_steps_instance_FBID:J,info:n})):3===e?(O(n),Zk.collection("upcoming-recipes").doc(W).set({to_do_steps_instance_FBID:J,info:n})):4===e&&(F(n),Zk.collection("upcoming-recipes").doc(Q).set({to_do_steps_instance_FBID:J,info:n}))}e===Object.keys(Xe).length&&(Ce(Te+1),u("STOVE-SECONDARY"))}()):"STOVE-SECONDARY"===o&&(console.log("program chosen: stove-secondary"),console.log("running stove func ")))}),[Ie,p,o,g,w,Oe,ze]),(0,r.useEffect)((function(){ee>0&&!fe&&function(){var e=ee;console.log("timer func running");var t=setInterval((function(){if(console.log("set interval running"),console.log("timer 1: ",ee.toString()),console.log("setting to now be ",(ee-1).toString()),de(!0),te((function(e){return e-1})),(e-=1)<=0)return te(0),de(!1),clearInterval(t)}),1e3)}()}),[ee]),(0,r.useEffect)((function(){re>0&&!ve&&function(){var e=re;console.log("timer2 func running");var t=setInterval((function(){if(console.log("set interval running"),console.log("timer 2: ",re.toString()),console.log("setting to now be ",(re-1).toString()),ye(!0),ie((function(e){return e-1})),(e-=1)<=0)return ie(0),ye(!1),clearInterval(t)}),1e3)}()}),[re]),(0,r.useEffect)((function(){oe>0&&!me&&function(){var e=oe;console.log("timer3 func running");var t=setInterval((function(){if(console.log("set interval running"),console.log("timer 3: ",oe.toString()),console.log("setting to now be ",(oe-1).toString()),ke(!0),ue((function(e){return e-1})),(e-=1)<=0)return ue(0),ke(!1),clearInterval(t)}),1e3)}()}),[oe]),(0,r.useEffect)((function(){ce>0&&!be&&function(){var e=ce;console.log("timer4 func running");var t=setInterval((function(){if(console.log("set interval running"),console.log("timer 4: ",ce.toString()),console.log("setting to now be ",(ce-1).toString()),_e(!0),le((function(e){return e-1})),(e-=1)<=0)return le(0),_e(!1),clearInterval(t)}),1e3)}()}),[ce]),"PRE-PREP"===o?(0,nw.jsx)(lw,{children:(0,nw.jsxs)(dw,{children:[(0,nw.jsx)(gw,{children:["Instruction1","Instruction2","Instruction3","Instrucntion4"].map((function(e,t){return(0,nw.jsx)(dw,{children:(0,nw.jsxs)("h3",{children:[" ",e," "]})})}))}),(0,nw.jsx)(gw,{children:(0,nw.jsx)(Tw,{onClick:function(){u("LOAD"),i(!0),m(g+1),b(w+1),Ee(!0)},children:"Next"})})]})}):"STOVE-SECONDARY"===o||"STOVE-PRELIM"===o?(0,nw.jsxs)(lw,{children:[(0,nw.jsx)("h1",{style:{color:"#FF9F33"},children:"Actual"}),(0,nw.jsx)("audio",{ref:e,src:bw}),(0,nw.jsxs)(dw,{style:{border:"solid",borderColor:"#FF9F33",padding:"10px",backgroundColor:"#FF9F33",color:"white","margin-bottom":"10px"},children:[(0,nw.jsx)(gw,{children:(0,nw.jsxs)("h2",{children:["Stage: ",o]})}),(0,nw.jsx)(gw,{children:Oe&&Oe.steps.length>0&&(0,nw.jsxs)("div",{children:[(0,nw.jsx)(Tw,{onClick:function(){console.log("======================================"),console.log("BACK BUTTON PRESSED"),console.log("======================================"),We(ze+1)},children:"Back"}),(0,nw.jsx)(Tw,{style:{margin:"auto 0"},onClick:function(){if(ze>=0)We(ze-1);else{if(console.log("======================================"),console.log("NEXT BUTTON PRESSED"),console.log("======================================"),Be((function(e){return[{stage:o,instruction:Oe.steps[0]}].concat(f(e))})),Oe.steps.length>0){console.log("NEXT BUTTON"),console.log("Duration 1: ",ee.toString()),console.log("Duration 2: ",re.toString()),console.log("Duration 3: ",oe.toString()),console.log("Duration 4: ",ce.toString()),1===Oe.steps[0]["recipe-number"]&&(console.log("duration timer set to: ",Oe.steps[0]["step-info"].duration.toString()),te(60*Oe.steps[0]["step-info"].duration),$e(Oe.steps[0]["step-info"]["step-number"],Oe.steps[0]["step-info"].duration,Oe.upcoming_recipe_1_FBID)),2===Oe.steps[0]["recipe-number"]&&(console.log("duration timer set to: ",Oe.steps[0]["step-info"].duration.toString()),ie(60*Oe.steps[0]["step-info"].duration),$e(Oe.steps[0]["step-info"]["step-number"],Oe.steps[0]["step-info"].duration,Oe.upcoming_recipe_2_FBID)),3===Oe.steps[0]["recipe-number"]&&(console.log("duration timer set to: ",Oe.steps[0]["step-info"].duration.toString()),ue(60*Oe.steps[0]["step-info"].duration),$e(Oe.steps[0]["step-info"]["step-number"],Oe.steps[0]["step-info"].duration,Oe.upcoming_recipe_3_FBID)),4===Oe.steps[0]["recipe-number"]&&(console.log("duration timer set to: ",Oe.steps[0]["step-info"].duration.toString()),le(60*Oe.steps[0]["step-info"].duration),$e(Oe.steps[0]["step-info"]["step-number"],Oe.steps[0]["step-info"].duration,Oe.upcoming_recipe_4_FBID)),console.log("old to do steps: ",JSON.stringify(Oe));var e=Oe.steps[0];Zk.collection("to-do-steps").doc(J).update({steps:ar.firestore.FieldValue.arrayRemove(e)}),console.log("current instruction object: ",JSON.stringify(Re))}Ee(!0)}},children:"Next"})]})})]}),(0,nw.jsxs)(dw,{children:[(0,nw.jsx)(gw,{children:(0,nw.jsxs)(lw,{children:[(0,nw.jsxs)(dw,{lg:2,md:2,style:{border:"solid",height:.4*window.innerHeight},children:[(0,nw.jsxs)(gw,{style:{border:"solid",backgroundColor:Ae},children:[T.length>0?(0,nw.jsx)("h2",{children:T[0]["recipe-name"]}):(0,nw.jsx)("h2",{children:"Not in Use"}),ee>0?(0,nw.jsxs)("h5",{children:["Waiting for cooking to finish in ",ee," secs..."]}):null,(0,nw.jsx)("img",{style:{width:.25*window.innerWidth*(window.innerHeight/window.innerWidth),height:.25*window.innerHeight},src:ww,alt:"black stove"})]}),(0,nw.jsxs)(gw,{style:{border:"solid",backgroundColor:Ne},children:[(0,nw.jsxs)("div",{children:[N.length>0?(0,nw.jsx)("h2",{children:N[0]["recipe-name"]}):(0,nw.jsx)("h2",{children:"Not in Use"}),re>0?(0,nw.jsxs)("h5",{children:["Waiting for cooking to finish in ",re," secs..."]}):null]}),(0,nw.jsx)("div",{children:(0,nw.jsx)("img",{style:{width:.25*window.innerWidth*(window.innerHeight/window.innerWidth),height:.25*window.innerHeight},src:ww,alt:"black stove"})})]})]}),(0,nw.jsxs)(dw,{lg:2,md:2,style:{border:"solid",height:.4*window.innerHeight},children:[(0,nw.jsxs)(gw,{style:{border:"solid",backgroundColor:De},children:[R.length>0?(0,nw.jsx)("h2",{children:R[0]["recipe-name"]}):(0,nw.jsx)("h2",{children:"Not in Use"}),oe>0?(0,nw.jsxs)("h5",{children:["Waiting for cooking to finish in ",oe," secs..."]}):null,(0,nw.jsx)("img",{style:{width:.25*window.innerWidth*(window.innerHeight/window.innerWidth),height:.25*window.innerHeight},src:ww,alt:"black stove"})]}),(0,nw.jsxs)(gw,{style:{border:"solid",backgroundColor:Pe},children:[M.length>0?(0,nw.jsx)("h2",{children:M[0]["recipe-name"]}):(0,nw.jsx)("h2",{children:"Not in Use"}),ce>0?(0,nw.jsxs)("h5",{children:["Waiting for cooking to finish in ",ce," secs..."]}):null,(0,nw.jsx)("img",{style:{width:.25*window.innerWidth*(window.innerHeight/window.innerWidth),height:.25*window.innerHeight},src:ww,alt:"black stove"})]})]})]})}),(0,nw.jsx)(gw,{lg:5,md:3,sm:3,style:{border:"solid",height:.8*window.innerHeight,margin:"auto"},children:ze>=0?Ke.length>0&&(0,nw.jsx)("div",{children:"STOVE-SECONDARY"===Ke[ze].stage?(0,nw.jsxs)("div",{children:[(0,nw.jsxs)("h4",{children:["Stage: ",Ke[ze].stage]}),(0,nw.jsxs)("h4",{children:["Recipe: ",Ke[ze].instruction["recipe-name"]]}),(0,nw.jsxs)("h4",{children:["Instruction: ",Ke[ze].instruction["step-info"].instruction]})]}):(0,nw.jsxs)("div",{children:[(0,nw.jsxs)("h3",{children:["Stage: ",Ke[ze].stage]}),(0,nw.jsxs)("h3",{children:["Instruction: ",Ke[ze].instruction]})]})}):Oe&&Oe.steps.length>0?(0,nw.jsxs)("div",{children:[(0,nw.jsxs)("h2",{children:["Stove: ",Oe.steps[0]["recipe-number"]]}),(0,nw.jsxs)("h3",{children:["Meal: ",Oe.steps[0]["recipe-name"]]}),(0,nw.jsxs)("h4",{children:["Instruction: ",Oe.steps[0]["step-info"].instruction]}),(0,nw.jsx)("br",{}),(0,nw.jsx)("br",{}),(0,nw.jsx)("br",{}),Ke.length>0&&(0,nw.jsxs)("div",{children:[(0,nw.jsx)("h3",{children:"Previous Step:"}),"STOVE-SECONDARY"===Ke[0].stage?(0,nw.jsxs)("div",{children:[(0,nw.jsxs)("h4",{style:{color:"red",opacity:"50%"},children:["Stage: ",Ke[0].stage]}),(0,nw.jsxs)("h4",{style:{color:"red",opacity:"50%"},children:["Recipe: ",Ke[0].instruction["recipe-name"]]}),(0,nw.jsxs)("h4",{style:{color:"red",opacity:"50%"},children:["Instruction: ",Ke[0].instruction["step-info"].instruction]})]}):(0,nw.jsxs)("div",{children:[(0,nw.jsxs)("h3",{style:{color:"red",opacity:"50%"},children:["Stage: ",Ke[0].stage]}),(0,nw.jsxs)("h3",{style:{color:"red",opacity:"50%"},children:["Instruction: ",Ke[0].instruction]})]})]})]}):(0,nw.jsxs)("div",{children:[(0,nw.jsx)("h3",{children:"Loading next steps..."}),(0,nw.jsx)("br",{}),(0,nw.jsx)("br",{}),(0,nw.jsx)("br",{}),Ke.length>0&&(0,nw.jsxs)("div",{children:[(0,nw.jsx)("h3",{children:"Previous Step:"}),"STOVE-SECONDARY"===Ke[0].stage?(0,nw.jsxs)("div",{children:[(0,nw.jsxs)("h4",{style:{color:"red",opacity:"50%"},children:["Stage: ",Ke[0].stage]}),(0,nw.jsxs)("h4",{style:{color:"red",opacity:"50%"},children:["Recipe: ",Ke[0].instruction["recipe-name"]]}),(0,nw.jsxs)("h4",{style:{color:"red",opacity:"50%"},children:["Instruction: ",Ke[0].instruction["step-info"].instruction]})]}):(0,nw.jsxs)("div",{children:[(0,nw.jsxs)("h3",{style:{color:"red",opacity:"50%"},children:["Stage: ",Ke[0].stage]}),(0,nw.jsxs)("h3",{style:{color:"red",opacity:"50%"},children:["Instruction: ",Ke[0].instruction]})]})]})]})})]})]}):n?(0,nw.jsx)("div",{style:{display:"flex","align-items":"center","justify-content":"center"},children:(0,nw.jsxs)("div",{children:[(0,nw.jsx)("h1",{style:{color:"#FF9F33"},children:"Actual"}),(0,nw.jsx)(Nw,{animation:"border"}),(0,nw.jsx)("h2",{children:"Loading Steps..."})]})}):(0,nw.jsxs)("div",{style:{padding:"15px"},children:[(0,nw.jsx)("h1",{style:{color:"#FF9F33"},children:"Actual"}),(0,nw.jsxs)(dw,{style:{border:"solid",borderColor:"#FF9F33",padding:"10px",backgroundColor:"#FF9F33",color:"white"},children:[(0,nw.jsx)(gw,{children:(0,nw.jsxs)("h1",{children:["Stage: ",o]})}),(0,nw.jsxs)(gw,{children:[g>0&&(0,nw.jsxs)("div",{children:[(0,nw.jsx)(Tw,{onClick:function(){console.log("======================================"),console.log("BACK BUTTON PRESSED"),console.log("======================================"),We(ze+1)},children:"Back"}),(0,nw.jsx)(Tw,{onClick:function(){ze>=0?We(ze-1):(console.log("======================================"),console.log("NEXT BUTTON PRESSED"),console.log("======================================"),m(g+1),Be((function(e){return[{stage:o,instruction:c}].concat(f(e))})),Ee(!0))},children:"Next"})]}),0===g&&0===w&&(0,nw.jsx)(Tw,{onClick:function(){u("LOAD"),i(!0),m(g+1),b(w+1),Ee(!0)},children:" Start"})]})]}),(0,nw.jsx)("br",{}),(0,nw.jsx)(dw,{children:(0,nw.jsx)(lw,{style:{margin:"0 auto"},children:("RETRIEVAL"===o||"PREP"===o||"OVEN"===o||"BASE"===o)&&(0,nw.jsxs)(dw,{style:{height:"100%"},children:[(0,nw.jsxs)(gw,{style:{height:"100%",backgroundColor:Ze[w][1],color:"white"},children:[(0,nw.jsxs)("h3",{children:["Meal: ",Xe[1].name]}),1===w&&(0,nw.jsxs)("div",{children:[(0,nw.jsx)("br",{}),ze<0&&(0,nw.jsxs)("h3",{children:["Current Instruction: ",c]})]}),(0,nw.jsx)("img",{style:{width:.2*window.innerWidth},src:kw,alt:"mixing bowl"})]}),(0,nw.jsxs)(gw,{style:{height:"100%",backgroundColor:Ze[w][2],color:"white"},children:[(0,nw.jsxs)("h3",{children:["Meal: ",Xe[2].name]}),2===w&&(0,nw.jsxs)("div",{children:[(0,nw.jsx)("br",{}),ze<0&&(0,nw.jsxs)("h3",{children:["Current Instruction: ",c]})]}),(0,nw.jsx)("img",{style:{width:.2*window.innerWidth},src:kw,alt:"mixing bowl"})]}),(0,nw.jsxs)(gw,{style:{height:"100%",backgroundColor:Ze[w][3],color:"white"},children:[(0,nw.jsxs)("h3",{children:["Meal: ",Xe[3].name]}),3===w&&(0,nw.jsxs)("div",{children:[(0,nw.jsx)("br",{}),ze<0&&(0,nw.jsxs)("h3",{children:["Current Instruction: ",c]})]}),(0,nw.jsx)("img",{style:{width:.2*window.innerWidth},src:kw,alt:"mixing bowl"})]}),(0,nw.jsxs)(gw,{style:{height:"100%",backgroundColor:Ze[w][4],color:"white"},children:[(0,nw.jsxs)("h3",{children:["Meal: ",Xe[4].name]}),4===w&&(0,nw.jsxs)("div",{children:[(0,nw.jsx)("br",{}),ze<0&&(0,nw.jsxs)("h3",{children:["Current Instruction: ",c]})]}),(0,nw.jsx)("img",{style:{width:.2*window.innerWidth},src:kw,alt:"mixing bowl"})]})]})})}),(0,nw.jsxs)(dw,{children:[(0,nw.jsx)("h3",{children:"Previous Instruction:"}),ze>=0&&Ke.length>0?(0,nw.jsxs)("div",{children:[(0,nw.jsxs)("h3",{children:["Stage: ",Ke[ze].stage]}),(0,nw.jsxs)("h3",{children:["Instruction: ",Ke[ze].instruction]})]}):Ke.length>0&&(0,nw.jsxs)("div",{children:[(0,nw.jsxs)("h3",{style:{color:"red",opacity:"50%"},children:["Stage: ",Ke[0].stage]}),(0,nw.jsxs)("h3",{style:{color:"red",opacity:"50%"},children:["Instruction: ",Ke[0].instruction]})]})]})]})};var XO=function(){return(0,r.useEffect)((function(){})),(0,nw.jsx)("div",{className:"App",children:(0,nw.jsx)(Re,{children:(0,nw.jsxs)(Te,{children:[(0,nw.jsx)(Ee,{path:"/",element:(0,nw.jsx)(mw,{})}),(0,nw.jsx)(Ee,{path:"/demo",element:(0,nw.jsx)(QO,{})}),(0,nw.jsx)(Ee,{path:"/actual",element:(0,nw.jsx)(YO,{})})]})})})},JO=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))},ZO=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function $O(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}a.createRoot(document.getElementById("root")).render((0,nw.jsx)(r.StrictMode,{children:(0,nw.jsx)(XO,{})})),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");ZO?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):$O(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):$O(t,e)}))}}(),JO()}()}();
//# sourceMappingURL=main.5966a2ea.js.map